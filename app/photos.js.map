{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/photos/ducks/albums/components/AlbumsList.jsx","webpack:///./src/sharing/SharingDetailsModal.jsx","webpack:///./src/photos/ducks/timeline/components/Toolbar.jsx","webpack:///./src/sharing/components/ShareRecipientsInput.jsx","webpack:///./src/models/Contact.js","webpack:///./src/lib/react-cozy-helpers/BarContextProvider.jsx","webpack:///./src/photos/styles/layout.styl","webpack:///zlib (ignored)","webpack:///./src/sharing/components/recipient.styl","webpack:///./src/sharing/components/Avatar.jsx","webpack:///fs (ignored)","webpack:///./src/lib/react-cozy-helpers/ModalManager.jsx","webpack:///./src/photos/ducks/timeline/index.jsx","webpack:///./src/photos/styles/confirms.styl","webpack:///./src/sharing/components/ContactsAndGroupsDataLoader.jsx","webpack:///http (ignored)","webpack:///./src/drive/styles/actionmenu.styl","webpack:///./src/sharing/components/status.styl","webpack:///https (ignored)","webpack:///./src/sharing/assets/icons/icon-eye-16.svg","webpack:///./src/components/Image/index.js","webpack:///./src/photos/styles/main.styl","webpack:///./src/photos/styles/loading.styl","webpack:///./src/photos/lib/confirm.js","webpack:///./src/drive/lib/extraDoctypes.js","webpack:///./src/photos/styles/albumsList.styl","webpack:///./src/sharing/components/Identity.jsx","webpack:///./src/components/Image/ImageLoader.jsx","webpack:///./src/sharing/components/EditableSharingModal.jsx","webpack:///./src/folder-references/index.js","webpack:///./src/photos/components/PhotoList.jsx","webpack:///./src/components/pushClient/pushClient.styl","webpack:///./src/photos/ducks/upload/index.jsx","webpack:///./src/photos/ducks/albums/components/AlbumItem.jsx","webpack:///./src/sharing/components/tooltip.styl","webpack:///./src/photos/styles/newAlbum.styl","webpack:///./src/sharing/assets/icons/icon-link.svg","webpack:///./src/sharing/components/Tooltip.jsx","webpack:///./src/photos/styles/addToAlbum.styl","webpack:///./src/photos/assets/icons/icon-checkbox.svg","webpack:///./src/photos/ducks/albums/components/AddToAlbumModal.jsx","webpack:///./src/sharing/propTypes.js","webpack:///./src/sharing/components/WhoHasAccess.jsx","webpack:///./src/drive/web/modules/upload/withInstance.jsx","webpack:///./src/sharing/assets/icons/icon-pen-write-16.svg","webpack:///./src/photos/locales sync ^\\.\\/.*$","webpack:///./src/photos/components/AppRoute.jsx","webpack:///./src/sharing/assets/icons/icon-hourglass-16.svg","webpack:///./src/photos/ducks/albums/components/AlbumsView.jsx","webpack:///./src/sharing/components/badge.styl","webpack:///./src/sharing/components/ShareByLink.jsx","webpack:///./src/components/pushClient/index.js","webpack:///./src/photos/ducks/albums/components/SelectAlbumsForm.jsx","webpack:///./src/photos/components/Layout.jsx","webpack:///./src/components/Error/Empty.jsx","webpack:///./src/photos/ducks/timeline/dates.js","webpack:///./src/photos/ducks/timeline/components/Timeline.jsx","webpack:///./src/sharing/components/Recipient.jsx","webpack:///./src/photos/targets/browser/doctypes.js","webpack:///./src/lib/logger.js","webpack:///./src/models/index.js","webpack:///./src/sharing/index.jsx","webpack:///./src/sharing/suggestionMatchers.js","webpack:///./src/sharing/state.js","webpack:///./src/photos/components/LoadMoreButton.jsx","webpack:///./src/photos/ducks/albums/index.jsx","webpack:///./src/sharing/assets/icons/icon-cross-bold.svg","webpack:///./src/components/Button/index.jsx","webpack:///./src/components/Error/ErrorComponent.jsx","webpack:///./src/sharing/components/button.styl","webpack:///./src/photos/components/PhotoBoard.jsx","webpack:///./src/sharing/components/ShareByEmail.jsx","webpack:///./src/photos/components/QuitConfirm.jsx","webpack:///./src/photos/ducks/albums/components/AlbumToolbar.jsx","webpack:///./src/sharing/components/colorhash.js","webpack:///./src/photos/styles/topbar.styl","webpack:///./src/drive/assets/icons/icon-trash-big.svg","webpack:///./src/components/Button/CozyHomeLinkIcon.jsx","webpack:///./src/drive/targets/manifest.webapp","webpack:///./src/lib/react-cozy-helpers/index.js","webpack:///./src/photos/components/Loading.jsx","webpack:///./src/photos/assets/icons/icon-main-app.svg","webpack:///./src/photos/ducks/timeline/components/DeleteConfirm.jsx","webpack:///./src/photos/reducers/index.js","webpack:///./src/components/Menu/Menuawaremobile.jsx","webpack:///./src/lib/react-cozy-helpers/QueryParameter.js","webpack:///./src/photos/components/PhotosViewer.jsx","webpack:///./src/photos/components/Topbar.jsx","webpack:///./src/components/pushClient/Banner.jsx","webpack:///./src/sharing/components/autosuggest.styl","webpack:///./src/sharing/components/ShareAutosuggest.jsx","webpack:///./src/components/Button/CozyHomeLink.jsx","webpack:///./src/sharing/components/WhoHasAccessLight.jsx","webpack:///./src/photos/ducks/upload/UploadQueue.jsx","webpack:///./src/photos/ducks/albums/components/CreateAlbumForm.jsx","webpack:///./src/sharing/share.styl","webpack:///./src/photos/styles/photoList.styl","webpack:///./src/sharing/components/ShareModal.jsx","webpack:///./src/components/Button/getHomeLinkHref.jsx","webpack:///./src/photos/assets/icons/icon-image-broken.svg","webpack:///./src/photos/ducks/upload/styles.styl","webpack:///./src/photos/styles/createAlbumForm.styl","webpack:///./src/photos/components/DestroyConfirm.jsx","webpack:///./src/photos/components/UploadButton.jsx","webpack:///./node_modules/date-fns/locale sync ^\\.\\/.*\\/index\\.js$","webpack:///./src/photos/targets/browser/index.jsx","webpack:///./src/sharing/assets/icons/icon-trash-red.svg","webpack:///./src/sharing/components/SharedBadge.jsx","webpack:///./src/photos/ducks/selection/index.jsx","webpack:///./src/photos/ducks/albums/components/AlbumPhotos.jsx","webpack:///./src/components/Button/MoreButton.jsx","webpack:///./src/drive/lib/reporter.js","webpack:///./src/sharing/components/ContactSuggestion.jsx","webpack:///./src/photos/ducks/albums/components/PhotosPicker.jsx","webpack:///./src/photos/components/Photo.jsx","webpack:///./src/sharing/context.js","webpack:///./src/components/Button/index.styl","webpack:///./src/photos/styles/toolbar.styl","webpack:///./src/drive/web/modules/upload/QuotaAlert.jsx","webpack:///./src/photos/ducks/albums/components/AlbumsToolbar.jsx","webpack:///./src/photos/targets/manifest.webapp","webpack:///./src/drive/appMetadata.js","webpack:///./src/sharing/components/SharedStatus.jsx","webpack:///./src/drive/assets/icons/icon-type-folder.svg","webpack:///./src/photos/appMetadata.js","webpack:///./src/drive/lib/doctypes.js","webpack:///./src/components/pushClient/Button.jsx","webpack:///./src/sharing/components/ShareButton.jsx"],"names":["FALLBACK_CREATION_DATE","sortByCreationDate","a","b","Date","created_at","AlbumsList","data","hasMore","fetchMore","t","length","styles","sort","map","id","translate","SharingDetailsModal","context","f","props","onClose","sharingType","owner","recipients","document","documentType","onRevoke","name","Contact","getDisplayName","instance","date","count","Component","PropTypes","func","isRequired","object","MoreMenu","disabled","uploadPhotos","selectItems","classNames","CheckboxIcon","propTypes","bool","Toolbar","ShareRecipientsInput","loading","contacts","groups","fetchStatus","setState","state","label","onPick","onRemove","placeholder","getContactsAndGroups","onFocus","client","string","contactsResponseType","groupsResponseType","array","defaultProps","DoctypeContact","getInitials","contactOrRecipient","defaultValue","isContact","s","public_name","email","toUpperCase","contact","BarContextProvider","children","Array","isArray","React","childContextTypes","store","Avatar","text","size","textId","initial","charAt","bg","ColorHash","getColor","style","backgroundColor","cx","AvatarPlusX","extraRecipients","Math","min","arrayOf","AvatarLink","SHOW_MODAL","HIDE_MODAL","reducer","show","component","action","type","showModal","meta","hideActionMenu","hideModal","ModalManager","connect","ui","modal","dispatch","cloneElement","TIMELINE","FILES_DOCTYPE","TIMELINE_QUERY","find","where","class","trashed","select","sortBy","include","TIMELINE_MUTATIONS","uploadPhoto","file","dirId","mutate","mutationType","execute","window","chrome","getStackClient","fetchJSON","diskUsage","attributes","quota","parseInt","used","error","Error","status","collection","createFile","deletePhoto","photo","destroy","getSectionTitle","album","period","startPeriod","start","endPeriod","end","isSameMonth","formatDMY","isSameDay","formatD","getSectionTitleHours","dates","index","section","titleWithHours","title","formatH","isSameHour","getMatchingSection","sections","datetime","Object","keys","isInsidePeriod","isEqualOrNewer","isEqualOrOlder","getPhotosByClusters","photos","photosNotClustered","forEach","p","refAlbums","albums","ref","auto","push","hasOwnProperty","metadata","sectionDate","day","formatYMD","sortedDates","getTime","i","mutations","result","TimelineBoard","selection","toggle","unselect","ContactsAndGroupsDataLoader","nextProps","confirm","saga","wrapper","body","appendChild","createElement","abort","ReactDOM","unmountComponentAtNode","then","render","Identity","details","TTL","PENDING","LOADING_LINK","LOADING_FALLBACK","LOADED","FAILED","ImageLoader","src","doc","_id","format","loadLink","unsubscribeRealtime","realtime","unsubscribe","handleCreate","_mounted","loadNextSrc","Realtime","subscribe","clearTimeout","timeout","img","onload","onerror","lastError","navigator","onLine","loadFallback","logger","warn","onError","cleanImageLoader","Promise","resolve","reject","Image","setTimeout","links","cozy","files","statById","getFileId","response","getFileLinks","link","options","uri","checkImageSource","getDownloadLink","fileId","getDownloadLinkById","renderFallback","oneOf","withClient","EditableSharingModal","rest","isOwner","getRecipients","getSharingLink","share","revoke","shareByLink","revokeSharingLink","hasSharedParent","hasSharedChild","create","doctype","contactsQuery","all","$gt","$or","$eq","$exists","$not","$size","indexFields","groupsQuery","Group","flow","queryConnect","query","as","REF_PHOTOS","DOCTYPE_APPS","REF_UPLOAD","REF_BACKUP","getReferencedFolders","reference","included","DOCTYPE_FILES","findReferencedBy","_type","filter","folder","test","path","getOrCreateFolderWithReference","existingFolders","ensureDirectoryExists","addReferencesTo","dirInfos","get","photoDimensionsFallback","width","height","adaptRowHeight","containerWidth","handlePhotoOrientation","orientation","PhotoList","selected","selectedIds","indexOf","key","showSelection","onPhotoToggle","onPhotosSelect","onPhotosUnselect","confDesk","spacing","padding","confMob","conf","layout","justifiedLayout","targetRowHeight","boxSpacing","horizontal","vertical","containerPadding","top","right","bottom","left","allSelected","every","firstRowTop","boxes","secondRowFirstIndex","findIndex","firstRowLastBox","firstRowLastBoxRight","marginRight","containerHeight","isPhotoSelected","SLUG","ADD_TO_UPLOAD_QUEUE","UPLOAD_FILE","RECEIVE_UPLOAD_SUCCESS","RECEIVE_UPLOAD_ERROR","PURGE_UPLOAD_QUEUE","LOADING","CONFLICT","QUOTA","itemInitialState","item","assign","queue","combineReducers","processNextFile","callback","getState","getUploadQueue","onQueueEmpty","log","statusError","exec","toString","addToUploadQueue","purgeUploadQueue","conflicts","getConflicts","errors","getErrors","loaded","getLoaded","Alerter","success","smart_count","info","conflictNumber","filterByStatus","getProcessed","getSuccessful","AlbumItemLink","router","image","desc","parentPath","location","pathname","LinkedAlbumItem","withRouter","ClickableAlbumItem","onClick","AlbumItemDesc","photoCount","shared","byMe","withMe","AlbumItem","thumbnail","readOnly","coverPhoto","SharingTooltip","TooltipRecipientList","recipientNames","cutoff","slice","number","AddToAlbumModal","createAlbum","addPhotos","onDismiss","onSuccess","isFetchingAlbums","shape","propType","definition","lastFetch","lastUpdate","WhoHasAccess","className","recipient","PureComponent","withInstance","useState","setInstance","setContext","useEffect","fetchData","instancePromise","contextPromise","promises","catch","e","instanceFetched","contextFetched","AppRoute","Layout","Timeline","PhotosViewer","AlbumsView","PhotosPicker","AlbumPhotos","Content","list","ShareByLink","checked","createShareLink","deleteShareLink","copy","onEnable","onDisable","palette","dodgerBlue","copyLinkToClipboard","toggleShareLink","track","element","tracker","getTracker","isLinux","appVersion","isAndroid","userAgent","isIOS","DESKTOP_BANNER","NOVIEWER_DESKTOP_CTA","isClientAlreadyInstalled","resp","some","device","software_id","onServerError","onSubmitSelectedAlbum","DumbAlbumsView","ErrorAlbumsView","withError","handleError","NavLink","genNavLink","RRNavLink","__TARGET__","EmptyIcon","drive","DriveIcon","PhotosIcon","trash","TrashIcon","EmptyCanvas","canUpload","localeKey","EmptyDrive","EmptyPhotos","EmptyTrash","formatDate","formatter","year","month","substr","split","hours","minutes","seconds","addYear","isThisYear","newerDate","olderDate","newer","older","differenceInCalendarMonths","differenceInCalendarDays","differenceInHours","compareAsc","getUploadDir","referencedFolders","uploadDir","showAddAlbumModal","uploadDirId","downloadArchive","clearSelection","belongsToAlbums","lists","download","downloadPhotos","delete","deletePhotos","clear","active","hideAddAlbumModal","renderViewer","Children","child","MAX_DISPLAYED_RECIPIENTS","DEFAULT_DISPLAY_NAME","RecipientsAvatars","reversedRecipients","reverse","idx","UserAvatar","url","Status","revoking","sharingId","IconEye","IconPen","IconHourglass","isMe","undefined","shouldShowMenu","maxWidth","getStatusIcon","IconTrash","StatusWithBreakpoints","withBreakpoints","Recipient","defaultDisplayName","defaultInitials","contextTypes","RecipientWithoutStatus","RecipientPlusX","HasManyAlbums","HasMany","refs","target","relationships","referenced_by","Boolean","assoc","ids","inc","QueryDefinition","DOCTYPE_ALBUMS","minilog","__APP_SLUG__","enable","suggest","allow","isFile","trackSharingByLink","SharingProvider","parentDirIds","dir_id","arr","parentDirs","filePaths","parentDirPath","d","description","sharing","getDocumentSharing","addRecipients","addSharing","getFilesPaths","updateSharing","recipientIndex","getSharingById","revokeRecipient","getSharingForSelf","revokeSelf","createSharingLink","addSharingLink","perms","getDocumentPermissions","instanceUri","byDocId","sharings","permissions","sharedFolderPaths","docId","canReshare","getOwner","getSharingType","findByDoctype","findLinksByDoctype","findApps","apps","receiveSharings","sharedDocIds","getSharingDocIds","reduce","acc","val","concat","folderPaths","receivePaths","SharedDocument","hasWriteAccess","isShared","isSharedByMe","isSharedWithMe","onLeave","SharedStatus","SharedBadge","SharedRecipients","SharedRecipientsList","r","ShareButton","SharingModal","ShareModal","emailMatch","input","emailInput","RegExp","address","cozyUrlMatch","urlInput","groupNameMatch","contactOrGroup","nameInput","RECEIVE_SHARINGS","ADD_SHARING","UPDATE_SHARING","REVOKE_RECIPIENT","REVOKE_SELF","ADD_SHARING_LINK","REVOKE_SHARING_LINK","RECEIVE_PATHS","areAllRecipientsRevoked","hasBeenSelfRevoked","members","m","paths","matchingInstanceName","shareMember","toLowerCase","byIdInitialState","isItemEmpty","updateByIdItem","updater","byIdState","update","indexSharing","getSharedDocIds","byId","forgetSharing","sid","indexPermission","perm","forgetPermission","permission","pid","intermediaryState","permIds","sharedPaths","console","newState","me","open_sharing","read_only","getDocumentSharings","getDocumentSharingType","member","code","buildSharingLink","getPermissionById","getApps","ret","getPermissionDocIds","rules","values","k","rule","remove","sharecode","appUrl","getAppUrlForDoctype","getAppUrl","appName","app","slug","related","LoadMoreButton","fetching","handleClick","ALBUMS_QUERY","ALBUM_QUERY","ownProps","params","albumId","photoCountBefore","addById","photoCountAfter","ALBUM_MUTATIONS","updateAlbum","checkUniquenessOf","unique","save","deleteAlbum","removePhotos","removeById","album_name","ALBUMS_MUTATIONS","updateQueries","previousData","ConnectedAlbumsView","ConnectedAddToAlbumModal","AlbumPhotosWithLoader","bind","ConnectedAlbumPhotos","CreateAlbumPicker","withMutations","ConnectedPhotosPicker","ErrorComponent","errorType","reload","TranslatedError","BaseComponent","PhotoBoard","photosContext","measureRef","contentRect","entry","isError","isFetching","photoList","withContentRect","DropdownIndicator","coolGrey","Option","isSelected","customStyles","option","base","color","isFocused","paleGrey","borderBottom","o","value","silver","menu","ShareTypeSelect","onChange","ShareSubmit","onSubmit","countNewRecipients","currentRecipients","newRecipients","getPrimaryEmail","cozyUrl","getPrimaryCozy","ShareByEmail","initialState","sendSharingLink","matches","match","trim","replace","contactsToAdd","groupId","contactGroupIds","group","includes","filtered","recipientsBefore","sharingDesc","onShare","createContact","primary","getSuccessMessage","reset","err","onInputFocus","onRecipientPick","onRecipientRemove","sharingTypes","QuitConfirm","confirmationTexts","AlbumToolbar","sharedWithMe","downloadAlbum","onRename","isMobile","breakpoints","shareAlbum","schemes","hashCode","str","h","len","max","pow","charCodeAt","scheme","hash","getHash","CozyHomeLinkIcon","modalReducer","Loading","loadingType","noMargin","middle","DeleteConfirm","types","deleteConfirmationTexts","upload","uiReducer","MenuAwareMobile","buttonClassName","arrToObj","obj","getQueryParameter","search","substring","varval","getParentPath","lastIndexOf","currentIndex","photoId","nextPhoto","bar","BarCenter","BarRight","BarLeft","KEYCODE_ENTER","KEYCODE_ESC","EditableAlbumName","ignoreBlurEvent","onEdit","albumName","keyCode","inputElement","focus","handleKeyDown","handleBlur","elem","TopbarTitle","BackToAlbumsButton","Topbar","parentUrl","viewName","editing","isAlbumContent","renderTitle","responsiveTitle","responsiveMenu","backButton","responsiveBackButton","node","BannerClient","mustShow","willUnmount","localforage","getItem","seen","mustSee","setItem","Config","promoteDesktop","isActivated","mobileLink","desktopLink","markAsSeen","ShareAutocomplete","inputValue","suggestions","computeSuggestions","event","newValue","method","highlightedSuggestion","prevProps","contactsAndGroups","onSuggestionsFetchRequested","inputProps","BoldCross","onKeyPress","self","onSuggestionsClearRequested","renderInput","onBlur","CozyHomeLink","from","embedInCozyBar","getHomeLinkHref","WhoHasAccessLight","Pending","Item","CozyFile","splitFilename","filename","extension","statusIcon","InProgressHeader","total","done","FinishedHeader","successful","UploadQueue","collapsed","doneCount","successCount","purgeQueue","toggleCollapsed","mapStateToProps","mapDispatchToProps","CreateAlbumForm","isSubmitDisabled","isBusy","hasError","preventDefault","onSubmitNewAlbum","onNameChange","require","needsContactsPermission","onShareByLink","onRevokeLink","encodeURIComponent","DestroyConfirm","UploadButton","inMenu","onUpload","button","loggerMiddleware","createLogger","addEventListener","root","querySelector","dataset","lang","documentElement","getAttribute","protocol","cozyDomain","CozyClient","token","cozyToken","appMetadata","schema","doctypes","init","cozyURL","cozyAppName","appEditor","cozyAppEditor","cozyClient","iconPath","cozyIconPath","cozyLocale","replaceTitleOnMobile","configureReporter","setCozyUrl","history","hashHistory","middlewares","thunkMiddleware","shouldEnableTracking","trackerInstance","connectToHistory","getCurrentLocation","createTrackerMiddleware","composeEnhancers","__DEVELOPMENT__","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","appReducers","applyMiddleware","apply","small","xsmall","white","SelectionContext","createContext","SELECT_ITEM","UNSELECT_ITEM","ADD_TO_SELECTION","REMOVE_FROM_SELECTION","TOGGLE_SELECTION_BAR","SHOW_SELECTION_BAR","HIDE_SELECTION_BAR","showSelectionBar","hideSelectionBar","toggleItemSelection","addToSelection","items","removeFromSelection","cancelSelection","newItems","itemIds","isSelectionBarOpened","Selection","opened","actions","selectionActions","realActions","checkedActions","hasActions","Consumer","updatedAlbum","limit","allPhotos","leaveAlbum","renameAlbum","editAlbumName","MoreButton","ANALYTICS_URL","__SENTRY_URL__","normalizeUrl","pathStripRe","normalizeData","PATH_STRIP_RE","culprit","stacktrace","exception","frames","frame","getReporterConfiguration","shouldSendCallback","environment","release","version","allowSecretKey","dataCallback","Raven","config","install","logException","extraContext","fingerprint","captureException","extra","setTagsContext","logMessage","message","serverUrl","level","setUserContext","captureMessage","logInfo","ContactSuggestion","avatarText","membersCount","oneOfType","goBack","isNew","onCancel","onCreate","onUpdate","getStyleFromBox","box","Photo","onToggle","stopPropagation","SharingContext","buildPremiumLink","uuid","managerUrl","QuotaAlert","isMobileApp","instanceInfo","open","AlbumsToolbar","manifest","linkIcon","DOCTYPE_PHOTOS_SETTINGS","DOCTYPE_CONTACTS_VERSION","doctypeVersion","extraDoctypes","ButtonClient","DeviceIcon","SharedByMeButton","SharedWithMeButton"],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;QACA,0CAA0C;QAC1C;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,0CAA0C,oBAAoB,WAAW;;QAEzE;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;;ACpKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMA,sBAAsB,GAAG,IAA/B;;AACA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,CAAD,EAAIC,CAAJ,EAAU;AACnC;AACA,SACE,IAAIC,IAAJ,CAASD,CAAC,CAACE,UAAF,IAAgBL,sBAAzB,IACA,IAAII,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","file":"app/photos.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \"/photos.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// The chunk loading function for additional chunks\n \t// Since all referenced chunks are already included\n \t// in this file, this function is empty here.\n \t__webpack_require__.e = function requireEnsure() {\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([5,\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import styles from 'photos/styles/albumsList.styl'\n\nimport React from 'react'\nimport { Content } from 'cozy-ui/react/Layout'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { EmptyPhotos } from 'components/Error/Empty'\nimport LoadMoreButton from 'photos/components/LoadMoreButton'\nimport AlbumItem from './AlbumItem'\n\nconst FALLBACK_CREATION_DATE = null\nconst sortByCreationDate = (a, b) => {\n  // descending order, so newer albums first\n  return (\n    new Date(b.created_at || FALLBACK_CREATION_DATE) -\n    new Date(a.created_at || FALLBACK_CREATION_DATE)\n  )\n}\n\nconst AlbumsList = ({ data, hasMore, fetchMore, t }) =>\n  data.length === 0 ? (\n    <EmptyPhotos localeKey=\"albums\" />\n  ) : (\n    <Content>\n      <div className={styles['pho-album-list']}>\n        {data.sort(sortByCreationDate).map(a => (\n          <AlbumItem album={a} key={a.id} />\n        ))}\n        {hasMore && (\n          <LoadMoreButton label={t('Albums.load_more')} onClick={fetchMore} />\n        )}\n      </div>\n    </Content>\n  )\n\nexport default translate()(AlbumsList)\n","import styles from './share.styl'\nimport PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport { UserAvatar as Owner } from './components/Recipient'\nimport WhoHasAccess from './components/WhoHasAccess'\n\nimport Modal, { ModalContent } from 'cozy-ui/react/Modal'\n\nimport { Contact } from 'models'\n\nexport class SharingDetailsModal extends Component {\n  static contextTypes = {\n    t: PropTypes.func.isRequired,\n    f: PropTypes.object.isRequired\n  }\n  render() {\n    const { t, f } = this.context\n    const {\n      onClose,\n      sharingType,\n      owner,\n      recipients,\n      document,\n      documentType = 'Document',\n      onRevoke\n    } = this.props\n    return (\n      <Modal\n        title={t(`${documentType}.share.details.title`)}\n        secondaryAction={onClose}\n        className={styles['share-modal']}\n        into=\"body\"\n        size=\"small\"\n        mobileFullscreen\n      >\n        <ModalContent className={styles['share-modal-content']}>\n          <div className={styles['share-details']}>\n            <Owner\n              name={t(`${documentType}.share.sharedBy`, {\n                name: Contact.getDisplayName(owner)\n              })}\n              url={owner.instance}\n            />\n            <div className={styles['share-details-created']}>\n              {t(`${documentType}.share.details.createdAt`, {\n                date: f(document.created_at || null, 'Do MMMM YYYY')\n              })}\n            </div>\n            <div className={styles['share-details-perm']}>\n              {t(\n                `${documentType}.share.details.${\n                  sharingType === 'one-way' ? 'ro' : 'rw'\n                }`\n              )}\n            </div>\n            <div className={styles['share-details-perm-desc']}>\n              {t(\n                `${documentType}.share.details.desc.${\n                  sharingType === 'one-way' ? 'ro' : 'rw'\n                }`\n              )}\n            </div>\n          </div>\n          <hr className={styles['divider']} />\n          <WhoHasAccess\n            title={t('Share.recipients.accessCount', {\n              count: recipients.length\n            })}\n            recipients={recipients}\n            document={document}\n            documentType={documentType}\n            onRevoke={onRevoke}\n          />\n        </ModalContent>\n      </Modal>\n    )\n  }\n}\n","import styles from '../../../styles/toolbar.styl'\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { Menu, MenuItem, Icon } from 'cozy-ui/react'\n\nimport UploadButton from '../../../components/UploadButton'\nimport { MoreButton } from 'components/Button'\n\nimport CheckboxIcon from 'photos/assets/icons/icon-checkbox.svg'\n\nconst MoreMenu = ({ t, disabled, uploadPhotos, selectItems }) => (\n  <Menu\n    disabled={disabled}\n    position=\"right\"\n    className={styles['pho-toolbar-menu']}\n    component={<MoreButton />}\n  >\n    <MenuItem icon={<Icon icon=\"upload\" />} className={'u-hide--desk'}>\n      <UploadButton\n        onUpload={uploadPhotos}\n        disabled={disabled}\n        label={t('Toolbar.menu.photo_upload')}\n        inMenu\n        className={classNames('u-hide--tablet', styles['pho-action-upload'])}\n      />\n    </MenuItem>\n    <hr className={'u-hide--desk'} />\n    <MenuItem onSelect={selectItems} icon={<Icon icon={CheckboxIcon} />}>\n      {t('Toolbar.menu.select_items')}\n    </MenuItem>\n  </Menu>\n)\n\nMoreMenu.propTypes = {\n  disabled: PropTypes.bool,\n  uploadPhotos: PropTypes.func.isRequired,\n  selectItems: PropTypes.func.isRequired,\n  t: PropTypes.func.isRequired\n}\n\nconst Toolbar = ({ t, disabled = false, uploadPhotos, selectItems }) => (\n  <div className={styles['pho-toolbar']} role=\"toolbar\">\n    <UploadButton\n      className={'u-hide--mob'}\n      onUpload={uploadPhotos}\n      disabled={disabled}\n      label={t('Toolbar.photo_upload')}\n    />\n    <MoreMenu\n      t={t}\n      disabled={disabled}\n      uploadPhotos={uploadPhotos}\n      selectItems={selectItems}\n    />\n  </div>\n)\n\nToolbar.propTypes = {\n  disabled: PropTypes.bool,\n  uploadPhotos: PropTypes.func.isRequired,\n  selectItems: PropTypes.func.isRequired,\n  t: PropTypes.func.isRequired\n}\n\nexport default Toolbar\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { contactsResponseType, groupsResponseType } from 'sharing/propTypes'\nimport ShareAutosuggest from 'sharing/components/ShareAutosuggest'\nimport styles from 'sharing/share.styl'\n\nclass ShareRecipientsInput extends Component {\n  static contextTypes = {\n    client: PropTypes.object.isRequired\n  }\n\n  state = {\n    loading: false\n  }\n\n  componentDidUpdate() {\n    const { contacts, groups } = this.props\n    if (\n      this.state.loading &&\n      !contacts.hasMore &&\n      contacts.fetchStatus === 'loaded' &&\n      !groups.hasMore &&\n      groups.fetchStatus === 'loaded'\n    ) {\n      this.setState({\n        loading: false\n      })\n    }\n  }\n\n  onFocus = () => {\n    const { contacts, groups } = this.props\n    if (\n      contacts.hasMore ||\n      contacts.fetchStatus === 'loading' ||\n      groups.hasMore ||\n      groups.fetchStatus === 'loading'\n    ) {\n      this.setState({\n        loading: true\n      })\n    }\n  }\n\n  getContactsAndGroups = () => {\n    // we need contacts to be loaded to be able to add all group members to recipients\n    const { contacts, groups } = this.props\n    if (contacts.hasMore || contacts.fetchStatus === 'loading') {\n      return contacts.data\n    } else {\n      return [...contacts.data, ...groups.data]\n    }\n  }\n\n  render() {\n    const { label, onPick, onRemove, placeholder, recipients } = this.props\n    const { loading } = this.state\n    return (\n      <div>\n        <label className={styles['coz-form-label']} htmlFor=\"email\">\n          {label}\n        </label>\n        <ShareAutosuggest\n          loading={loading}\n          contactsAndGroups={this.getContactsAndGroups()}\n          recipients={recipients}\n          onFocus={this.onFocus}\n          onPick={onPick}\n          onRemove={onRemove}\n          placeholder={placeholder}\n        />\n      </div>\n    )\n  }\n}\n\nShareRecipientsInput.propTypes = {\n  label: PropTypes.string,\n  contacts: contactsResponseType.isRequired,\n  groups: groupsResponseType.isRequired,\n  recipients: PropTypes.array,\n  onPick: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  placeholder: PropTypes.string\n}\n\nShareRecipientsInput.defaultProps = {\n  label: 'To:',\n  recipients: []\n}\n\nexport default ShareRecipientsInput\n","import { Contact as DoctypeContact } from 'cozy-doctypes'\n\nclass Contact extends DoctypeContact {\n  static getInitials(contactOrRecipient, defaultValue = '') {\n    if (Contact.isContact(contactOrRecipient)) {\n      return DoctypeContact.getInitials(contactOrRecipient)\n    } else {\n      const s =\n        contactOrRecipient.public_name ||\n        contactOrRecipient.name ||\n        contactOrRecipient.email\n      return (s && s[0].toUpperCase()) || defaultValue\n    }\n  }\n\n  static getDisplayName(contact, defaultValue = '') {\n    if (Contact.isContact(contact)) {\n      return DoctypeContact.getDisplayName(contact)\n    } else {\n      return (\n        contact.public_name || contact.name || contact.email || defaultValue\n      )\n    }\n  }\n}\n\nexport default Contact\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nclass BarContextProvider extends React.Component {\n  getChildContext() {\n    return this.props\n  }\n\n  render() {\n    if (!this.props.children) return null\n    if (!Array.isArray(this.props.children)) return this.props.children\n    return this.props.children[0]\n  }\n}\nBarContextProvider.childContextTypes = {\n  //child context keys\n  client: PropTypes.object.isRequired,\n  t: PropTypes.func.isRequired,\n  store: PropTypes.object.isRequired,\n  children: PropTypes.object\n}\nexport default BarContextProvider\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pho-sidebar\":\"pho-sidebar--1JZDr\",\"pho-content\":\"pho-content--6vy4r\",\"pho-content-wrapper\":\"pho-content-wrapper--1u34M\",\"spin\":\"spin--OsM9y\",\"shake\":\"shake--V0phk\"};","/* (ignored) */","// extracted by mini-css-extract-plugin\nmodule.exports = {\"recipient-status\":\"recipient-status--2uFD7\",\"recipient-menu-btn\":\"recipient-menu-btn--2_GX0\",\"recipient\":\"recipient--HkJgC\",\"recipients-list-light\":\"recipients-list-light--3bHel\",\"recipient-avatar\":\"recipient-avatar--1Cmmp\",\"recipient-avatar--small\":\"recipient-avatar--small--2hoPQ\",\"recipient-avatar-link\":\"recipient-avatar-link--3gLdE\",\"recipient-avatar-plusx\":\"recipient-avatar-plusx--2ruV6\",\"recipient-idents\":\"recipient-idents--3NhkH\",\"recipient-ident-status\":\"recipient-ident-status--3W1WI\",\"recipient-user\":\"recipient-user--2ON6I\",\"recipient-details\":\"recipient-details--tV3VQ\",\"avatar\":\"avatar--2xuqM\",\"recipients-avatars\":\"recipients-avatars--1PuFV\",\"--interactive\":\"_--interactive--3t-An\",\"recipient-owner\":\"recipient-owner--3PukF\",\"recipient-menu\":\"recipient-menu--Gn7vM\",\"action-unshare\":\"action-unshare--W0mml\",\"action-unshare-desc\":\"action-unshare-desc--8flsy\",\"spin\":\"spin--2Hvw_\",\"shake\":\"shake--KwEfF\"};","import React from 'react'\nimport cx from 'classnames'\nimport PropTypes from 'prop-types'\nimport { SharingTooltip, TooltipRecipientList } from './Tooltip'\nimport styles from './recipient.styl'\nimport ColorHash from './colorhash'\n\nexport const Avatar = ({ text, size, textId }) => {\n  const initial = text.charAt(0)\n  const bg = ColorHash().getColor(textId)\n  const style = {\n    backgroundColor: bg\n  }\n  return (\n    <div\n      className={cx(styles['recipient-avatar'], {\n        [styles['recipient-avatar--small']]: size === 'small'\n      })}\n      style={style}\n      data-tip={textId}\n      data-for={`recipient-avatar-${text}`}\n    >\n      <span>{initial}</span>\n      <SharingTooltip id={`recipient-avatar-${text}`} />\n    </div>\n  )\n}\n\nAvatar.propTypes = {\n  text: PropTypes.string,\n  size: PropTypes.string,\n  textId: PropTypes.string\n}\n\nAvatar.defaultProps = {\n  text: '',\n  size: 'small-plus',\n  textId: ''\n}\n\nexport const AvatarPlusX = ({ size, extraRecipients = [] }) => (\n  <div\n    className={cx(styles['recipient-avatar'], {\n      [styles['recipient-avatar--small']]: size === 'small'\n    })}\n    data-tip\n    data-for=\"extra-recipients-avatar\"\n  >\n    <span className={styles['recipient-avatar-plusx']}>\n      +{Math.min(extraRecipients.length, 99)}\n    </span>\n    <SharingTooltip id=\"extra-recipients-avatar\">\n      <TooltipRecipientList recipientNames={extraRecipients} />\n    </SharingTooltip>\n  </div>\n)\n\nAvatarPlusX.propTypes = {\n  extraRecipients: PropTypes.arrayOf(PropTypes.string),\n  size: PropTypes.string\n}\n\nAvatarPlusX.defaultProps = {\n  extraRecipients: [],\n  size: 'medium'\n}\n\nexport const AvatarLink = ({ size = 'medium' }) => (\n  <div\n    className={cx(styles['recipient-avatar'], {\n      [styles['recipient-avatar--small']]: size === 'small'\n    })}\n  >\n    <span className={styles['recipient-avatar-link']} />\n  </div>\n)\n","/* (ignored) */","import React from 'react'\nimport { connect } from 'react-redux'\n\nconst SHOW_MODAL = 'SHOW_MODAL'\nconst HIDE_MODAL = 'HIDE_MODAL'\n\nconst reducer = (state = { show: false, component: null }, action) => {\n  switch (action.type) {\n    case SHOW_MODAL:\n      return { show: true, component: action.component }\n    case HIDE_MODAL:\n      return { show: false, component: null }\n    default:\n      return state\n  }\n}\n\nexport default reducer\n\nexport const showModal = component => ({\n  type: SHOW_MODAL,\n  component,\n  meta: {\n    hideActionMenu: true\n  }\n})\n\nconst hideModal = (meta = {}) => ({\n  type: HIDE_MODAL,\n  meta\n})\n\nexport const ModalManager = connect(state => ({\n  ...state.ui.modal\n}))(({ show, component, dispatch }) => {\n  if (!show) return null\n  return React.cloneElement(component, {\n    onClose: meta => dispatch(hideModal(meta))\n  })\n})\n","import React from 'react'\nimport { Query } from 'cozy-client'\nimport Timeline from './components/Timeline'\nimport PhotoBoard from '../../components/PhotoBoard'\nimport {\n  formatDMY,\n  formatD,\n  formatH,\n  formatYMD,\n  isSameDay,\n  isSameMonth,\n  isSameHour,\n  isEqualOrOlder,\n  isEqualOrNewer\n} from './dates'\nimport { translate } from 'cozy-ui/react/I18n'\n// constants\nconst TIMELINE = 'timeline'\nconst FILES_DOCTYPE = 'io.cozy.files'\n\nconst TIMELINE_QUERY = client =>\n  client\n    .find(FILES_DOCTYPE)\n    .where({\n      class: 'image',\n      trashed: false\n    })\n    .select(['dir_id', 'name', 'size', 'updated_at', 'metadata'])\n    .sortBy({\n      'metadata.datetime': 'desc'\n    })\n    .include(['albums'])\n\nconst TIMELINE_MUTATIONS = client => ({\n  uploadPhoto: async (file, dirId) => {\n    return client.mutate({\n      mutationType: 'UPLOAD_PHOTO',\n      execute: async () => {\n        if (window.chrome) {\n          const { data: diskUsage } = await client\n            .getStackClient()\n            .fetchJSON('GET', '/settings/disk-usage')\n          if (diskUsage.attributes.quota) {\n            if (\n              parseInt(diskUsage.attributes.used) + parseInt(file.size) >\n              parseInt(diskUsage.attributes.quota)\n            ) {\n              const error = new Error('Payload Too Large')\n              error.status = 413\n              throw error\n            }\n          }\n        }\n        return client.collection('io.cozy.files').createFile(file, { dirId })\n      }\n    })\n  },\n  deletePhoto: photo => client.destroy(photo)\n})\n\n/**\n *  Create the title for the section, following these rules:\n *  - If the period is within same month: D - D M Y\n *  - Else: D M Y - D M Y\n *  - Exception: don't show the year if it is the current one.\n */\nconst getSectionTitle = (album, f) => {\n  if (album.period) {\n    const startPeriod = album.period.start\n    const endPeriod = album.period.end\n\n    if (!isSameMonth(f, endPeriod, startPeriod)) {\n      return formatDMY(f, startPeriod) + ' - ' + formatDMY(f, endPeriod)\n    }\n    if (!isSameDay(f, endPeriod, startPeriod)) {\n      return formatD(f, startPeriod) + '-' + formatDMY(f, endPeriod)\n    }\n    return formatDMY(f, startPeriod)\n  }\n  return formatDMY(f, album.name)\n}\n\n/**\n * Add the hours to the section's title if other sections are the same day.\n * The rules are the following:\n *  - If the album's period is within the same hour:  HH\n *  - Else: HH-HH\n */\nconst getSectionTitleHours = (dates, index, section, f) => {\n  if (section.album) {\n    if (\n      (index > 0 && isSameDay(f, dates[index - 1], dates[index])) ||\n      (index < dates.length - 1 && isSameDay(f, dates[index], dates[index + 1]))\n    ) {\n      // Several sections for this day: add the hours\n      const startPeriod = section.album.period.start\n      const endPeriod = section.album.period.end\n\n      let titleWithHours = section.title + ' · ' + formatH(f, startPeriod) + 'h'\n      if (!isSameHour(f, endPeriod, startPeriod)) {\n        titleWithHours += '-' + formatH(f, endPeriod) + 'h'\n      }\n      return titleWithHours\n    }\n  }\n  return section.title\n}\n\n/**\n * A section matches if a not-clustered photo's datetime:\n * - Is inside its period, or the same day\n */\nconst getMatchingSection = (sections, datetime, f) => {\n  return Object.keys(sections).find(date => {\n    if (sections[date].album) {\n      const startPeriod = sections[date].album.period.start\n      const endPeriod = sections[date].album.period.end\n      const isInsidePeriod =\n        isEqualOrNewer(datetime, startPeriod) &&\n        isEqualOrOlder(datetime, endPeriod)\n      return isInsidePeriod || isSameDay(f, datetime, endPeriod)\n    } else {\n      // If the section has no album, it is not a cluster but a daily section\n      return isSameDay(f, datetime, date)\n    }\n  })\n}\n\n/**\n * Retrieve photos by clusters. Each clusterized photo is referenced by an album\n * having an 'auto' field to true.\n * If a photo is not clusterized yet (newly updated ones), we try to insert them\n * inside existing clusters, or group them per day otherwise.\n */\nconst getPhotosByClusters = (photos, f) => {\n  const sections = {}\n  const photosNotClustered = []\n  photos.forEach(p => {\n    const refAlbums = p.albums ? p.albums.data : []\n    // A photo can be referenced by only one auto album\n    const album = refAlbums.find(ref => ref.auto)\n\n    // The photo is not referenced by an auto album yet\n    if (!album) {\n      photosNotClustered.push(p)\n    } else {\n      const date = album.name\n\n      if (!sections.hasOwnProperty(date)) {\n        const title = getSectionTitle(album, f)\n        sections[date] = {\n          photos: [],\n          title: title,\n          album: album\n        }\n      }\n      sections[date].photos.push(p)\n    }\n  })\n  // We deal with the not-clustered photos after the loop to make sure all\n  // the sections have been processed.\n  // It simulates a clustering, waiting for the actual one to be processed.\n  photosNotClustered.forEach(photo => {\n    const datetime =\n      photo.metadata && photo.metadata.datetime\n        ? photo.metadata.datetime\n        : photo.created_at\n\n    const sectionDate = getMatchingSection(sections, datetime, f)\n    if (sectionDate) {\n      sections[sectionDate].photos.push(photo)\n    } else {\n      // Create a new section for this day, without a period, to differentiate from clusters' sections\n      const day = formatYMD(f, datetime) // Match the albums's format\n      sections[day] = {\n        title: formatDMY(f, datetime),\n        photos: [photo]\n      }\n    }\n  })\n\n  const sortedDates = Object.keys(sections)\n  sortedDates.sort((a, b) => new Date(b).getTime() - new Date(a).getTime())\n  return sortedDates.map((date, i) => {\n    return {\n      title: getSectionTitleHours(sortedDates, i, sections[date], f),\n      photos: sections[date].photos\n    }\n  })\n}\n\n// eslint-disable-next-line\nexport default translate()(props => (\n  <Query query={TIMELINE_QUERY} as={TIMELINE} mutations={TIMELINE_MUTATIONS}>\n    {({ data, ...result }, mutations) => (\n      <Timeline\n        lists={data ? getPhotosByClusters(data, props.f) : []}\n        data={data}\n        {...mutations}\n        {...result}\n        {...props}\n      />\n    )}\n  </Query>\n))\n\n/**\n *\n * This component is used by the Picker, when we create an album\n * We have to deal with selection for instance\n */\nexport const TimelineBoard = translate()(({ selection, ...props }) => (\n  <Query query={TIMELINE_QUERY}>\n    {({ data, ...result }) => (\n      <PhotoBoard\n        lists={data ? getPhotosByClusters(data, props.f) : []}\n        photosContext=\"timeline\"\n        onPhotoToggle={selection.toggle}\n        onPhotosSelect={selection.select}\n        onPhotosUnselect={selection.unselect}\n        {...result}\n        {...props}\n      />\n    )}\n  </Query>\n))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"u-shake\":\"u-shake--301R8\",\"shake\":\"shake--Hx9aG\",\"u-o-100\":\"u-o-100--1l6_J\",\"u-o-90\":\"u-o-90--Vl2PX\",\"u-o-80\":\"u-o-80--1iZh6\",\"u-o-70\":\"u-o-70--1Orn8\",\"u-o-60\":\"u-o-60--29A2S\",\"u-o-50\":\"u-o-50--1vWRz\",\"u-o-40\":\"u-o-40--23WHb\",\"u-o-30\":\"u-o-30--C42_r\",\"u-o-20\":\"u-o-20--Wp1zJ\",\"u-o-10\":\"u-o-10--1yTAG\",\"u-o-05\":\"u-o-05--1IKgP\",\"u-o-025\":\"u-o-025--2gpCh\",\"u-o-0\":\"u-o-0--2YnvF\",\"fil-confirm-text\":\"fil-confirm-text--3OV-5\",\"icon-trash\":\"icon-trash--2L617\",\"icon-restore\":\"icon-restore--qTvX6\",\"icon-shared\":\"icon-shared--2ytpg\",\"icon-related\":\"icon-related--3HRWq\",\"icon-eye\":\"icon-eye--2EIWz\",\"icon-link\":\"icon-link--2hb-A\",\"icon-forbidden\":\"icon-forbidden--23UiV\",\"spin\":\"spin--3SvvM\"};","import { Component } from 'react'\n\nclass ContactsAndGroupsDataLoader extends Component {\n  shouldComponentUpdate(nextProps) {\n    return (\n      nextProps.contacts.hasMore !== this.props.contacts.hasMore ||\n      nextProps.contacts.fetchStatus !== this.props.contacts.fetchStatus ||\n      nextProps.contacts.data.length !== this.props.contacts.data.length ||\n      nextProps.groups.hasMore !== this.props.groups.hasMore ||\n      nextProps.groups.fetchStatus !== this.props.groups.fetchStatus ||\n      nextProps.groups.data.length !== this.props.groups.data.length\n    )\n  }\n\n  componentDidUpdate() {\n    if (this.props.contacts.hasMore) {\n      this.props.contacts.fetchMore()\n    }\n\n    if (this.props.groups.hasMore) {\n      this.props.groups.fetchMore()\n    }\n  }\n\n  render() {\n    return this.props.children\n  }\n}\n\nexport default ContactsAndGroupsDataLoader\n","/* (ignored) */","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fil-actionmenu-inner\":\"fil-actionmenu-inner--3JhFX\",\"fil-actionmenu-recipients\":\"fil-actionmenu-recipients--28pEX\",\"fil-action\":\"fil-action--3huaS\",\"fil-actionmenu-overlay\":\"fil-actionmenu-overlay--1o4R9\",\"fil-mobileactionmenu\":\"fil-mobileactionmenu--2J9Kc\",\"fil-mobileactionmenu-header\":\"fil-mobileactionmenu-header--j3KI4\",\"fil-mobileactionmenu-file-name\":\"fil-mobileactionmenu-file-name--3VXSo\",\"fil-mobileactionmenu-file-ext\":\"fil-mobileactionmenu-file-ext--2sio1\",\"fil-mobileactionmenu-category\":\"fil-mobileactionmenu-category--34XX7\",\"fil-action-phone-download\":\"fil-action-phone-download--3zG6S\",\"fil-action-openWith\":\"fil-action-openWith--NJ1ah\",\"fil-action-download\":\"fil-action-download--378G6\",\"fil-action-destroy\":\"fil-action-destroy--1FAXj\",\"fil-action-trash\":\"fil-action-trash--268pI\",\"fil-action-restore\":\"fil-action-restore--36vfQ\",\"fil-action-rename\":\"fil-action-rename--1hqjC\",\"fil-action-share\":\"fil-action-share--1BpnI\",\"fil-action-moveto\":\"fil-action-moveto--o2Fw2\",\"fil-action-qualify\":\"fil-action-qualify--2C734\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"u-shake\":\"u-shake--2w9Ah\",\"shake\":\"shake--3lQxc\",\"u-o-100\":\"u-o-100--fIdgC\",\"u-o-90\":\"u-o-90--1n38D\",\"u-o-80\":\"u-o-80--y360z\",\"u-o-70\":\"u-o-70--35vTa\",\"u-o-60\":\"u-o-60--s4-Cn\",\"u-o-50\":\"u-o-50--3MPnn\",\"u-o-40\":\"u-o-40--1PWFb\",\"u-o-30\":\"u-o-30--1pEPX\",\"u-o-20\":\"u-o-20--3PArr\",\"u-o-10\":\"u-o-10--3F8WR\",\"u-o-05\":\"u-o-05--_JIuM\",\"u-o-025\":\"u-o-025--o8h8s\",\"u-o-0\":\"u-o-0--3KlCg\",\"shared-status\":\"shared-status--2MD96\",\"shared-status-label\":\"shared-status-label--3Pk0H\",\"spin\":\"spin--3YGV1\"};","/* (ignored) */","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-eye-16_32a783455d403df2cdd48aa32afb9d27\",\n  \"use\": \"icon-eye-16_32a783455d403df2cdd48aa32afb9d27-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol viewBox=\\\"0 0 16 16\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" id=\\\"icon-eye-16_32a783455d403df2cdd48aa32afb9d27\\\">\\n    <defs>\\n        <path d=\\\"M0,8 C0,8 2,2 8,2 C14,2 16,8 16,8 C16,8 14,14 8,14 C2,14 0,8 0,8 Z M8,12 C10.2091391,12 12,10.2091391 12,8 C12,5.79086089 10.2091391,4 8,4 C5.79086089,4 4,5.79086089 4,8 C4,10.2091391 5.79086089,12 8,12 Z M8,10 C6.89543045,10 6,9.10456955 6,8 C6,6.89543045 6.89543045,6 8,6 C9.10456955,6 10,6.89543045 10,8 C10,9.10456955 9.10456955,10 8,10 Z\\\" id=\\\"icon-eye-16_32a783455d403df2cdd48aa32afb9d27_path-1\\\" />\\n    </defs>\\n    <g id=\\\"icon-eye-16_32a783455d403df2cdd48aa32afb9d27_icons/16/eye\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n        <mask id=\\\"icon-eye-16_32a783455d403df2cdd48aa32afb9d27_mask-2\\\" fill=\\\"white\\\">\\n            <use xlink:href=\\\"#icon-eye-16_32a783455d403df2cdd48aa32afb9d27_path-1\\\" />\\n        </mask>\\n        <use id=\\\"icon-eye-16_32a783455d403df2cdd48aa32afb9d27_Mask\\\" fill=\\\"#95999d\\\" fill-opacity=\\\"0.5\\\" xlink:href=\\\"#icon-eye-16_32a783455d403df2cdd48aa32afb9d27_path-1\\\" />\\n    </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","export { default as ImageLoader } from './ImageLoader'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"u-shake\":\"u-shake--jsFDP\",\"shake\":\"shake--3-Vkv\",\"u-o-100\":\"u-o-100--3NgxQ\",\"u-o-90\":\"u-o-90--1HDpO\",\"u-o-80\":\"u-o-80--1I9nb\",\"u-o-70\":\"u-o-70--3QV-j\",\"u-o-60\":\"u-o-60--1QLxy\",\"u-o-50\":\"u-o-50--jArI6\",\"u-o-40\":\"u-o-40--3Q8vH\",\"u-o-30\":\"u-o-30--3LyB0\",\"u-o-20\":\"u-o-20--3Aqqq\",\"u-o-10\":\"u-o-10--3v5K_\",\"u-o-05\":\"u-o-05--2aGws\",\"u-o-025\":\"u-o-025--2bvm8\",\"u-o-0\":\"u-o-0--h266O\",\"spin\":\"spin--2CdRK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pho-loading\":\"pho-loading--2vILC\",\"pho-empty\":\"pho-empty--2ISCA\"};","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nconst confirm = (component, saga) => {\n  const wrapper = document.body.appendChild(document.createElement('div'))\n\n  const abort = () => {\n    ReactDOM.unmountComponentAtNode(wrapper)\n  }\n\n  const confirm = () => {\n    saga().then(() => {\n      ReactDOM.unmountComponentAtNode(wrapper)\n    })\n  }\n\n  ReactDOM.render(React.cloneElement(component, { confirm, abort }), wrapper)\n}\n\nexport default confirm\n","export default {}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pho-album-list\":\"pho-album-list--3W0t6\",\"pho-album-list--thumbnails\":\"pho-album-list--thumbnails--3FASv\",\"pho-album\":\"pho-album--nBuXk\",\"pho-album-link\":\"pho-album-link--1J30Z\",\"pho-album-photo-item\":\"pho-album-photo-item--18xZx\",\"pho-album-title\":\"pho-album-title--1N0Rf\",\"pho-album-description\":\"pho-album-description--3z6S7\",\"pho-album-shared\":\"pho-album-shared--2T6ed\",\"pho-album-list--selectable\":\"pho-album-list--selectable--1eSpV\",\"pho-album-link--disabled\":\"pho-album-link--disabled--309dC\"};","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\n\nimport styles from 'sharing/components/recipient.styl'\n\nconst Identity = ({ name, details }) => (\n  <div className={classNames(styles['recipient-idents'], 'u-ml-1')}>\n    <div className={styles['recipient-user']}>{name}</div>\n    <div className={styles['recipient-details']}>{details}</div>\n  </div>\n)\n\nIdentity.propTypes = {\n  name: PropTypes.string.isRequired,\n  details: PropTypes.string\n}\n\nIdentity.defaultProps = {\n  details: '-'\n}\n\nexport default Identity\n","/* global cozy */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport logger from 'lib/logger'\n\nimport Realtime from 'cozy-realtime'\nimport { withClient } from 'cozy-client'\n\nconst TTL = 10000\n\nconst PENDING = 'PENDING'\nconst LOADING_LINK = 'LOADING_LINK'\nconst LOADING_FALLBACK = 'LOADING_FALLBACK'\nconst LOADED = 'LOADED'\nconst FAILED = 'FAILED'\n\nclass ImageLoader extends React.Component {\n  state = {\n    status: PENDING,\n    src: null\n  }\n\n  _mounted = false\n\n  async componentDidMount() {\n    const { client } = this.props\n    this._mounted = true\n    this.loadNextSrc()\n    this.realtime = new Realtime({ client })\n    this.type = 'io.cozy.files.thumbnails'\n    this.realtime.subscribe('created', this.type, this.handleCreate)\n  }\n\n  /**\n   * Reload the link when realtime tell us that the\n   * thumbnail is created. By default size === small\n   */\n  handleCreate = doc => {\n    const { file, size } = this.props\n    if (file._id === doc._id && doc.format === size) {\n      this.loadLink()\n      this.unsubscribeRealtime()\n    }\n  }\n\n  componentWillUnmount() {\n    this._mounted = false\n    clearTimeout(this.timeout)\n    if (this.img) {\n      this.img.onload = this.img.onerror = null\n      this.img.src = ''\n    }\n    this.unsubscribeRealtime()\n  }\n\n  unsubscribeRealtime = () => {\n    this.realtime &&\n      this.realtime.unsubscribe('created', this.type, this.handleCreate)\n  }\n  getFileId(file) {\n    return file.id || file._id\n  }\n\n  loadNextSrc(lastError = null) {\n    const { status } = this.state\n    /**\n     * If we know that the navigator is offline, don't try to loadLink.\n     * */\n    if (status === PENDING && window.navigator.onLine) this.loadLink()\n    else if (status === LOADING_LINK) this.loadFallback()\n    else if (status === LOADING_FALLBACK || !window.navigator.onLine) {\n      logger.warn('failed loading thumbnail', lastError)\n      this.setState({ status: FAILED })\n      this.props.onError(lastError)\n    }\n  }\n\n  checkImageSource(src) {\n    const cleanImageLoader = () => {\n      clearTimeout(this.timeout)\n      this.img.onload = this.img.onerror = null\n      this.img.src = ''\n      this.img = null\n    }\n\n    return new Promise((resolve, reject) => {\n      this.img = new Image()\n      this.img.onload = resolve\n      this.img.onerror = reject\n      this.img.src = src\n      this.timeout = setTimeout(\n        () => reject(new Error('Loading image took too long')),\n        TTL\n      )\n    }).then(cleanImageLoader, cleanImageLoader)\n  }\n\n  async getFileLinks(file) {\n    if (file.links) return file.links\n    else {\n      const response = await cozy.client.files.statById(\n        this.getFileId(file),\n        false\n      )\n      if (!response.links) throw new Error('Could not fetch file links')\n      return response.links\n    }\n  }\n\n  async loadLink() {\n    this.setState({ status: LOADING_LINK })\n    const { file, size, client } = this.props\n\n    try {\n      const links = await this.getFileLinks(file, size)\n      const link = links[size]\n\n      if (!link) throw new Error(`${size} link is not available`)\n\n      const src = client.options.uri + link\n      await this.checkImageSource(src)\n      if (this._mounted) {\n        this.setState({\n          status: LOADED,\n          src\n        })\n      }\n    } catch (e) {\n      this.loadNextSrc(e)\n    }\n  }\n\n  async loadFallback() {\n    this.setState({ status: LOADING_FALLBACK })\n    const { file } = this.props\n\n    try {\n      const src = await this.getDownloadLink(this.getFileId(file))\n      await this.checkImageSource(src)\n      if (this._mounted) {\n        this.setState({\n          status: LOADED,\n          src\n        })\n      }\n    } catch (e) {\n      this.loadNextSrc(e)\n    }\n  }\n\n  getDownloadLink(fileId) {\n    return this.props.client\n      .collection('io.cozy.files')\n      .getDownloadLinkById(fileId)\n  }\n\n  render() {\n    const { src } = this.state\n    const { render, renderFallback } = this.props\n    //If the navigator is not onLine, let's render the fallback directly\n    if (src && window.navigator.onLine) return render(src)\n    else if (renderFallback) return renderFallback()\n    else return null\n  }\n}\n\nImageLoader.propTypes = {\n  file: PropTypes.object.isRequired,\n  render: PropTypes.func.isRequired,\n  size: PropTypes.oneOf(['small', 'medium', 'large']),\n  onError: PropTypes.func,\n  renderFallback: PropTypes.func,\n  client: PropTypes.object.isRequired\n}\n\nImageLoader.defaultProps = {\n  size: 'small',\n  onError: () => {}\n}\n\nexport default withClient(ImageLoader)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport flow from 'lodash/flow'\nimport { queryConnect, withClient } from 'cozy-client'\n\nimport { Contact, Group } from 'models'\nimport { contactsResponseType, groupsResponseType } from 'sharing/propTypes'\nimport SharingContext from 'sharing/context'\nimport ContactsAndGroupsDataLoader from 'sharing/components/ContactsAndGroupsDataLoader'\nimport { default as DumbShareModal } from 'sharing/components/ShareModal'\n\nconst EditableSharingModal = ({\n  client,\n  contacts,\n  document,\n  groups,\n  ...rest\n}) => {\n  return (\n    <ContactsAndGroupsDataLoader contacts={contacts} groups={groups}>\n      <SharingContext.Consumer>\n        {({\n          documentType,\n          isOwner,\n          getRecipients,\n          getSharingLink,\n          share,\n          revoke,\n          shareByLink,\n          revokeSharingLink,\n          hasSharedParent,\n          hasSharedChild\n        }) => (\n          <DumbShareModal\n            document={document}\n            documentType={documentType}\n            contacts={contacts}\n            createContact={contact => client.create(Contact.doctype, contact)}\n            groups={groups}\n            recipients={getRecipients(document.id)}\n            link={getSharingLink(document.id)}\n            isOwner={isOwner(document.id)}\n            hasSharedParent={hasSharedParent(document)}\n            hasSharedChild={hasSharedChild(document)}\n            onShare={share}\n            onRevoke={revoke}\n            onShareByLink={shareByLink}\n            onRevokeLink={revokeSharingLink}\n            {...rest}\n          />\n        )}\n      </SharingContext.Consumer>\n    </ContactsAndGroupsDataLoader>\n  )\n}\n\nEditableSharingModal.propTypes = {\n  client: PropTypes.object.isRequired,\n  document: PropTypes.object,\n  contacts: contactsResponseType.isRequired,\n  groups: groupsResponseType.isRequired\n}\n\nconst contactsQuery = client =>\n  client\n    .all(Contact.doctype)\n    .where({\n      _id: {\n        $gt: null\n      },\n      trashed: {\n        $or: [{ $eq: false }, { $exists: false }]\n      },\n      $or: [\n        {\n          cozy: {\n            $not: {\n              $size: 0\n            }\n          }\n        },\n        {\n          email: {\n            $not: {\n              $size: 0\n            }\n          }\n        }\n      ]\n    })\n    .indexFields(['_id'])\n\nconst groupsQuery = client => client.all(Group.doctype)\n\nexport default flow(\n  queryConnect({\n    contacts: {\n      query: contactsQuery,\n      as: 'contacts'\n    },\n    groups: {\n      query: groupsQuery,\n      as: 'groups'\n    }\n  }),\n  withClient\n)(EditableSharingModal)\n","import { DOCTYPE_APPS, DOCTYPE_FILES } from 'drive/lib/doctypes'\n\nexport const REF_PHOTOS = `${DOCTYPE_APPS}/photos`\nexport const REF_UPLOAD = `${DOCTYPE_APPS}/photos/upload`\nexport const REF_BACKUP = `${DOCTYPE_APPS}/photos/mobile`\n\nexport const getReferencedFolders = async (client, reference) => {\n  const { included } = await client.collection(DOCTYPE_FILES).findReferencedBy({\n    _type: DOCTYPE_APPS,\n    _id: reference\n  })\n  return included.filter(\n    folder => /^\\/\\.cozy_trash/.test(folder.attributes.path) === false\n  )\n}\n\nexport const getOrCreateFolderWithReference = async (\n  client,\n  path,\n  reference\n) => {\n  const existingFolders = await getReferencedFolders(client, reference)\n\n  if (existingFolders.length) {\n    return existingFolders[0]\n  } else {\n    const collection = client.collection(DOCTYPE_FILES)\n    const dirId = await collection.ensureDirectoryExists(path)\n    await collection.addReferencesTo(\n      {\n        _id: reference,\n        _type: DOCTYPE_APPS\n      },\n      [\n        {\n          _id: dirId\n        }\n      ]\n    )\n\n    const { data: dirInfos } = await collection.get(dirId)\n\n    return dirInfos\n  }\n}\n","import React, { Component } from 'react'\nimport justifiedLayout from 'justified-layout'\nimport classNames from 'classnames'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport styles from '../styles/photoList.styl'\nimport Photo from './Photo'\n\nconst photoDimensionsFallback = { width: 1, height: 1 }\n\n// Returns pseudo responsive row height based on container width. Trying to get\n// something between 190 and 240.\nconst adaptRowHeight = containerWidth => 180 + (containerWidth || 1800) / 30\n\n// Some photos use EXIF orientation tags, and their width/height are thus incorrect\n// if we don't take into account this orientation\nconst handlePhotoOrientation = metadata => {\n  if (metadata.orientation && metadata.orientation > 4) {\n    return { width: metadata.height, height: metadata.width }\n  }\n  return metadata\n}\n\nexport class PhotoList extends Component {\n  isPhotoSelected(photo, selected) {\n    const selectedIds = selected.map(p => p._id)\n    return selectedIds.indexOf(photo._id) !== -1\n  }\n\n  render() {\n    const {\n      t,\n      key,\n      title,\n      photos,\n      selected,\n      showSelection,\n      onPhotoToggle,\n      onPhotosSelect,\n      onPhotosUnselect,\n      containerWidth\n    } = this.props\n    // containerWidth = 0 on the first render, skip it\n    if (!containerWidth) {\n      return null\n    }\n    const confDesk = {\n      spacing: 16,\n      padding: 32\n    }\n    const confMob = {\n      spacing: 8,\n      padding: 0\n    }\n    let conf = containerWidth >= 768 ? confDesk : confMob\n    // @see https://flickr.github.io/justified-layout/\n    const layout = justifiedLayout(\n      photos.map(photo => {\n        const metadata = photo.metadata || photo.attributes.metadata\n        return metadata && metadata.width && metadata.height\n          ? handlePhotoOrientation(metadata)\n          : photoDimensionsFallback\n      }),\n      {\n        containerWidth,\n        targetRowHeight: adaptRowHeight(containerWidth),\n        // Must be relevant with styles\n        boxSpacing: {\n          horizontal: conf.spacing,\n          vertical: conf.spacing\n        },\n        containerPadding: {\n          top: 0,\n          right: conf.padding,\n          bottom: 0,\n          left: conf.padding\n        }\n      }\n    )\n\n    const selectedIds = selected.map(p => p._id)\n    const allSelected = photos.every(p => selectedIds.indexOf(p._id) !== -1)\n    // we need to process the right position of the last photo of the first row so that we can align\n    // the SELECT ALL button with the photo\n    const firstRowTop = layout.boxes[0].top\n    const secondRowFirstIndex = layout.boxes.findIndex(\n      b => b.top !== firstRowTop\n    )\n    const firstRowLastBox =\n      secondRowFirstIndex === -1\n        ? layout.boxes[layout.boxes.length - 1]\n        : layout.boxes[secondRowFirstIndex - 1]\n    const firstRowLastBoxRight =\n      containerWidth -\n      firstRowLastBox.left -\n      firstRowLastBox.width -\n      conf.padding\n\n    return (\n      <div\n        data-test-id=\"photo-section\"\n        className={classNames(\n          styles['pho-section'],\n          showSelection && styles['pho-section--has-selection']\n        )}\n        key={key}\n        style={{\n          width: `${containerWidth}px`\n        }}\n      >\n        <div className={styles['pho-section-header']}>\n          <h3>{title}</h3>\n          {showSelection &&\n            photos.length > 1 &&\n            allSelected && (\n              <a\n                style={{ marginRight: `${firstRowLastBoxRight}px` }}\n                onClick={() => onPhotosUnselect(photos)}\n              >\n                {t('Board.unselect_all')}\n              </a>\n            )}\n          {showSelection &&\n            photos.length > 1 &&\n            !allSelected && (\n              <a\n                style={{ marginRight: `${firstRowLastBoxRight}px` }}\n                onClick={() => onPhotosSelect(photos)}\n              >\n                {t('Board.select_all')}\n              </a>\n            )}\n        </div>\n        <div\n          className={styles['pho-photo-wrapper']}\n          // Specify the width & height for making justified layout work.\n          style={{\n            width: `${containerWidth}px`,\n            height: `${layout.containerHeight}px`\n          }}\n        >\n          {photos.map((photo, index) => (\n            <Photo\n              photo={photo}\n              box={layout.boxes[index]}\n              key={photo.id}\n              selected={this.isPhotoSelected(photo, selected)}\n              onToggle={onPhotoToggle}\n            />\n          ))}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default translate()(PhotoList)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coz-btn-client\":\"coz-btn-client--1LuMZ\",\"coz-banner-client\":\"coz-banner-client--xEL17\",\"coz-btn-clientMobile\":\"coz-btn-clientMobile--3n2yA\",\"coz-banner-text\":\"coz-banner-text--tBptv\",\"close-banner\":\"close-banner---KAV7\",\"spin\":\"spin--2_Zjm\",\"shake\":\"shake--1oABm\"};","import React from 'react'\nimport { combineReducers } from 'redux'\nimport logger from 'lib/logger'\n\nimport Alerter from 'cozy-ui/react/Alerter'\n\nimport UploadQueue from './UploadQueue'\nimport { showModal } from 'react-cozy-helpers'\nimport QuotaAlert from 'drive/web/modules/upload/QuotaAlert'\n\nexport { UploadQueue }\n\nconst SLUG = 'upload'\n\nexport const ADD_TO_UPLOAD_QUEUE = 'ADD_TO_UPLOAD_QUEUE'\nconst UPLOAD_FILE = 'UPLOAD_FILE'\nconst RECEIVE_UPLOAD_SUCCESS = 'RECEIVE_UPLOAD_SUCCESS'\nconst RECEIVE_UPLOAD_ERROR = 'RECEIVE_UPLOAD_ERROR'\nconst PURGE_UPLOAD_QUEUE = 'PURGE_UPLOAD_QUEUE'\n\n//!TODO mutualize in FileCollection\nconst PENDING = 'pending'\nconst LOADING = 'loading'\nconst LOADED = 'loaded'\nconst FAILED = 'failed'\nconst CONFLICT = 'conflict'\nconst QUOTA = 'quota'\n\nconst itemInitialState = file => ({\n  file,\n  status: PENDING\n})\n\nconst status = action => {\n  switch (action.type) {\n    case UPLOAD_FILE:\n      return LOADING\n    case RECEIVE_UPLOAD_SUCCESS:\n      return LOADED\n    case RECEIVE_UPLOAD_ERROR:\n      return action.status\n  }\n}\n\nconst item = (state, action) =>\n  Object.assign({}, state, { status: status(action) })\n\nconst queue = (state = [], action) => {\n  switch (action.type) {\n    case ADD_TO_UPLOAD_QUEUE:\n      return [...state, ...action.files.map(f => itemInitialState(f))]\n    case PURGE_UPLOAD_QUEUE:\n      return []\n    case UPLOAD_FILE:\n    case RECEIVE_UPLOAD_SUCCESS:\n    case RECEIVE_UPLOAD_ERROR:\n      return state.map(\n        i => (i.file.name !== action.file.name ? i : item(i, action))\n      )\n    default:\n      return state\n  }\n}\nexport default combineReducers({ queue })\n\nconst processNextFile = callback => async (dispatch, getState) => {\n  const item = getUploadQueue(getState()).find(i => i.status === PENDING)\n  if (!item) {\n    return dispatch(onQueueEmpty())\n  }\n  const file = item.file\n  try {\n    dispatch({ type: UPLOAD_FILE, file })\n    await callback(file)\n    dispatch({ type: RECEIVE_UPLOAD_SUCCESS, file })\n  } catch (error) {\n    logger.log(error)\n    const statusError = {\n      409: CONFLICT,\n      413: QUOTA\n    }\n    //Photo doesn't have a status QUOTA. So\n    //we just use FAILED as it seems to do the job\n    const status =\n      statusError[error.status] ||\n      /Failed to fetch$/.exec(error.toString()) ||\n      FAILED\n    dispatch({\n      type: RECEIVE_UPLOAD_ERROR,\n      file,\n      status: status === CONFLICT ? CONFLICT : FAILED\n    })\n    if (status === QUOTA) {\n      dispatch(showModal(<QuotaAlert t={() => {}} />))\n    }\n  }\n  dispatch(processNextFile(callback))\n}\n\nexport const addToUploadQueue = (files, callback) => async dispatch => {\n  dispatch({ type: ADD_TO_UPLOAD_QUEUE, files })\n  dispatch(processNextFile(callback))\n}\n\nexport const purgeUploadQueue = () => ({ type: PURGE_UPLOAD_QUEUE })\n\nexport const onQueueEmpty = () => (dispatch, getState) => {\n  const queue = getUploadQueue(getState())\n  const conflicts = getConflicts(queue)\n  const errors = getErrors(queue)\n  const loaded = getLoaded(queue)\n\n  if (!conflicts.length && !errors.length) {\n    Alerter.success('UploadQueue.alert.success', { smart_count: loaded.length })\n  } else if (conflicts.length && !errors.length) {\n    Alerter.info('UploadQueue.alert.success_conflicts', {\n      smart_count: loaded.length,\n      conflictNumber: conflicts.length\n    })\n  } else {\n    Alerter.error('UploadQueue.alert.errors')\n  }\n}\n\n// selectors\nconst filterByStatus = (queue, status) => queue.filter(f => f.status === status)\nconst getConflicts = queue => filterByStatus(queue, CONFLICT)\nconst getErrors = queue => filterByStatus(queue, FAILED)\nconst getLoaded = queue => filterByStatus(queue, LOADED)\n\nexport const getUploadQueue = state => state[SLUG].queue\nexport const getProcessed = state =>\n  getUploadQueue(state).filter(f => f.status !== PENDING)\nexport const getSuccessful = state => getLoaded(getUploadQueue(state))\n","import styles from '../../../styles/albumsList.styl'\nimport classNames from 'classnames'\n\nimport React, { Component } from 'react'\nimport { Link, withRouter } from 'react-router'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport { ImageLoader } from 'components/Image'\n\nconst AlbumItemLink = ({ router, album, image, title, desc }) => {\n  const parentPath = router.location.pathname\n  return (\n    <Link\n      to={`${parentPath}/${album._id}`}\n      className={styles['pho-album-link']}\n    >\n      {image}\n      {title}\n      {desc}\n    </Link>\n  )\n}\nconst LinkedAlbumItem = withRouter(AlbumItemLink)\n\nconst ClickableAlbumItem = ({\n  album,\n  image,\n  title,\n  desc,\n  onClick,\n  disabled\n}) => {\n  return disabled ? (\n    <div\n      className={classNames(\n        styles['pho-album-link'],\n        styles['pho-album-link--disabled']\n      )}\n    >\n      {image}\n      <div>\n        {title}\n        {desc}\n      </div>\n    </div>\n  ) : (\n    <div onClick={() => onClick(album)} className={styles['pho-album-link']}>\n      {image}\n      <div>\n        {title}\n        {desc}\n      </div>\n    </div>\n  )\n}\n\nconst AlbumItemDesc = translate()(\n  ({ t, photoCount, shared = {} /* thumbnail  */ }) => (\n    <h4 className={styles['pho-album-description']}>\n      {/* (shared.byMe || shared.withMe) && (\n        <SharedBadge\n          byMe={shared.byMe}\n          className={styles['pho-album-shared']}\n          small={thumbnail}\n        />\n      ) */}\n      {t('Albums.album_item_description', { smart_count: photoCount })}\n      {(shared.byMe || shared.withMe) &&\n        ` - ${t(\n          `Albums.album_item_shared_${\n            shared.sharingType === 'one-way' ? 'ro' : 'rw'\n          }`\n        )}`}\n    </h4>\n  )\n)\n\nexport default class AlbumItem extends Component {\n  render() {\n    const { t, album, shared = {}, onClick, thumbnail } = this.props\n    const disabled = shared.readOnly\n    const photos = album.photos.data\n    const coverPhoto = photos[0] || null\n    const image = !coverPhoto ? (\n      <div className={styles['pho-album-photo-item']} />\n    ) : (\n      <ImageLoader\n        file={coverPhoto}\n        size=\"small\"\n        render={src => (\n          <img\n            src={src}\n            className={styles['pho-album-photo-item']}\n            alt={`${album.name} album cover`}\n          />\n        )}\n      />\n    )\n\n    const desc = (\n      <AlbumItemDesc\n        t={t}\n        album={album}\n        shared={shared}\n        thumbnail={thumbnail}\n        photoCount={album.photos.count}\n      />\n    )\n\n    const title = <h2 className={styles['pho-album-title']}>{album.name}</h2>\n\n    return (\n      <div\n        data-test-id=\"pho-album\"\n        data-test-name={album.name}\n        className={styles['pho-album']}\n      >\n        {onClick ? (\n          <ClickableAlbumItem\n            album={album}\n            image={image}\n            title={title}\n            desc={desc}\n            onClick={onClick}\n            disabled={disabled}\n          />\n        ) : (\n          <LinkedAlbumItem\n            album={album}\n            image={image}\n            title={title}\n            desc={desc}\n          />\n        )}\n      </div>\n    )\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"shared-tooltip\":\"shared-tooltip--RvIBh\",\"shared-tooltip-list\":\"shared-tooltip-list--VnQfr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pho-panel-form\":\"pho-panel-form--1S6en\",\"coz-form\":\"coz-form--cCo_s\",\"coz-form-group\":\"coz-form-group--1I069\",\"coz-form-desc\":\"coz-form-desc--3FnDz\",\"coz-form-label\":\"coz-form-label--385WH\",\"coz-form-label--error\":\"coz-form-label--error--1Kr_k\",\"coz-form-errors\":\"coz-form-errors--1RCYk\",\"error\":\"error--3qEb3\",\"pho-panel\":\"pho-panel--vFzlq\",\"pho-panel-header\":\"pho-panel-header--2aCpb\",\"pho-panel-footer\":\"pho-panel-footer--2Ynjt\",\"pho-panel-controls\":\"pho-panel-controls--1UDSQ\",\"pho-panel-content\":\"pho-panel-content--2OXQJ\",\"pho-panel-wrap\":\"pho-panel-wrap--1OkG3\",\"spin\":\"spin--t2Bmx\",\"shake\":\"shake--2MjHG\"};","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-link_784d8d07b6c9bf8edf4207327b6add94\",\n  \"use\": \"icon-link_784d8d07b6c9bf8edf4207327b6add94-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol viewBox=\\\"0 0 16 16\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" id=\\\"icon-link_784d8d07b6c9bf8edf4207327b6add94\\\">\\n    <defs>\\n        <path d=\\\"M8.87940867,3.87953579 C8.48888438,4.27006009 7.8557194,4.27006009 7.46519511,3.87953579 C7.07467081,3.4890115 7.07467081,2.85584652 7.46519511,2.46532223 L9.05304103,0.877476309 C10.2226142,-0.292096843 12.1218341,-0.292252339 13.289659,0.875572597 L14.4691583,2.05507187 C15.6394269,3.22534048 15.6355011,5.12344332 14.4628542,6.29609024 L10.9986358,9.7603087 C9.4643126,11.2946319 6.92867661,11.3430173 5.46519511,9.87953579 C5.07467081,9.4890115 5.07467081,8.85584652 5.46519511,8.46532223 C5.8557194,8.07479794 6.48888438,8.07479794 6.87940867,8.46532223 C7.54950929,9.13542285 8.81932532,9.11119201 9.5844222,8.34609513 L13.0486407,4.88187668 C13.4415455,4.48897179 13.4428522,3.85719292 13.0549447,3.46928543 L11.8754455,2.28978616 C11.488721,1.90306165 10.855831,1.90311347 10.4672546,2.29168987 L8.87940867,3.87953579 Z M6.46519511,11.4653222 C6.8557194,11.0747979 7.48888438,11.0747979 7.87940867,11.4653222 C8.26993296,11.8558465 8.26993296,12.4890115 7.87940867,12.8795358 L6.29156275,14.4673817 C5.12198959,15.6369549 3.22276968,15.6371104 2.05494474,14.4692854 L0.875445471,13.2897862 C-0.294823143,12.1195175 -0.290897366,10.2214147 0.881749556,9.04876778 L4.34596801,5.58454933 C5.88029117,4.05022616 8.41592716,4.00184073 9.87940867,5.46532223 C10.269933,5.85584652 10.269933,6.4890115 9.87940867,6.87953579 C9.48888438,7.27006009 8.8557194,7.27006009 8.46519511,6.87953579 C7.79509448,6.20943517 6.52527845,6.23366601 5.76018157,6.99876289 L2.29596312,10.4629813 C1.90305823,10.8558862 1.90175154,11.4876651 2.28965903,11.8755726 L3.4691583,13.0550719 C3.85588281,13.4417964 4.48877278,13.4417446 4.87734918,13.0531682 L6.46519511,11.4653222 Z\\\" id=\\\"icon-link_784d8d07b6c9bf8edf4207327b6add94_path-1\\\" />\\n    </defs>\\n    <g id=\\\"icon-link_784d8d07b6c9bf8edf4207327b6add94_🍦-icons\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill-rule=\\\"evenodd\\\">\\n        <g id=\\\"icon-link_784d8d07b6c9bf8edf4207327b6add94_icons/16/link\\\">\\n            <mask id=\\\"icon-link_784d8d07b6c9bf8edf4207327b6add94_mask-2\\\">\\n                <use xlink:href=\\\"#icon-link_784d8d07b6c9bf8edf4207327b6add94_path-1\\\" />\\n            </mask>\\n            <use id=\\\"icon-link_784d8d07b6c9bf8edf4207327b6add94_Mask\\\" fill-rule=\\\"nonzero\\\" xlink:href=\\\"#icon-link_784d8d07b6c9bf8edf4207327b6add94_path-1\\\" />\\n        </g>\\n    </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactTooltip from 'react-tooltip'\nimport styles from './tooltip.styl'\n\nexport const SharingTooltip = props => (\n  <ReactTooltip\n    place=\"bottom\"\n    effect=\"solid\"\n    className={styles['shared-tooltip']}\n    {...props}\n  >\n    {props.children}\n  </ReactTooltip>\n)\n// accepts all the props from https://github.com/wwayne/react-tooltip#options\n\nexport class TooltipRecipientList extends React.Component {\n  static contextTypes = {\n    t: PropTypes.func.isRequired\n  }\n  render() {\n    const { t } = this.context\n    const { recipientNames, cutoff = 4 } = this.props\n\n    return (\n      <ul className={styles['shared-tooltip-list']}>\n        {recipientNames.slice(0, cutoff).map(name => (\n          <li key={`key_name_${name}`}>{name}</li>\n        ))}\n        {recipientNames.length > cutoff && (\n          <li>\n            {t('Share.members.others', {\n              smart_count: recipientNames.slice(cutoff).length\n            })}\n          </li>\n        )}\n      </ul>\n    )\n  }\n}\n\nTooltipRecipientList.propTypes = {\n  recipientNames: PropTypes.arrayOf(PropTypes.string),\n  cutoff: PropTypes.number\n}\nTooltipRecipientList.defaultProps = {\n  recipientNames: [],\n  cutoff: 4\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coz-modal-section\":\"coz-modal-section--1g5-9\",\"coz-create-album\":\"coz-create-album--1VWC2\",\"coz-select-album\":\"coz-select-album--20TzS\",\"spin\":\"spin--3Sc3l\",\"shake\":\"shake--1nSjp\"};","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-checkbox_9e41a33868f3dad7314de1b6a47b358f\",\n  \"use\": \"icon-checkbox_9e41a33868f3dad7314de1b6a47b358f-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 16 16\\\" id=\\\"icon-checkbox_9e41a33868f3dad7314de1b6a47b358f\\\">\\n  <path fill=\\\"#32363f\\\" fill-rule=\\\"evenodd\\\" d=\\\"M64,129.99406 C64,128.892771 64.8945138,128 65.9940603,128 L78.0059397,128 C79.1072288,128 80,128.894514 80,129.99406 L80,142.00594 C80,143.107229 79.1054862,144 78.0059397,144 L65.9940603,144 C64.8927712,144 64,143.105486 64,142.00594 L64,129.99406 Z M67.7071068,137.292893 C67.3165825,136.902369 66.6834175,136.902369 66.2928932,137.292893 C65.9023689,137.683418 65.9023689,138.316582 66.2928932,138.707107 L68.2928932,140.707107 C68.6834175,141.097631 69.3165825,141.097631 69.7071068,140.707107 L77.7071068,132.707107 C78.0976311,132.316582 78.0976311,131.683418 77.7071068,131.292893 C77.3165825,130.902369 76.6834175,130.902369 76.2928932,131.292893 L69,138.585786 L67.7071068,137.292893 Z\\\" transform=\\\"translate(-64 -128)\\\" />\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import styles from '../../../styles/addToAlbum.styl'\n\nimport React, { Component } from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport Modal, { ModalSection } from 'cozy-ui/react/Modal'\nimport classNames from 'classnames'\n\nimport CreateAlbumForm from './CreateAlbumForm'\nimport SelectAlbumsForm from './SelectAlbumsForm'\nimport Loading from '../../../components/Loading'\n\nclass AddToAlbumModal extends Component {\n  render() {\n    const {\n      t,\n      photos,\n      data,\n      fetchStatus,\n      createAlbum,\n      addPhotos,\n      onDismiss,\n      onSuccess = () => {}\n    } = this.props\n\n    const isFetchingAlbums =\n      fetchStatus === 'pending' || fetchStatus === 'loading'\n\n    return (\n      <Modal title={t('Albums.add_photos.title')} secondaryAction={onDismiss}>\n        <ModalSection className={styles['coz-modal-section']}>\n          <div className={classNames(styles['coz-create-album'])}>\n            <CreateAlbumForm\n              onSubmitNewAlbum={name =>\n                createAlbum(name, photos)\n                  .then(onDismiss)\n                  .then(onSuccess)\n              }\n            />\n          </div>\n          {isFetchingAlbums ? (\n            <Loading loadingType=\"albums_fetching\" />\n          ) : data && data.length > 0 ? (\n            <div className={classNames(styles['coz-select-album'])}>\n              <SelectAlbumsForm\n                albums={{ data, fetchStatus }}\n                onSubmitSelectedAlbum={album =>\n                  addPhotos(album, photos)\n                    .then(onDismiss)\n                    .then(onSuccess)\n                }\n              />\n            </div>\n          ) : null}\n        </ModalSection>\n      </Modal>\n    )\n  }\n}\n\nexport default translate()(AddToAlbumModal)\n","import PropTypes from 'prop-types'\n\nimport { Contact, Group } from 'models'\n\nexport const contactsResponseType = PropTypes.shape({\n  count: PropTypes.number,\n  data: PropTypes.arrayOf(Contact.propType),\n  definition: PropTypes.object,\n  fetchMore: PropTypes.func,\n  fetchStatus: PropTypes.string,\n  hasMore: PropTypes.bool,\n  id: PropTypes.string,\n  lastError: PropTypes.string,\n  lastFetch: PropTypes.number,\n  lastUpdate: PropTypes.number\n})\n\nexport const groupsResponseType = PropTypes.shape({\n  count: PropTypes.number,\n  data: PropTypes.arrayOf(Group.propType),\n  definition: PropTypes.object,\n  fetchMore: PropTypes.func,\n  fetchStatus: PropTypes.string,\n  hasMore: PropTypes.bool,\n  id: PropTypes.string,\n  lastError: PropTypes.string,\n  lastFetch: PropTypes.number,\n  lastUpdate: PropTypes.number\n})\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport Recipient from './Recipient'\nimport { SubTitle } from 'cozy-ui/react'\n\nclass WhoHasAccess extends PureComponent {\n  static contextTypes = {\n    t: PropTypes.func.isRequired\n  }\n  render() {\n    const {\n      isOwner = false,\n      recipients,\n      document,\n      documentType,\n      onRevoke,\n      className\n    } = this.props\n    const { t } = this.context\n\n    return (\n      <div className={className}>\n        {recipients.length > 1 && (\n          <SubTitle>\n            {t(`${documentType}.share.whoHasAccess.title`, {\n              smart_count: recipients.length\n            })}\n          </SubTitle>\n        )}\n        {recipients.map((recipient, index) => (\n          <Recipient\n            {...recipient}\n            key={`key_r_${index}`}\n            isOwner={isOwner}\n            document={document}\n            documentType={documentType}\n            onRevoke={onRevoke}\n          />\n        ))}\n      </div>\n    )\n  }\n}\n\nexport default WhoHasAccess\n","import { useState, useEffect } from 'react'\n\nconst withInstance = client => {\n  const [instance, setInstance] = useState()\n  const [context, setContext] = useState()\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const instancePromise = client\n          .getStackClient()\n          .fetchJSON('GET', '/settings/instance')\n\n        const contextPromise = client\n          .getStackClient()\n          .fetchJSON('GET', '/settings/context')\n        const promises = [instancePromise, contextPromise]\n\n        const [instanceFetched, contextFetched] = await Promise.all(\n          promises.map(p => p.catch(e => e))\n        )\n        if (!(instanceFetched instanceof Error)) {\n          setInstance(instanceFetched)\n        }\n        if (!(contextFetched instanceof Error)) {\n          setContext(contextFetched)\n        }\n      } catch (e) {} //eslint-disable-line\n    }\n    fetchData()\n  }, [])\n\n  return {\n    instance,\n    context\n  }\n}\n\nexport default withInstance\n","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-pen-write-16_2d81809ca299a1197d20de636609807e\",\n  \"use\": \"icon-pen-write-16_2d81809ca299a1197d20de636609807e-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol viewBox=\\\"0 0 16 16\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" id=\\\"icon-pen-write-16_2d81809ca299a1197d20de636609807e\\\">\\n    <defs>\\n        <path d=\\\"M9.5,3.50347728 L12.5,6.50347728 L3.03771973,16.0034773 L0,16.0034773 L0,13.0288679 L9.5,3.50347728 Z M14.9121541,0.915631358 L15.0878459,1.0913232 C15.8637772,1.86725444 15.8697383,3.14159072 15.0922712,3.92874355 L14.0307617,5.00347728 L11,2.00347728 L12.0892639,0.914213423 C12.8691444,0.13433284 14.1322429,0.135720196 14.9121541,0.915631358 Z M7,14.0034773 L12.9970707,14.0034773 C13.5509732,14.0034773 14,14.4473421 14,15.0034773 C14,15.555762 13.5536886,16.0034773 13.0024554,16.0034773 L5,16.0034773 L7,14.0034773 Z\\\" id=\\\"icon-pen-write-16_2d81809ca299a1197d20de636609807e_path-1\\\" />\\n    </defs>\\n    <g id=\\\"icon-pen-write-16_2d81809ca299a1197d20de636609807e_icons/16/pen-write\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n        <mask id=\\\"icon-pen-write-16_2d81809ca299a1197d20de636609807e_mask-2\\\" fill=\\\"white\\\">\\n            <use xlink:href=\\\"#icon-pen-write-16_2d81809ca299a1197d20de636609807e_path-1\\\" />\\n        </mask>\\n        <use id=\\\"icon-pen-write-16_2d81809ca299a1197d20de636609807e_Mask\\\" fill=\\\"#95999d\\\" fill-opacity=\\\"0.5\\\" xlink:href=\\\"#icon-pen-write-16_2d81809ca299a1197d20de636609807e_path-1\\\" />\\n    </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","var map = {\n\t\"./ar\": \"5d0r\",\n\t\"./ar.json\": \"5d0r\",\n\t\"./ca\": \"vxeD\",\n\t\"./ca.json\": \"vxeD\",\n\t\"./cs\": \"FEFk\",\n\t\"./cs.json\": \"FEFk\",\n\t\"./cs_CZ\": \"r//i\",\n\t\"./cs_CZ.json\": \"r//i\",\n\t\"./da\": \"0NMG\",\n\t\"./da.json\": \"0NMG\",\n\t\"./de\": \"ACi5\",\n\t\"./de.json\": \"ACi5\",\n\t\"./de_DE\": \"6D2N\",\n\t\"./de_DE.json\": \"6D2N\",\n\t\"./el\": \"3M/O\",\n\t\"./el.json\": \"3M/O\",\n\t\"./en\": \"2OO4\",\n\t\"./en.json\": \"2OO4\",\n\t\"./eo\": \"orVX\",\n\t\"./eo.json\": \"orVX\",\n\t\"./es\": \"J1i+\",\n\t\"./es.json\": \"J1i+\",\n\t\"./es_CO\": \"hVxl\",\n\t\"./es_CO.json\": \"hVxl\",\n\t\"./es_ES\": \"4/b3\",\n\t\"./es_ES.json\": \"4/b3\",\n\t\"./fr\": \"K81t\",\n\t\"./fr.json\": \"K81t\",\n\t\"./it\": \"6mLT\",\n\t\"./it.json\": \"6mLT\",\n\t\"./ja\": \"G42y\",\n\t\"./ja.json\": \"G42y\",\n\t\"./ko\": \"avvP\",\n\t\"./ko.json\": \"avvP\",\n\t\"./nl\": \"46r7\",\n\t\"./nl.json\": \"46r7\",\n\t\"./nl_NL\": \"gF5+\",\n\t\"./nl_NL.json\": \"gF5+\",\n\t\"./pl\": \"FUd8\",\n\t\"./pl.json\": \"FUd8\",\n\t\"./pt\": \"WK4D\",\n\t\"./pt.json\": \"WK4D\",\n\t\"./pt_BR\": \"sPwX\",\n\t\"./pt_BR.json\": \"sPwX\",\n\t\"./ro\": \"npku\",\n\t\"./ro.json\": \"npku\",\n\t\"./ro_RO\": \"1rOY\",\n\t\"./ro_RO.json\": \"1rOY\",\n\t\"./ru\": \"4MjQ\",\n\t\"./ru.json\": \"4MjQ\",\n\t\"./ru_RU\": \"H4RB\",\n\t\"./ru_RU.json\": \"H4RB\",\n\t\"./sk\": \"WCSr\",\n\t\"./sk.json\": \"WCSr\",\n\t\"./sk_SK\": \"SY/9\",\n\t\"./sk_SK.json\": \"SY/9\",\n\t\"./sq\": \"7Kgf\",\n\t\"./sq.json\": \"7Kgf\",\n\t\"./sq_AL\": \"8Ctd\",\n\t\"./sq_AL.json\": \"8Ctd\",\n\t\"./sv\": \"0kzd\",\n\t\"./sv.json\": \"0kzd\",\n\t\"./tr\": \"qV7n\",\n\t\"./tr.json\": \"qV7n\",\n\t\"./uk_UA\": \"1xvC\",\n\t\"./uk_UA.json\": \"1xvC\",\n\t\"./zh\": \"+TPL\",\n\t\"./zh.json\": \"+TPL\",\n\t\"./zh_CN\": \"96Ws\",\n\t\"./zh_CN.json\": \"96Ws\",\n\t\"./zh_TW\": \"uqdO\",\n\t\"./zh_TW.json\": \"uqdO\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"Gofk\";","import React from 'react'\nimport { Route, Redirect } from 'react-router'\n\nimport Layout from './Layout'\nimport Timeline from '../ducks/timeline'\nimport { AlbumsView, AlbumPhotos, PhotosPicker } from '../ducks/albums'\nimport PhotosViewer from '../components/PhotosViewer'\n\nconst AppRoute = (\n  <Route component={Layout}>\n    <Route path=\"photos\" component={Timeline}>\n      <Route path=\":photoId\" component={PhotosViewer} />\n    </Route>\n    <Route path=\"albums\" component={AlbumsView}>\n      <Route path=\"new\" component={PhotosPicker} />\n      <Route path=\":albumId\" component={AlbumPhotos}>\n        <Route path=\"edit\" component={PhotosPicker} />\n        <Route path=\":photoId\" component={PhotosViewer} />\n      </Route>\n    </Route>\n    <Redirect from=\"/*\" to=\"photos\" />\n  </Route>\n)\n\nexport default AppRoute\n","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6\",\n  \"use\": \"icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol viewBox=\\\"0 0 16 16\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" id=\\\"icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6\\\">\\n    <defs>\\n        <path d=\\\"M3.00247329,2 C2.45576096,2 2,1.55228475 2,1 C2,0.443864822 2.44882258,0 3.00247329,0 L12.9975267,0 C13.544239,0 14,0.44771525 14,1 C14,1.55613518 13.5511774,2 12.9975267,2 L13,2 L13,3 C13,3.55613518 12.6840146,4.31598541 12.2942268,4.70577316 L9,8 L12.2942268,11.2942268 C12.6840146,11.6840146 13,12.4438648 13,13 L13,14 L12.9975267,14 C13.5511774,14 14,14.4438648 14,15 C14,15.5522847 13.544239,16 12.9975267,16 L3.00247329,16 C2.44882258,16 2,15.5561352 2,15 C2,14.4477153 2.45576096,14 3.00247329,14 L3,14 L3,13 C3,12.4477153 3.31277239,11.6872276 3.70577316,11.2942268 L7,8 L3.70577316,4.70577316 C3.31277239,4.31277239 3,3.55228475 3,3 L3,2 L3.00247329,2 Z M4.5,3 C4.5,3.55228475 4.83559471,4.28765261 5.25944787,4.65095532 L8,7 L10.7405521,4.65095532 C11.1599836,4.29144262 11.5,3.54681396 11.5,3 L4.5,3 Z\\\" id=\\\"icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6_path-1\\\" />\\n    </defs>\\n    <g id=\\\"icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6_🍦-icons\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n        <g id=\\\"icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6_icons/16/hourglass\\\">\\n            <mask id=\\\"icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6_mask-2\\\" fill=\\\"white\\\">\\n                <use xlink:href=\\\"#icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6_path-1\\\" />\\n            </mask>\\n            <use id=\\\"icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6_Mask\\\" fill=\\\"#95999d\\\" fill-opacity=\\\"0.5\\\" xlink:href=\\\"#icon-hourglass-16_4d32835335eff7a3974a2aa8cf422ff6_path-1\\\" />\\n        </g>\\n    </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import React, { Component } from 'react'\nimport styles from '../../../styles/layout.styl'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport AlbumsToolbar from './AlbumsToolbar'\nimport AlbumsList from './AlbumsList'\nimport Loading from '../../../components/Loading'\nimport ErrorComponent from 'components/Error/ErrorComponent'\nimport Topbar from '../../../components/Topbar'\n\nconst Content = ({ list }) => {\n  const { fetchStatus } = list\n  switch (fetchStatus) {\n    case 'pending':\n    case 'loading':\n      return <Loading loadingType=\"albums_fetching\" />\n    case 'failed':\n      return <ErrorComponent errorType=\"albums\" />\n    default:\n      return <AlbumsList {...list} />\n  }\n}\n\nclass AlbumsView extends Component {\n  render() {\n    const { t } = this.props\n    if (this.props.children) return this.props.children\n    if (!this.props.albums) {\n      return null\n    }\n    return (\n      <div\n        data-test-id=\"album-pho-content-wrapper\"\n        className={styles['pho-content-wrapper']}\n      >\n        <Topbar viewName=\"albums\">\n          <AlbumsToolbar t={t} />\n        </Topbar>\n        <Content list={this.props.albums} />\n      </div>\n    )\n  }\n}\n\nexport default translate()(AlbumsView)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"u-shake\":\"u-shake--1_JDP\",\"shake\":\"shake--Y2Op3\",\"u-o-100\":\"u-o-100--2d2Nz\",\"u-o-90\":\"u-o-90--31pSb\",\"u-o-80\":\"u-o-80--3Ihkd\",\"u-o-70\":\"u-o-70--YQ27F\",\"u-o-60\":\"u-o-60--nEE6D\",\"u-o-50\":\"u-o-50--3dLGa\",\"u-o-40\":\"u-o-40--imJPw\",\"u-o-30\":\"u-o-30--IxP_u\",\"u-o-20\":\"u-o-20--32XM7\",\"u-o-10\":\"u-o-10--1iaz5\",\"u-o-05\":\"u-o-05--atgef\",\"u-o-025\":\"u-o-025--3L2f7\",\"u-o-0\":\"u-o-0--1NtAo\",\"shared-badge\":\"shared-badge--2cmgU\",\"--small\":\"_--small--thdoQ\",\"shared-badge-icon\":\"shared-badge-icon--V-RtM\",\"--xsmall\":\"_--xsmall--3hL0z\",\"--by-me\":\"_--by-me--3gc-L\",\"--with-me\":\"_--with-me--32UlG\",\"spin\":\"spin--2woLM\"};","import React from 'react'\nimport PropTypes from 'prop-types'\nimport copy from 'copy-text-to-clipboard'\nimport Toggle from 'cozy-ui/react/Toggle'\nimport { Spinner, SubTitle } from 'cozy-ui/react'\nimport Alerter from 'cozy-ui/react/Alerter'\nimport cx from 'classnames'\nimport logger from 'lib/logger'\n\nimport styles from '../share.styl'\nimport palette from 'cozy-ui/react/palette'\n\nclass ShareByLink extends React.Component {\n  static contextTypes = {\n    t: PropTypes.func.isRequired\n  }\n\n  state = {\n    loading: false\n  }\n\n  toggleShareLink = checked => {\n    if (checked) {\n      this.createShareLink()\n    } else {\n      this.deleteShareLink()\n    }\n  }\n\n  copyLinkToClipboard = () => {\n    if (copy(this.props.link))\n      Alerter.success(`${this.props.documentType}.share.shareByLink.copied`)\n    else Alerter.error(`${this.props.documentType}.share.shareByLink.failed`)\n  }\n\n  async createShareLink() {\n    try {\n      this.setState(state => ({ ...state, loading: true }))\n      await this.props.onEnable(this.props.document)\n    } catch (e) {\n      Alerter.error(`${this.props.documentType}.share.error.generic`)\n      logger.log(e)\n    } finally {\n      this.setState(state => ({ ...state, loading: false }))\n    }\n  }\n\n  async deleteShareLink() {\n    try {\n      this.setState(state => ({ ...state, loading: true }))\n      await this.props.onDisable(this.props.document)\n    } catch (e) {\n      Alerter.error(`${this.props.documentType}.share.error.revoke`)\n      logger.log(e)\n    } finally {\n      this.setState(state => ({ ...state, loading: false }))\n    }\n  }\n\n  render() {\n    const t = this.context.t\n    const { loading } = this.state\n    const { checked, documentType } = this.props\n    return (\n      <div>\n        <div\n          data-test-id=\"share-by-link\"\n          className={cx(styles['share-bylink-header'], 'u-mt-1', 'u-mb-1')}\n        >\n          <SubTitle>{t(`${documentType}.share.shareByLink.subtitle`)}</SubTitle>\n          {loading && <Spinner color={palette.dodgerBlue} />}\n          {loading && (\n            <span className={styles['share-bylink-header-creating']}>\n              {t(`${documentType}.share.shareByLink.creating`)}\n            </span>\n          )}\n          {checked && <span className={styles['share-bylink-header-dot']} />}\n          {checked && (\n            <button\n              data-test-url={this.props.link}\n              className={styles['share-bylink-header-copybtn']}\n              onClick={this.copyLinkToClipboard}\n            >\n              {t(`${documentType}.share.shareByLink.copy`)}\n            </button>\n          )}\n          <Toggle\n            id=\"share-toggle\"\n            name=\"share\"\n            checked={checked}\n            disabled={loading}\n            onToggle={this.toggleShareLink}\n          />\n        </div>\n        <div className={styles['share-bylink-desc']}>\n          {t(`${documentType}.share.shareByLink.desc`)}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ShareByLink\n","/* global cozy */\nimport { getTracker } from 'cozy-ui/react/helpers/tracker'\n\nexport const track = element => {\n  const tracker = getTracker()\n  tracker &&\n    tracker.push(['trackEvent', 'interaction', 'desktop-prompt', element])\n}\n\nexport const isLinux = () =>\n  window.navigator &&\n  (window.navigator.appVersion.indexOf('Win') === -1 &&\n    window.navigator.appVersion.indexOf('Mac') === -1)\nexport const isAndroid = () =>\n  window.navigator.userAgent &&\n  window.navigator.userAgent.indexOf('Android') >= 0\nexport const isIOS = () =>\n  window.navigator.userAgent &&\n  /iPad|iPhone|iPod/.test(window.navigator.userAgent)\n\nexport const DESKTOP_BANNER = 'desktop_banner'\nexport const NOVIEWER_DESKTOP_CTA = 'noviewer_desktop_cta'\n\nexport const isClientAlreadyInstalled = async () => {\n  const resp = await cozy.client.fetchJSON('GET', '/settings/clients')\n  return resp.some(\n    device =>\n      device.attributes.software_id === 'github.com/cozy-labs/cozy-desktop'\n  )\n}\n","import styles from '../../../styles/albumsList.styl'\n\nimport React from 'react'\nimport classNames from 'classnames'\n\nimport { withError } from 'components/Error/ErrorComponent'\nimport { EmptyPhotos } from 'components/Error/Empty'\n\nimport AlbumItem from './AlbumItem'\n\nconst AlbumsList = props =>\n  props.albums.data.length === 0 ? (\n    <EmptyPhotos localeKey=\"albums\" />\n  ) : (\n    <div\n      className={classNames(\n        styles['pho-album-list'],\n        styles['pho-album-list--thumbnails'],\n        styles['pho-album-list--selectable']\n      )}\n    >\n      {props.albums.data.map(a => (\n        <AlbumItem\n          album={a}\n          key={a.id}\n          thumbnail\n          onServerError={props.onServerError}\n          onClick={props.onSubmitSelectedAlbum}\n        />\n      ))}\n    </div>\n  )\n\nconst DumbAlbumsView = props => (\n  <div>\n    <AlbumsList {...props} />\n  </div>\n)\n\nconst ErrorAlbumsView = withError(\n  props => props.error,\n  'albums',\n  DumbAlbumsView\n)\n\nexport const AlbumsView = props => {\n  if (!props.albums) {\n    return null\n  }\n  const error = props.albums.fetchStatus === 'failed'\n  return (\n    <ErrorAlbumsView\n      error={error}\n      onServerError={() => this.handleError(error)}\n      {...props}\n    />\n  )\n}\n\nexport default AlbumsView\n","/* global __TARGET__ */\n\nimport styles from '../styles/layout'\n\nimport React from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport { Layout as LayoutUI, Main } from 'cozy-ui/react/Layout'\nimport Sidebar from 'cozy-ui/react/Sidebar'\nimport Nav, { NavItem, NavIcon, NavText, genNavLink } from 'cozy-ui/react/Nav'\nimport { Link as RRNavLink } from 'react-router'\nimport ButtonClient from '../../components/pushClient/Button'\nimport BannerClient from '../../components/pushClient/Banner'\nimport Alerter from 'cozy-ui/react/Alerter'\nimport { UploadQueue } from '../ducks/upload'\nimport { IconSprite } from 'cozy-ui/transpiled/react'\nimport { ModalManager } from 'react-cozy-helpers'\n\nconst NavLink = genNavLink(RRNavLink)\n\nexport const Layout = ({ t, children }) => (\n  <LayoutUI>\n    <Sidebar className={styles['pho-sidebar']}>\n      <ModalManager />\n      <Nav>\n        <NavItem>\n          <NavLink to=\"/photos\">\n            <NavIcon icon=\"image\" />\n            <NavText>{t('Nav.photos')}</NavText>\n          </NavLink>\n        </NavItem>\n        <NavItem data-test-id=\"nav-to-albums\">\n          <NavLink to=\"/albums\">\n            <NavIcon icon=\"album\" />\n            <NavText>{t('Nav.albums')}</NavText>\n          </NavLink>\n        </NavItem>\n      </Nav>\n      <ButtonClient />\n    </Sidebar>\n\n    <Alerter t={t} />\n    <UploadQueue />\n    <Main className={styles['pho-content']}>\n      {__TARGET__ !== 'mobile' && <BannerClient />}\n      {children}\n    </Main>\n    <IconSprite />\n  </LayoutUI>\n)\n\nexport default translate()(Layout)\n","import React from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { Empty } from 'cozy-ui/react'\n\nimport DriveIcon from 'drive/assets/icons/icon-type-folder.svg'\nimport PhotosIcon from 'photos/assets/icons/icon-main-app.svg'\nimport TrashIcon from 'drive/assets/icons/icon-trash-big.svg'\n\nconst EmptyIcon = {\n  drive: DriveIcon,\n  photos: PhotosIcon,\n  trash: TrashIcon\n}\n\nconst EmptyCanvas = translate()(({ t, type, canUpload, localeKey }) => {\n  return (\n    <Empty\n      data-test-id=\"empty-folder\"\n      icon={EmptyIcon[type]}\n      title={localeKey ? t(`empty.${localeKey}_title`) : t('empty.title')}\n      text={\n        (localeKey && t(`empty.${localeKey}_text`)) ||\n        (canUpload && t('empty.text'))\n      }\n    />\n  )\n})\n\nexport default EmptyCanvas\n\nexport const EmptyDrive = props => <EmptyCanvas type=\"drive\" {...props} />\n\nexport const EmptyPhotos = props => <EmptyCanvas type=\"photos\" {...props} />\n\nexport const EmptyTrash = props => (\n  <EmptyCanvas type=\"trash\" localeKey=\"trash\" {...props} />\n)\n","import {\n  isThisYear,\n  differenceInCalendarMonths,\n  differenceInCalendarDays,\n  differenceInHours,\n  compareAsc\n} from 'date-fns'\n\n/**\n *  Format the date as specified by the formatter parameter.\n *  The extraction of year, day, etc is needed because the Date(string) constructor use the local timezone.\n *  Yet, the photos' dates are saved with the stack's locale (GMT+0 in production environment),\n *  because the timezone is mostly not specified in the EXIF metadata.\n *  So, to avoid a date offset in case the user timezone is not the stack's one, we use the Date(numbers) constructor instead.\n *  See https://github.com/date-fns/date-fns/issues/489 for more insights.\n * @param {function} f - date-fns format function\n * @param {string} date - date passed as string\n * @param {string} formatter - The wanted format. See https://date-fns.org/v1.30.1/docs/format\n * @returns {string} The formatted date\n */\nconst formatDate = (f, date, formatter) => {\n  const [year, month, day] = date.substr(0, 10).split('-')\n  const [hours, minutes, seconds] =\n    date.length > 10 ? date.substr(11, 8).split(':') : [0, 0, 0]\n  return f(new Date(year, month - 1, day, hours, minutes, seconds), formatter)\n}\n\nexport const formatH = (f, date) => {\n  return formatDate(f, date, 'HH')\n}\n\nexport const formatD = (f, date) => {\n  return formatDate(f, date, 'DD')\n}\n\nexport const formatDMY = (f, date) => {\n  return formatDate(f, date, 'DD MMMM') + addYear(f, date)\n}\n\nexport const formatYMD = (f, date) => {\n  return formatDate(f, date, 'YYYY-MM-DD')\n}\n\nconst addYear = (f, date) => {\n  return isThisYear(date) ? '' : formatDate(f, date, ' YYYY')\n}\n\nexport const isSameMonth = (f, newerDate, olderDate) => {\n  const newer = formatDate(f, newerDate)\n  const older = formatDate(f, olderDate)\n  return differenceInCalendarMonths(newer, older) === 0\n}\n\nexport const isSameDay = (f, newerDate, olderDate) => {\n  const newer = formatDate(f, newerDate)\n  const older = formatDate(f, olderDate)\n  return differenceInCalendarDays(newer, older) === 0\n}\n\nexport const isSameHour = (f, newerDate, olderDate) => {\n  const newer = formatDate(f, newerDate)\n  const older = formatDate(f, olderDate)\n  return differenceInHours(newer, older) === 0\n}\n\nexport const isEqualOrNewer = (newerDate, olderDate) => {\n  return compareAsc(newerDate, olderDate) >= 0\n}\n\nexport const isEqualOrOlder = (newerDate, olderDate) => {\n  return compareAsc(newerDate, olderDate) <= 0\n}\n","import React, { Component } from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport PropTypes from 'prop-types'\nimport styles from '../../../styles/layout.styl'\n\nimport { Content } from 'cozy-ui/react/Layout'\nimport Topbar from '../../../components/Topbar'\nimport Toolbar from './Toolbar'\nimport DeleteConfirm from './DeleteConfirm'\nimport confirm from '../../../lib/confirm'\nimport PhotoBoard from '../../../components/PhotoBoard'\n\nimport { addToUploadQueue } from '../../upload'\nimport { AddToAlbumModal, belongsToAlbums } from '../../albums'\nimport Selection from '../../selection'\n\nimport {\n  getReferencedFolders,\n  getOrCreateFolderWithReference,\n  REF_PHOTOS,\n  REF_UPLOAD\n} from 'folder-references'\n\nconst getUploadDir = async (client, t) => {\n  const referencedFolders = await getReferencedFolders(client, REF_UPLOAD)\n\n  if (referencedFolders.length > 0) {\n    return referencedFolders[0]._id\n  } else {\n    await getOrCreateFolderWithReference(\n      client,\n      `/${t('UploadQueue.path_photos')}`,\n      REF_PHOTOS\n    )\n    const uploadDir = await getOrCreateFolderWithReference(\n      client,\n      `/${t('UploadQueue.path_photos')}/${t('UploadQueue.path_upload')}`,\n      REF_UPLOAD\n    )\n\n    return uploadDir._id\n  }\n}\n\nclass Timeline extends Component {\n  state = {\n    showAddAlbumModal: false\n  }\n  static contextTypes = {\n    t: PropTypes.func.isRequired,\n    client: PropTypes.object.isRequired,\n    store: PropTypes.object.isRequired\n  }\n\n  showAddAlbumModal = () => {\n    this.setState(state => ({ ...state, showAddAlbumModal: true }))\n  }\n  hideAddAlbumModal = () => {\n    this.setState(state => ({ ...state, showAddAlbumModal: false }))\n  }\n\n  uploadPhotos = async photos => {\n    const { uploadPhoto } = this.props\n    const { client, t } = this.context\n    const uploadDirId = await getUploadDir(client, t)\n\n    this.dispatch(\n      addToUploadQueue(photos, photo => uploadPhoto(photo, uploadDirId))\n    )\n  }\n\n  downloadPhotos = photos => {\n    this.context.client\n      .collection('io.cozy.files')\n      .downloadArchive(photos.map(({ _id }) => _id), 'selected')\n  }\n\n  deletePhotos = (selected, clearSelection) =>\n    confirm(\n      <DeleteConfirm\n        t={this.context.t}\n        count={selected.length}\n        related={belongsToAlbums(selected)}\n      />,\n      () =>\n        Promise.all(selected.map(p => this.props.deletePhoto(p))).then(\n          clearSelection\n        )\n    )\n\n  dispatch(action) {\n    return this.context.store.dispatch(action)\n  }\n\n  render() {\n    const { t, lists, fetchStatus, hasMore, fetchMore } = this.props\n    return (\n      <Selection\n        actions={selection => ({\n          'album-add': this.showAddAlbumModal,\n          download: this.downloadPhotos,\n          delete: selected => this.deletePhotos(selected, selection.clear)\n        })}\n      >\n        {(selected, active, selection) => (\n          <div\n            data-test-id=\"timeline-pho-content-wrapper\"\n            className={styles['pho-content-wrapper']}\n          >\n            <Topbar viewName=\"photos\">\n              <Toolbar\n                disabled={active}\n                uploadPhotos={this.uploadPhotos}\n                selectItems={selection.show}\n                t={t}\n              />\n            </Topbar>\n            <Content>\n              {this.state.showAddAlbumModal && (\n                <AddToAlbumModal\n                  onDismiss={this.hideAddAlbumModal}\n                  onSuccess={selection.clear}\n                  photos={selected}\n                />\n              )}\n              <PhotoBoard\n                lists={lists}\n                selected={selected}\n                photosContext=\"timeline\"\n                showSelection={active}\n                onPhotoToggle={selection.toggle}\n                onPhotosSelect={selection.select}\n                onPhotosUnselect={selection.unselect}\n                fetchStatus={fetchStatus}\n                hasMore={hasMore}\n                fetchMore={fetchMore}\n              />\n            </Content>\n            {this.renderViewer(this.props.children)}\n          </div>\n        )}\n      </Selection>\n    )\n  }\n\n  renderViewer(children) {\n    if (!children) return null\n    return React.Children.map(children, child =>\n      React.cloneElement(child, {\n        photos: this.props.data || []\n      })\n    )\n  }\n}\n\nexport default translate()(Timeline)\n","import React, { Component } from 'react'\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport { Spinner, MenuItem, withBreakpoints, Icon } from 'cozy-ui/react'\n\nimport MenuAwareMobile from '../../components/Menu/Menuawaremobile'\nimport { AvatarPlusX, AvatarLink, Avatar } from './Avatar'\n\nimport styles from './recipient.styl'\n\nimport IconHourglass from '../assets/icons/icon-hourglass-16.svg'\nimport IconEye from '../assets/icons/icon-eye-16.svg'\nimport IconPen from '../assets/icons/icon-pen-write-16.svg'\nimport IconTrash from '../assets/icons/icon-trash-red.svg'\n\nimport { Contact } from 'models'\nimport Identity from 'sharing/components/Identity'\n\nconst MAX_DISPLAYED_RECIPIENTS = 3\nconst DEFAULT_DISPLAY_NAME = 'models.contact.defaultDisplayName'\n\nexport const RecipientsAvatars = ({\n  recipients,\n  link,\n  size = 'small-plus',\n  className,\n  onClick\n}) => {\n  // we reverse the recipients array because we use `flex-direction: row-reverse` to display them correctly\n  // we slice first to clone the original array because reverse() mutates it\n  const reversedRecipients = recipients.slice().reverse()\n  return (\n    <div\n      className={classNames(\n        styles['recipients-avatars'],\n        {\n          [styles['--interactive']]: onClick\n        },\n        className\n      )}\n      onClick={onClick}\n    >\n      {link && <AvatarLink size={size} />}\n      {recipients.length > MAX_DISPLAYED_RECIPIENTS && (\n        <AvatarPlusX\n          extraRecipients={reversedRecipients\n            .slice(MAX_DISPLAYED_RECIPIENTS)\n            .map(recipient => Contact.getDisplayName(recipient))}\n          size={size}\n        />\n      )}\n      {reversedRecipients\n        .slice(0, MAX_DISPLAYED_RECIPIENTS)\n        .map((recipient, idx) => (\n          <Avatar\n            key={idx}\n            text={Contact.getInitials(recipient)}\n            size={size}\n            textId={Contact.getDisplayName(recipient)}\n          />\n        ))}\n    </div>\n  )\n}\n\nexport const UserAvatar = ({ url, size, ...rest }) => (\n  <div className={styles['avatar']}>\n    <Avatar\n      text={Contact.getInitials(rest)}\n      size={size}\n      textId={Contact.getDisplayName(rest)}\n    />\n    <Identity name={Contact.getDisplayName(rest)} details={url} />\n  </div>\n)\n\nclass Status extends Component {\n  state = {\n    revoking: false\n  }\n\n  static contextTypes = {\n    t: PropTypes.func.isRequired,\n    client: PropTypes.object.isRequired\n  }\n\n  onRevoke = async () => {\n    const { onRevoke, document, sharingId, index } = this.props\n    this.setState({ revoking: true })\n    await onRevoke(document, sharingId, index)\n    this.setState({ revoking: false })\n  }\n\n  getStatusIcon = type => {\n    switch (type) {\n      case 'one-way':\n        return IconEye\n      case 'two-way':\n        return IconPen\n      default:\n        return IconHourglass\n    }\n  }\n\n  render() {\n    const { isOwner, status, instance, type, documentType, name } = this.props\n    const { t, client } = this.context\n    const { revoking } = this.state\n    const isMe =\n      instance !== undefined && instance === client.options.uri && !isOwner\n    const shouldShowMenu = !revoking && status !== 'owner' && (isMe || isOwner)\n    return (\n      <div className={classNames(styles['recipient-status'], 'u-ml-1')}>\n        {revoking && <Spinner />}\n        {!shouldShowMenu && (\n          <span className={styles['recipient-owner']}>\n            {t(`Share.status.${status}`)}\n          </span>\n        )}\n        {shouldShowMenu && (\n          <MenuAwareMobile\n            text={\n              status === 'ready' && type\n                ? t(`Share.type.${type}`)\n                : t(`Share.status.${status}`)\n            }\n            className={styles['recipient-menu']}\n            buttonClassName={styles['recipient-menu-btn']}\n            position={'right'}\n            popover\n            itemsStyle={{\n              maxWidth: '280px'\n            }}\n            name={name}\n          >\n            <MenuItem icon={<Icon icon={this.getStatusIcon(status)} />}>\n              {status === 'ready' && type\n                ? t(`Share.type.${type}`)\n                : t(`Share.status.${status}`)}\n            </MenuItem>\n\n            <hr />\n            <MenuItem\n              onSelect={this.onRevoke}\n              onClick={this.onRevoke}\n              icon={<Icon icon={IconTrash} />}\n            >\n              <div className={styles['action-unshare']}>\n                {isOwner\n                  ? t(`${documentType}.share.revoke.title`)\n                  : t(`${documentType}.share.revokeSelf.title`)}\n              </div>\n              <p className={styles['action-unshare-desc']}>\n                {isOwner\n                  ? t(`${documentType}.share.revoke.desc`)\n                  : t(`${documentType}.share.revokeSelf.desc`)}\n              </p>\n            </MenuItem>\n          </MenuAwareMobile>\n        )}\n      </div>\n    )\n  }\n}\n\nconst StatusWithBreakpoints = withBreakpoints()(Status)\n\nconst Recipient = (props, { client, t }) => {\n  const { instance, isOwner, status, ...rest } = props\n  const isMe =\n    (isOwner && status === 'owner') || instance === client.options.uri\n  const defaultDisplayName = t(DEFAULT_DISPLAY_NAME)\n  const defaultInitials = defaultDisplayName[0].toUpperCase()\n  const name = Contact.getDisplayName(rest, defaultDisplayName)\n  return (\n    <div className={classNames(styles['recipient'], 'u-mt-1')}>\n      <Avatar\n        text={Contact.getInitials(rest, defaultInitials)}\n        size={'small-plus'}\n        textId={name}\n      />\n      <div className={styles['recipient-ident-status']}>\n        <Identity\n          name={isMe ? t('Share.recipients.you') : name}\n          details={instance}\n        />\n        <StatusWithBreakpoints {...props} name={name} />\n      </div>\n    </div>\n  )\n}\n\nRecipient.contextTypes = {\n  client: PropTypes.object.isRequired,\n  t: PropTypes.func.isRequired\n}\n\nexport default Recipient\n\nexport const RecipientWithoutStatus = ({ instance, ...rest }) => {\n  const name = Contact.getDisplayName(rest)\n  return (\n    <div className={styles['recipient']}>\n      <Avatar\n        text={Contact.getInitials(rest)}\n        size={'small-plus'}\n        textId={name}\n      />\n      <div className={styles['recipient-ident-status']}>\n        <Identity name={name} details={instance} />\n      </div>\n    </div>\n  )\n}\n\nexport const RecipientPlusX = ({ extraRecipients }, { t }) => (\n  <div className={styles['recipient']}>\n    <AvatarPlusX\n      extraRecipients={extraRecipients.map(recipient =>\n        Contact.getDisplayName(recipient)\n      )}\n    />\n    <div className={styles['recipient-ident-status']}>\n      <Identity\n        name={t('Share.members.otherContacts', extraRecipients.length)}\n      />\n    </div>\n  </div>\n)\n\nRecipientPlusX.contextTypes = {\n  t: PropTypes.func.isRequired\n}\n","import { DOCTYPE_ALBUMS, DOCTYPE_FILES } from 'drive/lib/doctypes'\nimport { Contact } from 'cozy-doctypes'\n\nimport { QueryDefinition, HasMany } from 'cozy-client'\nclass HasManyAlbums extends HasMany {\n  get data() {\n    const refs = this.target.relationships.referenced_by.data\n    const albums = refs\n      ? refs.map(ref => this.get(ref.type, ref.id)).filter(Boolean)\n      : []\n    return albums\n  }\n\n  static query(doc, client, assoc) {\n    if (\n      !doc.relationships ||\n      !doc.relationships.referenced_by ||\n      !doc.relationships.referenced_by.data\n    ) {\n      return null\n    }\n    const included = doc.relationships.referenced_by.data\n    const ids = included\n      .filter(inc => inc.type === assoc.doctype)\n      .map(inc => inc.id)\n\n    return new QueryDefinition({ doctype: assoc.doctype, ids })\n  }\n}\n\nexport default {\n  albums: {\n    doctype: DOCTYPE_ALBUMS,\n    attributes: {\n      name: {\n        type: 'string'\n      }\n    },\n    relationships: {\n      photos: {\n        type: 'has-many',\n        doctype: DOCTYPE_FILES\n      }\n    }\n  },\n  files: {\n    doctype: DOCTYPE_FILES,\n    relationships: {\n      albums: {\n        type: HasManyAlbums,\n        doctype: DOCTYPE_ALBUMS\n      }\n    }\n  },\n  contacts: {\n    doctype: Contact.doctype\n  }\n}\n","/* global __APP_SLUG__ */\nimport minilog from 'minilog'\n\nconst logger = minilog(`cozy-${__APP_SLUG__}`)\nminilog.enable()\n\nminilog.suggest.allow(`cozy-${__APP_SLUG__}`, 'log')\nminilog.suggest.allow(`cozy-${__APP_SLUG__}`, 'info')\n\nexport default logger\n","export { CozyFile } from 'cozy-doctypes'\nexport { Group } from 'cozy-doctypes'\n\nexport { default as Contact } from 'models/Contact'\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { getTracker } from 'cozy-ui/react/helpers/tracker'\n\nimport reducer, {\n  receiveSharings,\n  addSharing,\n  updateSharing,\n  addSharingLink,\n  revokeSharingLink,\n  revokeRecipient,\n  revokeSelf,\n  receivePaths,\n  isOwner,\n  canReshare,\n  getOwner,\n  getRecipients,\n  getSharingById,\n  getSharingForSelf,\n  getSharingType,\n  getSharingLink,\n  getSharingDocIds,\n  getDocumentSharing,\n  getDocumentPermissions,\n  hasSharedParent,\n  hasSharedChild\n} from './state'\n\nimport SharingContext from 'sharing/context'\nimport { default as DumbSharedBadge } from './components/SharedBadge'\nimport {\n  default as DumbShareButton,\n  SharedByMeButton,\n  SharedWithMeButton\n} from './components/ShareButton'\nimport EditableSharingModal from 'sharing/components/EditableSharingModal'\nimport { SharingDetailsModal } from './SharingDetailsModal'\nimport { default as RecipientsList } from './components/WhoHasAccessLight'\nimport { RecipientsAvatars } from './components/Recipient'\nimport { default as DumbSharedStatus } from './components/SharedStatus'\n\nconst track = (document, action) => {\n  const tracker = getTracker()\n  if (!tracker) {\n    return\n  }\n  tracker.push([\n    'trackEvent',\n    isFile(document) ? 'Drive' : 'Photos',\n    action,\n    `${action}${isFile(document) ? 'File' : 'Album'}`\n  ])\n}\nconst trackSharingByLink = document => track(document, 'shareByLink')\nconst isFile = ({ _type }) => _type === 'io.cozy.files'\n\nexport default class SharingProvider extends Component {\n  static contextTypes = {\n    client: PropTypes.object.isRequired\n  }\n  constructor(props, context) {\n    super(props, context)\n    const instanceUri = this.context.client.options.uri\n    const documentType = props.documentType || 'Document'\n    this.state = {\n      byDocId: {},\n      sharings: [],\n      permissions: [],\n      sharedFolderPaths: [],\n      documentType,\n      isOwner: docId => isOwner(this.state, docId),\n      canReshare: docId => canReshare(this.state, docId, instanceUri),\n      getOwner: docId => getOwner(this.state, docId),\n      getSharingType: docId => getSharingType(this.state, docId, instanceUri),\n      getRecipients: docId => getRecipients(this.state, docId),\n      getSharingLink: docId => getSharingLink(this.state, docId, documentType),\n      hasSharedParent: document => hasSharedParent(this.state, document),\n      hasSharedChild: document => hasSharedChild(this.state, document),\n      share: this.share,\n      revoke: this.revoke,\n      revokeSelf: this.revokeSelf,\n      shareByLink: this.shareByLink,\n      revokeSharingLink: this.revokeSharingLink\n    }\n  }\n\n  dispatch = action =>\n    this.setState(state => ({ ...state, ...reducer(state, action) }))\n\n  async componentDidMount() {\n    const { client } = this.context\n    const { doctype } = this.props\n    const [sharings, permissions, apps] = await Promise.all([\n      client.collection('io.cozy.sharings').findByDoctype(doctype),\n      client.collection('io.cozy.permissions').findLinksByDoctype(doctype),\n      client.collection('io.cozy.permissions').findApps()\n    ])\n    this.dispatch(\n      receiveSharings({\n        instanceUri: client.options.uri,\n        sharings: sharings.data,\n        permissions: permissions.data,\n        apps: apps.data\n      })\n    )\n    if (doctype !== 'io.cozy.files') return\n\n    const sharedDocIds = sharings.data\n      .map(s => getSharingDocIds(s))\n      .reduce((acc, val) => acc.concat(val), [])\n    const resp = await client.collection(doctype).all({ keys: sharedDocIds })\n    const folderPaths = resp.data\n      .filter(f => f.type === 'directory')\n      .map(f => f.path)\n    const filePaths = await this.getFilesPaths(\n      resp.data.filter(f => f.type !== 'directory')\n    )\n    this.dispatch(receivePaths([...folderPaths, ...filePaths]))\n  }\n\n  getFilesPaths = async files => {\n    const parentDirIds = files\n      .map(f => f.dir_id)\n      .filter((f, idx, arr) => arr.indexOf(f) === idx)\n    const parentDirs = await this.context.client\n      .collection(this.props.doctype)\n      .all({ keys: parentDirIds })\n    const filePaths = files.map(f => {\n      const parentDirPath = parentDirs.data.find(d => d.id === f.dir_id).path\n      return parentDirPath === '/' ? `/${f.name}` : `${parentDirPath}/${f.name}`\n    })\n    return filePaths\n  }\n\n  share = async (document, recipients, sharingType, description) => {\n    const sharing = getDocumentSharing(this.state, document.id)\n    if (sharing) return this.addRecipients(sharing, recipients, sharingType)\n    const resp = await this.context.client\n      .collection('io.cozy.sharings')\n      .share(document, recipients, sharingType, description, '/preview')\n    this.dispatch(\n      addSharing(\n        resp.data,\n        document.path || (await this.getFilesPaths([document]))\n      )\n    )\n    return resp.data\n  }\n\n  addRecipients = async (sharing, recipients, sharingType) => {\n    const resp = await this.context.client\n      .collection('io.cozy.sharings')\n      .addRecipients(sharing, recipients, sharingType)\n    this.dispatch(updateSharing(resp.data))\n  }\n\n  revoke = async (document, sharingId, recipientIndex) => {\n    const sharing = getSharingById(this.state, sharingId)\n    await this.context.client\n      .collection('io.cozy.sharings')\n      .revokeRecipient(sharing, recipientIndex)\n    this.dispatch(\n      revokeRecipient(\n        sharing,\n        recipientIndex,\n        document.path || (await this.getFilesPaths([document]))\n      )\n    )\n  }\n\n  revokeSelf = async document => {\n    const sharing = getSharingForSelf(this.state, document.id)\n    await this.context.client.collection('io.cozy.sharings').revokeSelf(sharing)\n    this.dispatch(revokeSelf(sharing))\n  }\n\n  shareByLink = async document => {\n    trackSharingByLink(document)\n    const resp = await this.context.client\n      .collection('io.cozy.permissions')\n      .createSharingLink(document)\n    this.dispatch(addSharingLink(resp.data))\n    return resp\n  }\n\n  revokeSharingLink = async document => {\n    // Because some duplicate links have been created in the past, we must ensure\n    // we revoke all of them\n    const perms = getDocumentPermissions(this.state, document.id)\n    await Promise.all(\n      perms.map(p =>\n        this.context.client.collection('io.cozy.permissions').destroy(p)\n      )\n    )\n    this.dispatch(revokeSharingLink(perms))\n  }\n\n  render() {\n    // WARN: whe shouldn't do this (https://reactjs.org/docs/context.html#caveats)\n    // but if we don't, consumers don't rerender when the state changes after loading the sharings,\n    // probably because the state object remains the same...\n    return (\n      <SharingContext.Provider value={{ ...this.state }}>\n        {this.props.children}\n      </SharingContext.Provider>\n    )\n  }\n}\n\nexport const SharedDocument = ({ docId, children }) => (\n  <SharingContext.Consumer>\n    {({\n      byDocId,\n      isOwner,\n      getSharingType,\n      getRecipients,\n      getSharingLink,\n      revokeSelf\n    } = {}) =>\n      children({\n        hasWriteAccess:\n          !byDocId ||\n          !byDocId[docId] ||\n          isOwner(docId) ||\n          getSharingType(docId) === 'two-way',\n        isShared: byDocId !== undefined && byDocId[docId],\n        isSharedByMe: byDocId !== undefined && byDocId[docId] && isOwner(docId),\n        isSharedWithMe:\n          byDocId !== undefined && byDocId[docId] && !isOwner(docId),\n        recipients: getRecipients(docId),\n        link: getSharingLink(docId) !== null,\n        onLeave: revokeSelf\n      })\n    }\n  </SharingContext.Consumer>\n)\n\nexport const SharedStatus = ({ docId, className }) => (\n  <SharingContext.Consumer>\n    {({ byDocId, getRecipients, getSharingLink } = {}) =>\n      !byDocId || !byDocId[docId] ? (\n        <span className={className}>—</span>\n      ) : (\n        <DumbSharedStatus\n          className={className}\n          recipients={getRecipients(docId)}\n          docId={docId}\n          link={getSharingLink(docId) !== null}\n        />\n      )\n    }\n  </SharingContext.Consumer>\n)\n\nexport const SharedBadge = ({ docId, ...rest }) => (\n  <SharingContext.Consumer>\n    {({ byDocId, isOwner } = {}) =>\n      !byDocId || !byDocId[docId] ? null : (\n        <DumbSharedBadge byMe={isOwner(docId)} {...rest} />\n      )\n    }\n  </SharingContext.Consumer>\n)\n\nexport const SharedRecipients = ({ docId, onClick, ...rest }) => (\n  <SharingContext.Consumer>\n    {({ byDocId, getRecipients, getSharingLink } = {}) =>\n      !byDocId || !byDocId[docId] ? null : (\n        <RecipientsAvatars\n          recipients={getRecipients(docId)}\n          link={getSharingLink(docId) !== null}\n          onClick={onClick}\n          {...rest}\n        />\n      )\n    }\n  </SharingContext.Consumer>\n)\n\nexport const SharedRecipientsList = ({ docId, ...rest }) => (\n  <SharingContext.Consumer>\n    {({ byDocId, isOwner, getRecipients } = {}) =>\n      !byDocId || !byDocId[docId] || !isOwner(docId) ? null : (\n        <RecipientsList\n          recipients={getRecipients(docId).filter(r => r.status !== 'owner')}\n          {...rest}\n        />\n      )\n    }\n  </SharingContext.Consumer>\n)\n\nexport const ShareButton = ({ docId, ...rest }, { t }) => (\n  <SharingContext.Consumer>\n    {({ byDocId, documentType, isOwner }) =>\n      !byDocId[docId] ? (\n        <DumbShareButton label={t(`${documentType}.share.cta`)} {...rest} />\n      ) : isOwner(docId) ? (\n        <SharedByMeButton\n          label={t(`${documentType}.share.sharedByMe`)}\n          {...rest}\n        />\n      ) : (\n        <SharedWithMeButton\n          label={t(`${documentType}.share.sharedWithMe`)}\n          {...rest}\n        />\n      )\n    }\n  </SharingContext.Consumer>\n)\n\nShareButton.contextTypes = {\n  t: PropTypes.func.isRequired\n}\n\nconst SharingModal = ({ document, ...rest }) => (\n  <SharingContext.Consumer>\n    {({\n      documentType,\n      getOwner,\n      getSharingType,\n      getRecipients,\n      revokeSelf\n    }) => (\n      <SharingDetailsModal\n        document={document}\n        documentType={documentType}\n        owner={getOwner(document.id)}\n        sharingType={getSharingType(document.id)}\n        recipients={getRecipients(document.id)}\n        onRevoke={revokeSelf}\n        {...rest}\n      />\n    )}\n  </SharingContext.Consumer>\n)\n\nexport const ShareModal = ({ document, ...rest }) => (\n  <SharingContext.Consumer>\n    {({ byDocId, isOwner, canReshare }) =>\n      !byDocId[document.id] ||\n      isOwner(document.id) ||\n      canReshare(document.id) ? (\n        <EditableSharingModal document={document} {...rest} />\n      ) : (\n        <SharingModal document={document} {...rest} />\n      )\n    }\n  </SharingContext.Consumer>\n)\n","import { Group } from 'cozy-doctypes'\n\n// TODO: sadly we have different versions of contacts' doctype to handle...\n// A migration tool on the stack side is needed here\nconst emailMatch = (input, contact) => {\n  if (!contact.email) return false\n  const emailInput = new RegExp(input, 'i')\n  if (Array.isArray(contact.email)) {\n    return contact.email.some(email => emailInput.test(email.address))\n  }\n  return emailInput.test(contact.email)\n}\n\nconst cozyUrlMatch = (input, contact) => {\n  if (!contact.cozy && !contact.url) return false\n  const urlInput = new RegExp(input, 'i')\n  if (contact.cozy && Array.isArray(contact.cozy)) {\n    return contact.cozy.some(cozy => urlInput.test(cozy.url))\n  }\n  return urlInput.test(contact.url)\n}\n\nconst groupNameMatch = (input, contactOrGroup) => {\n  if (contactOrGroup._type !== Group.doctype) return false\n  const nameInput = new RegExp(input, 'i')\n  return nameInput.test(contactOrGroup.name)\n}\n\nexport { emailMatch, cozyUrlMatch, groupNameMatch }\n","import get from 'lodash/get'\n\nconst RECEIVE_SHARINGS = 'RECEIVE_SHARINGS'\nconst ADD_SHARING = 'ADD_SHARING'\nconst UPDATE_SHARING = 'UPDATE_SHARING'\nconst REVOKE_RECIPIENT = 'REVOKE_RECIPIENT'\nconst REVOKE_SELF = 'REVOKE_SELF'\nconst ADD_SHARING_LINK = 'ADD_SHARING_LINK'\nconst REVOKE_SHARING_LINK = 'REVOKE_SHARING_LINK'\nconst RECEIVE_PATHS = 'RECEIVE_PATHS'\n\n// actions\nexport const receiveSharings = ({\n  instanceUri,\n  sharings = [],\n  permissions = [],\n  apps = []\n}) => ({\n  type: RECEIVE_SHARINGS,\n  data: {\n    sharings: sharings.filter(\n      s => !areAllRecipientsRevoked(s) && !hasBeenSelfRevoked(s, instanceUri)\n    ),\n    permissions,\n    apps\n  }\n})\nexport const addSharing = (data, path) => ({\n  type: ADD_SHARING,\n  data,\n  path\n})\nexport const updateSharing = sharing => ({\n  type: UPDATE_SHARING,\n  sharing\n})\nexport const revokeRecipient = (sharing, index, path) => {\n  return {\n    type: REVOKE_RECIPIENT,\n    /* We set revoked status to the revoked member.\n    We can't just simply remove it, 'cauz we use the index\n    to remove members..\n    */\n    sharing: {\n      ...sharing,\n      attributes: {\n        ...sharing.attributes,\n        members: sharing.attributes.members.map((m, idx) => {\n          if (idx === index) {\n            return {\n              ...m,\n              status: 'revoked'\n            }\n          }\n          return m\n        })\n      }\n    },\n    path\n  }\n}\nexport const revokeSelf = sharing => ({ type: REVOKE_SELF, sharing })\nexport const addSharingLink = data => ({ type: ADD_SHARING_LINK, data })\nexport const revokeSharingLink = permissions => ({\n  type: REVOKE_SHARING_LINK,\n  permissions\n})\nexport const receivePaths = paths => ({ type: RECEIVE_PATHS, paths })\nexport const matchingInstanceName = (instanceUri = '') => shareMember =>\n  shareMember.instance &&\n  shareMember.instance.toString().toLowerCase() === instanceUri.toLowerCase()\n\n// reducers\nconst byIdInitialState = { sharings: [], permissions: [] }\nconst isItemEmpty = item =>\n  item.sharings.length === 0 && item.permissions.length === 0\nconst updateByIdItem = (state, id, updater) => {\n  const { [id]: byIdState, ...rest } = state\n  const update = updater(byIdState || byIdInitialState)\n  return isItemEmpty(update)\n    ? rest\n    : {\n        ...rest,\n        [id]: update\n      }\n}\n\nconst indexSharing = (state = {}, sharing) =>\n  getSharedDocIds(sharing).reduce(\n    (byId, id) =>\n      updateByIdItem(byId, id, state => ({\n        ...state,\n        sharings: [...state.sharings, sharing.id]\n      })),\n    state\n  )\n\nconst forgetSharing = (state = {}, sharing) =>\n  getSharedDocIds(sharing).reduce(\n    (byId, id) =>\n      updateByIdItem(byId, id, state => ({\n        ...state,\n        sharings: state.sharings.filter(sid => sid !== sharing.id)\n      })),\n    state\n  )\n\nconst indexPermission = (state = {}, perm) =>\n  getSharedDocIds(perm).reduce(\n    (byId, id) =>\n      updateByIdItem(byId, id, state => ({\n        ...state,\n        permissions: [...state.permissions, perm.id]\n      })),\n    state\n  )\n\nconst forgetPermission = (state = {}, permission) =>\n  getSharedDocIds(permission).reduce(\n    (byId, id) =>\n      updateByIdItem(byId, id, state => ({\n        ...state,\n        permissions: state.permissions.filter(pid => pid !== permission.id)\n      })),\n    state\n  )\n\nconst byDocId = (state = {}, action) => {\n  switch (action.type) {\n    case RECEIVE_SHARINGS:\n      // eslint-disable-next-line no-case-declarations\n      const intermediaryState = action.data.sharings.reduce(\n        (byId, sharing) => indexSharing(byId, sharing),\n        state\n      )\n      return action.data.permissions.reduce(\n        (byId, perm) => indexPermission(byId, perm),\n        intermediaryState\n      )\n    case ADD_SHARING:\n      return indexSharing(state, action.data)\n    case REVOKE_RECIPIENT:\n      if (areAllRecipientsRevoked(action.sharing)) {\n        return forgetSharing(state, action.sharing)\n      }\n      return state\n    case ADD_SHARING_LINK:\n      return indexPermission(state, action.data)\n    case REVOKE_SELF:\n      return forgetSharing(state, action.sharing)\n    case REVOKE_SHARING_LINK:\n      return action.permissions.reduce(\n        (byId, perm) => forgetPermission(byId, perm),\n        state\n      )\n    default:\n      return state\n  }\n}\n\nconst permissions = (state = [], action) => {\n  switch (action.type) {\n    case RECEIVE_SHARINGS:\n      return action.data.permissions\n    case ADD_SHARING_LINK:\n      return [...state, action.data]\n    case REVOKE_SHARING_LINK:\n      // eslint-disable-next-line no-case-declarations\n      const permIds = action.permissions.map(p => p.id)\n      return state.filter(p => permIds.indexOf(p.id) === -1)\n    default:\n      return state\n  }\n}\n\nconst apps = (state = [], action) => {\n  switch (action.type) {\n    case RECEIVE_SHARINGS:\n      return action.data.apps\n    default:\n      return state\n  }\n}\n\nconst sharings = (state = [], action) => {\n  switch (action.type) {\n    case RECEIVE_SHARINGS:\n      return action.data.sharings\n    case ADD_SHARING:\n      return [...state, action.data]\n    case UPDATE_SHARING:\n    case REVOKE_RECIPIENT:\n      return state.map(s => {\n        return s.id !== action.sharing.id ? s : action.sharing\n      })\n    case REVOKE_SELF:\n      return state.filter(s => s.id !== action.sharing.id)\n    default:\n      return state\n  }\n}\n\nconst sharedPaths = (state = [], action) => {\n  switch (action.type) {\n    case RECEIVE_PATHS:\n      //!TODO Remove after we solved the sharedPaths bugs\n      //eslint-disable-next-line\n      console.log('RECEIVE PATHS', action)\n      return action.paths\n    case ADD_SHARING:\n      //!TODO Remove after we solved the sharedPaths bugs\n      //eslint-disable-next-line\n      console.log('ADD SHARING', action)\n      //eslint-disable-next-line\n      const newState = [...state, action.path]\n      return newState\n    case REVOKE_RECIPIENT:\n      if (areAllRecipientsRevoked(action.sharing)) {\n        return state.filter(p => p !== action.path)\n      }\n      return state\n    default:\n      return state\n  }\n}\n\nconst reducer = (state = {}, action = {}) => ({\n  byDocId: byDocId(state.byDocId, action),\n  sharings: sharings(state.sharings, action),\n  permissions: permissions(state.permissions, action),\n  apps: apps(state.apps, action),\n  sharedPaths: sharedPaths(state.sharedPaths, action)\n})\nexport default reducer\n\n// selectors\nexport const isOwner = (state, docId) => {\n  if (state.byDocId[docId] && state.byDocId[docId].sharings.length !== 0) {\n    return (\n      getSharingById(state, state.byDocId[docId].sharings[0]).attributes\n        .owner === true\n    )\n  }\n  return true\n}\n\nexport const canReshare = (state, docId, instanceUri) => {\n  const sharing = getDocumentSharing(state, docId)\n  const me = sharing.attributes.members.find(matchingInstanceName(instanceUri))\n  return sharing.attributes.open_sharing === true && me && !me.read_only\n}\n\nexport const getOwner = (state, docId) =>\n  getRecipients(state, docId).find(r => r.status === 'owner')\n\nexport const getRecipients = (state, docId) => {\n  const recipients = getDocumentSharings(state, docId)\n    .map(sharing => {\n      const type = getDocumentSharingType(sharing, docId)\n      return sharing.attributes.members.map((m, idx) => ({\n        ...m,\n        type: m.read_only ? 'one-way' : type,\n        sharingId: sharing.id,\n        index: idx\n      }))\n    })\n    .reduce((acc, member) => acc.concat(member), [])\n    .filter(r => r.status !== 'revoked')\n  if (recipients[0] && recipients[0].status === 'owner') {\n    return [recipients[0], ...recipients.filter(r => r.status !== 'owner')]\n  }\n  return recipients\n}\n\nexport const getSharingLink = (state, docId, documentType) => {\n  // This shouldn't have happened, but unfortunately some duplicate sharing links have been created in the past\n  const perms = getDocumentPermissions(state, docId)\n  if (perms.length === 0) return null\n  const perm = perms[0]\n  const code =\n    get(perm, 'attributes.shortcodes.email') ||\n    get(perm, 'attributes.codes.email')\n  if (code) {\n    return buildSharingLink(state, documentType, code)\n  } else {\n    return null\n  }\n}\n\nexport const getSharingForSelf = (state, docId) =>\n  getDocumentSharing(state, docId)\n\nexport const getSharingType = (state, docId, instanceUri) => {\n  const sharing = getSharingForSelf(state, docId)\n  const type = getDocumentSharingType(sharing, docId)\n  if (sharing.attributes.owner) return type\n  const me = sharing.attributes.members.find(matchingInstanceName(instanceUri))\n  return me && me.read_only ? 'one-way' : type\n}\n\nexport const getDocumentSharing = (state, docId) =>\n  getDocumentSharings(state, docId)[0] || null\n\nconst getDocumentSharings = (state, docId) =>\n  !state.byDocId[docId]\n    ? []\n    : state.byDocId[docId].sharings.map(id => getSharingById(state, id))\n\nexport const getSharingById = (state, id) =>\n  state.sharings.find(s => s.id === id)\n\nexport const getDocumentPermissions = (state, docId) =>\n  !state.byDocId[docId]\n    ? []\n    : state.byDocId[docId].permissions.map(id => getPermissionById(state, id))\n\nconst getPermissionById = (state, id) =>\n  state.permissions.find(s => s.id === id)\n\nconst getApps = state => state.apps\n\nexport const hasSharedParent = (state, document) => {\n  if (!state.sharedPaths) {\n    //eslint-disable-next-line\n    console.log('hasSharedParent should not occurs', state, document)\n    return false\n  }\n  return state.sharedPaths.some(path => document.path.indexOf(`${path}/`) === 0)\n}\n\nexport const hasSharedChild = (state, document) => {\n  if (!state.sharedPaths) {\n    //eslint-disable-next-line\n    console.log('hasSharedChild should not occurs', state, document)\n    return false\n  }\n  const ret = state.sharedPaths.some(\n    path => path.indexOf(`${document.path}/`) === 0\n  )\n  return ret\n}\n\nexport const isShared = (state, document) => {\n  if (!state.sharedPaths) {\n    //eslint-disable-next-line\n    console.log('isShared should not occurs', state, document)\n    return false\n  }\n  return state.sharedPaths.some(path => path === document.path)\n}\n\n// helpers\nconst getSharedDocIds = doc =>\n  doc.type === 'io.cozy.sharings'\n    ? getSharingDocIds(doc)\n    : getPermissionDocIds(doc)\n\nexport const getSharingDocIds = sharing =>\n  sharing.attributes.rules\n    .map(r => r.values)\n    .reduce((acc, val) => acc.concat(val), [])\n\nconst getPermissionDocIds = perm =>\n  Object.keys(perm.attributes.permissions)\n    .map(k => perm.attributes.permissions[k].values)\n    .reduce((acc, val) => [...acc, ...val], [])\n\nconst areAllRecipientsRevoked = sharing =>\n  sharing.attributes.owner &&\n  sharing.attributes.members.filter(m => m.status !== 'revoked').length === 1\n\nconst hasBeenSelfRevoked = (sharing, instanceUri) => {\n  const me = sharing.attributes.members.find(matchingInstanceName(instanceUri))\n  return !sharing.attributes.owner && me && me.status === 'revoked'\n}\n\nconst getDocumentSharingType = (sharing, docId) => {\n  if (!sharing) return null\n  const rule = sharing.attributes.rules.find(\n    r => r.values.indexOf(docId) !== -1\n  )\n  return rule.update === 'sync' && rule.remove === 'sync'\n    ? 'two-way'\n    : 'one-way'\n}\n\nconst buildSharingLink = (state, documentType, sharecode) => {\n  const appUrl = getAppUrlForDoctype(state, documentType)\n  return `${appUrl}public?sharecode=${sharecode}`\n}\n\nconst getAppUrlForDoctype = (state, documentType) => {\n  const apps = getApps(state)\n  switch (documentType) {\n    case 'Files':\n    case 'Document':\n      return getAppUrl(apps, 'drive')\n    case 'Albums':\n      return getAppUrl(apps, 'photos')\n    default:\n      throw new Error(\n        `Sharing link: don't know which app to use for doctype ${documentType}`\n      )\n  }\n}\n\nconst getAppUrl = (apps, appName) => {\n  const app = apps.find(\n    a => a.attributes.slug === appName && a.attributes.state === 'ready'\n  )\n  if (!app) {\n    throw new Error(`Sharing link: app ${appName} not installed`)\n  }\n  return app.links.related\n}\n","import styles from '../styles/photoList.styl'\n\nimport React, { Component } from 'react'\nimport { Button, Spinner } from 'cozy-ui/react'\nimport palette from 'cozy-ui/stylus/settings/palette.json'\n\nclass LoadMoreButton extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      fetching: false\n    }\n  }\n\n  handleClick() {\n    this.setState({ fetching: true })\n    this.props.onClick().then(() => this.setState({ fetching: false }))\n  }\n\n  render() {\n    const { label, width = '100%' } = this.props\n    const { fetching } = this.state\n    return (\n      <div style={{ width: width }} className={styles['pho-list-morebutton']}>\n        {fetching && (\n          <Button\n            disabled\n            theme=\"secondary\"\n            label={<Spinner color={palette['dodgerBlue']} nomargin />}\n          />\n        )}\n        {!fetching && (\n          <Button\n            theme=\"secondary\"\n            onClick={() => this.handleClick()}\n            label={label}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default LoadMoreButton\n","import React from 'react'\nimport { withRouter } from 'react-router'\nimport { Query, withMutations } from 'cozy-client'\nimport SharingProvider from 'sharing'\nimport AlbumsView from './components/AlbumsView'\nimport AlbumPhotos from './components/AlbumPhotos'\nimport PhotosPicker from './components/PhotosPicker'\nimport AddToAlbumModal from './components/AddToAlbumModal'\nimport { Alerter } from 'cozy-ui/react/'\nimport Loading from '../../components/Loading'\n\nimport { DOCTYPE_ALBUMS } from 'drive/lib/doctypes'\n\nconst ALBUMS_QUERY = client =>\n  client\n    .find(DOCTYPE_ALBUMS, { created_at: { $gt: null } })\n    .where({\n      auto: { $exists: false }\n    })\n    .indexFields(['created_at'])\n    .include(['photos'])\n    .sortBy([{ created_at: 'desc' }])\n\nexport const ALBUM_QUERY = (client, ownProps) =>\n  client.get(DOCTYPE_ALBUMS, ownProps.router.params.albumId).include(['photos'])\n\nconst addPhotos = async (album, photos) => {\n  try {\n    const photoCountBefore = album.photos.data.length\n    await album.photos.addById(photos.map(({ _id }) => _id))\n    const photoCountAfter = album.photos.data.length\n    if (photoCountBefore + photos.length !== photoCountAfter) {\n      Alerter.info('Alerter.photos.already_added_photo')\n    } else {\n      Alerter.success('Albums.add_photos.success', {\n        name: album.name,\n        smart_count: photos.length\n      })\n    }\n  } catch (error) {\n    Alerter.error('Albums.add_photos.error.reference')\n  }\n}\n\nconst ALBUM_MUTATIONS = client => ({\n  updateAlbum: async album => {\n    const unique = await client\n      .collection(DOCTYPE_ALBUMS)\n      .checkUniquenessOf('name', album.name)\n    if (unique !== true) {\n      Alerter.error('Albums.create.error.already_exists', { name })\n      return\n    } else {\n      return client.save(album)\n    }\n  },\n  deleteAlbum: album => client.destroy(album),\n  addPhotos,\n  removePhotos: async (album, photos, clearSelection) => {\n    try {\n      await album.photos.removeById(photos.map(({ _id }) => _id))\n      Alerter.success('Albums.remove_photos.success', {\n        album_name: album.name\n      })\n      clearSelection()\n    } catch (e) {\n      Alerter.error('Albums.remove_photos.error.generic')\n    }\n  }\n})\nconst ALBUMS_MUTATIONS = client => ({\n  addPhotos,\n  createAlbum: async (name, photos, created_at = new Date()) => {\n    try {\n      if (!name) {\n        Alerter.error('Albums.create.error.name_missing')\n        return\n      }\n      const album = { _type: DOCTYPE_ALBUMS, name, created_at }\n\n      const unique = await client\n        .collection(DOCTYPE_ALBUMS)\n        .checkUniquenessOf('name', album.name)\n      if (unique !== true) {\n        Alerter.error('Albums.create.error.already_exists', { name })\n        return\n      }\n      const resp = await client.create(\n        DOCTYPE_ALBUMS,\n        album,\n        { photos },\n        {\n          updateQueries: {\n            albums: (previousData, result) => [result.data, ...previousData]\n          }\n        }\n      )\n      Alerter.success('Albums.create.success', {\n        name: album.name,\n        smart_count: photos.length\n      })\n      return resp.data\n    } catch (error) {\n      Alerter.error('Albums.create.error.generic')\n    }\n  }\n})\n\nconst ConnectedAlbumsView = props => (\n  <SharingProvider doctype={DOCTYPE_ALBUMS} documentType=\"Albums\">\n    <Query query={ALBUMS_QUERY}>\n      {result => {\n        return <AlbumsView albums={result} {...props} />\n      }}\n    </Query>\n  </SharingProvider>\n)\n\nconst ConnectedAddToAlbumModal = props => (\n  <Query query={ALBUMS_QUERY} as=\"albums\" mutations={ALBUMS_MUTATIONS}>\n    {(result, { createAlbum, addPhotos }) => (\n      <AddToAlbumModal\n        {...result}\n        createAlbum={createAlbum}\n        addPhotos={addPhotos}\n        {...props}\n      />\n    )}\n  </Query>\n)\n\nexport const AlbumPhotosWithLoader = ({ children }) => (\n  { data: album, fetchStatus },\n  { updateAlbum, deleteAlbum, removePhotos }\n) => {\n  if (album && fetchStatus === 'loaded') {\n    return (\n      <AlbumPhotos\n        album={album}\n        photos={album.photos.data}\n        updateAlbum={updateAlbum}\n        deleteAlbum={deleteAlbum}\n        removePhotos={removePhotos}\n        hasMore={album.photos.hasMore}\n        fetchMore={album.photos.fetchMore.bind(album.photos)}\n      >\n        {children}\n      </AlbumPhotos>\n    )\n  } else {\n    return (\n      <Loading size={'xxlarge'} loadingType={'photos_fetching'} middle={true} />\n    )\n  }\n}\n\nexport const ConnectedAlbumPhotos = withRouter(props => (\n  <Query query={ALBUM_QUERY} {...props} mutations={ALBUM_MUTATIONS}>\n    {AlbumPhotosWithLoader({\n      children: props.children\n    })}\n  </Query>\n))\n\nconst CreateAlbumPicker = withMutations(ALBUMS_MUTATIONS)(PhotosPicker)\n\nconst ConnectedPhotosPicker = withRouter(({ params, ...props }) => {\n  return params.albumId ? (\n    <Query query={ALBUM_QUERY} mutations={ALBUMS_MUTATIONS} {...props}>\n      {({ data }, { addPhotos }) => (\n        <PhotosPicker album={data} addPhotos={addPhotos} />\n      )}\n    </Query>\n  ) : (\n    <CreateAlbumPicker />\n  )\n})\n\nexport {\n  ConnectedAlbumsView as AlbumsView,\n  ConnectedPhotosPicker as PhotosPicker,\n  ConnectedAlbumPhotos as AlbumPhotos,\n  ConnectedAddToAlbumModal as AddToAlbumModal\n}\n\nexport const belongsToAlbums = photos => {\n  if (!photos) {\n    return false\n  }\n  for (const photo of photos) {\n    if (\n      photo.relationships &&\n      photo.relationships.referenced_by &&\n      photo.relationships.referenced_by.data &&\n      photo.relationships.referenced_by.data.length > 0\n    ) {\n      const refs = photo.relationships.referenced_by.data\n      for (const ref of refs) {\n        if (ref.type === DOCTYPE_ALBUMS) {\n          return true\n        }\n      }\n    }\n  }\n  return false\n}\n","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-cross-bold_768adbba35f30227bde1acbc224e1604\",\n  \"use\": \"icon-cross-bold_768adbba35f30227bde1acbc224e1604-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 16 16\\\" id=\\\"icon-cross-bold_768adbba35f30227bde1acbc224e1604\\\">\\n  <defs>\\n    <path d=\\\"M8 6.586l5.293-5.293a1 1 0 0 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 1 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 1 1 1.414-1.414L8 6.586z\\\" id=\\\"icon-cross-bold_768adbba35f30227bde1acbc224e1604_a\\\" />\\n  </defs>\\n  <use fill=\\\"#32363F\\\" fill-rule=\\\"nonzero\\\" xlink:href=\\\"#icon-cross-bold_768adbba35f30227bde1acbc224e1604_a\\\" />\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","export { default as MoreButton } from './MoreButton'\nexport { default as CozyHomeLink } from './CozyHomeLink'\n","import React from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { Empty, Button } from 'cozy-ui/react'\nimport EmptyIcon from '../../photos/assets/icons/icon-image-broken.svg'\n\nexport const ErrorComponent = ({ t, errorType }) => {\n  return (\n    <Empty title={t(`Error.${errorType}_title`)} icon={EmptyIcon}>\n      <Button\n        onClick={() => window.location.reload()}\n        label={t('Error.refresh')}\n      />\n    </Empty>\n  )\n}\n\nconst TranslatedError = translate()(ErrorComponent)\n\n// eslint-disable-next-line\nexport const withError = (onError, type, BaseComponent) => props =>\n  onError(props) ? (\n    <TranslatedError errorType={type} />\n  ) : (\n    <BaseComponent {...props} />\n  )\n\nexport default TranslatedError\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coz-btn-shared\":\"coz-btn-shared--27aW9\",\"coz-btn-sharedWithMe\":\"coz-btn-sharedWithMe--1CdsF\"};","import styles from '../styles/photoList.styl'\n\nimport React, { Component } from 'react'\nimport { withContentRect } from 'react-measure'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport PhotoList from './PhotoList'\nimport { EmptyPhotos } from 'components/Error/Empty'\nimport Loading from './Loading'\nimport ErrorComponent from 'components/Error/ErrorComponent'\nimport LoadMoreButton from './LoadMoreButton'\n\nexport class PhotoBoard extends Component {\n  render() {\n    const {\n      t,\n      f,\n      lists,\n      selected,\n      photosContext,\n      showSelection,\n      onPhotoToggle,\n      onPhotosSelect,\n      onPhotosUnselect,\n      fetchStatus,\n      hasMore,\n      fetchMore,\n      measureRef,\n      contentRect: {\n        entry: { width }\n      }\n    } = this.props\n\n    const isError = fetchStatus === 'failed'\n    const isFetching = fetchStatus === 'pending' || fetchStatus === 'loading'\n\n    if (isError) {\n      return <ErrorComponent errorType={`${photosContext}_photos`} />\n    }\n    if (isFetching) {\n      return <Loading loadingType=\"photos_fetching\" />\n    }\n    if (!isFetching && (lists.length === 0 || lists[0].photos.length === 0)) {\n      return <EmptyPhotos localeKey={`${photosContext}_photos`} />\n    }\n\n    return (\n      <div\n        className={showSelection ? styles['pho-list-selection'] : ''}\n        ref={measureRef}\n      >\n        {lists.map((photoList, idx) => (\n          <PhotoList\n            key={idx}\n            title={\n              photoList.title ||\n              (photoList.month ? f(photoList.month, 'MMMM YYYY') : '')\n            }\n            photos={photoList.photos}\n            selected={selected}\n            showSelection={showSelection}\n            onPhotoToggle={onPhotoToggle}\n            onPhotosSelect={onPhotosSelect}\n            onPhotosUnselect={onPhotosUnselect}\n            containerWidth={width}\n          />\n        ))}\n        {hasMore && (\n          <LoadMoreButton\n            label={t('Board.load_more')}\n            width={width}\n            onClick={fetchMore}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default translate()(withContentRect()(PhotoBoard))\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport cx from 'classnames'\nimport get from 'lodash/get'\n\nimport { Button, Icon } from 'cozy-ui/react'\nimport Alerter from 'cozy-ui/react/Alerter'\nimport SelectBox, { components } from 'cozy-ui/react/SelectBox'\nimport palette from 'cozy-ui/react/palette'\n\nimport { Contact, Group } from 'models'\nimport { contactsResponseType, groupsResponseType } from 'sharing/propTypes'\nimport ShareRecipientsInput from 'sharing/components/ShareRecipientsInput'\nimport styles from 'sharing/share.styl'\nimport logger from 'lib/logger'\n\nconst DropdownIndicator = props => (\n  <components.DropdownIndicator {...props}>\n    <Icon icon=\"bottom\" color={palette.coolGrey} />\n  </components.DropdownIndicator>\n)\nconst Option = props => (\n  <components.Option {...props}>\n    <div className={cx(styles['select-option'])}>\n      {props.isSelected && <Icon icon=\"check\" color={palette.dodgerBlue} />}\n      <div>\n        <div className={styles['select-option-label']}>{props.label}</div>\n        <div className={styles['select-option-desc']}>{props.data.desc}</div>\n      </div>\n    </div>\n  </components.Option>\n)\nconst customStyles = {\n  option: (base, state) => ({\n    ...base,\n    color: 'black',\n    backgroundColor: state.isFocused ? palette.paleGrey : null,\n    padding: 0,\n    borderBottom:\n      state.options.findIndex(o => o.value === state.value) === 0\n        ? `1px solid ${palette.silver}`\n        : null\n  }),\n  menu: base => ({\n    ...base,\n    width: '204%'\n  })\n}\nconst ShareTypeSelect = ({ options, onChange }) => (\n  <div className={styles['select-wrapper']}>\n    <SelectBox\n      name=\"select\"\n      classNamePrefix=\"needsclick react-select\"\n      components={{ DropdownIndicator, Option }}\n      styles={customStyles}\n      defaultValue={options[0]}\n      isSearchable={false}\n      onChange={option => {\n        onChange(option.value)\n      }}\n      options={options}\n    />\n  </div>\n)\n\nShareTypeSelect.propTypes = {\n  onChange: PropTypes.func,\n  options: PropTypes.array.isRequired\n}\n\nShareTypeSelect.defaultProps = {\n  onChange: logger.log,\n  value: ''\n}\n\nconst ShareSubmit = props => (\n  <Button\n    onClick={() => {\n      props.onSubmit()\n    }}\n    busy={props.loading}\n    label={props.label}\n    disabled={props.disabled}\n  />\n)\n\nShareSubmit.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n  label: PropTypes.string,\n  loading: PropTypes.bool,\n  disabled: PropTypes.bool\n}\n\nShareSubmit.defaultProps = {\n  label: 'Submit',\n  loading: false\n}\n\nexport const countNewRecipients = (currentRecipients, newRecipients) => {\n  return newRecipients.filter(contact => {\n    const email = Contact.getPrimaryEmail(contact)\n    const cozyUrl = Contact.getPrimaryCozy(contact)\n    return !currentRecipients.find(\n      r =>\n        (email && r.email && r.email === email) ||\n        (cozyUrl && r.instance && r.instance === cozyUrl)\n    )\n  }).length\n}\n\nclass ShareByEmail extends Component {\n  static contextTypes = {\n    t: PropTypes.func.isRequired,\n    client: PropTypes.object.isRequired\n  }\n  sharingTypes = [\n    {\n      value: 'two-way',\n      label: this.context.t('Share.type.two-way'),\n      desc: this.context.t('Share.type.desc.two-way'),\n      disabled: false\n    },\n    {\n      value: 'one-way',\n      label: this.context.t('Share.type.one-way'),\n      desc: this.context.t('Share.type.desc.one-way'),\n      disabled: false\n    }\n  ]\n\n  initialState = {\n    recipients: [],\n    sharingType: 'two-way',\n    loading: false\n  }\n\n  state = { ...this.initialState }\n\n  reset = () => {\n    this.setState({ ...this.initialState })\n  }\n\n  onChange = value => {\n    this.setState(state => ({ ...state, sharingType: value }))\n  }\n\n  onSubmit = () => {\n    this.sendSharingLink()\n  }\n\n  sanitizeRecipient = recipient => {\n    const matches = recipient.email.match(/\\s(.+@.+)\\s/g)\n    recipient.email = matches.length\n      ? matches[0]\n          .trim()\n          .replace(/\\s.+/g, '')\n          .replace(/^[\\W]|[\\W]$/g, '')\n      : recipient.email\n    return recipient\n  }\n\n  onRecipientPick = recipient => {\n    let contactsToAdd\n    if (recipient._type === Group.doctype) {\n      const groupId = recipient.id\n      contactsToAdd = this.props.contacts.data.filter(contact => {\n        const contactGroupIds = get(\n          contact,\n          'relationships.groups.data',\n          []\n        ).map(group => group._id)\n\n        return contactGroupIds.includes(groupId)\n      })\n    } else {\n      contactsToAdd = [recipient]\n    }\n\n    const filtered = contactsToAdd\n      .filter(\n        contact =>\n          (contact.email && contact.email.length > 0) ||\n          (contact.cozy && contact.cozy.length > 0)\n      )\n      .filter(contact => !this.state.recipients.find(r => r === contact))\n\n    this.setState(state => ({\n      ...state,\n      recipients: [...state.recipients, ...filtered]\n    }))\n  }\n\n  onRecipientRemove = recipient => {\n    const idx = this.state.recipients.findIndex(r => r === recipient)\n    this.setState(state => ({\n      ...state,\n      recipients: [\n        ...state.recipients.slice(0, idx),\n        ...state.recipients.slice(idx + 1)\n      ]\n    }))\n  }\n\n  getSuccessMessage = recipientsBefore => {\n    const { documentType } = this.props\n    const { recipients } = this.state\n    if (recipients.length === 1) {\n      const recipient = recipients[0]\n      const email = Contact.isContact(recipient)\n        ? Contact.getPrimaryEmail(recipient)\n        : recipient.email\n      const cozyUrl = Contact.getPrimaryCozy(recipient)\n\n      if (email) {\n        return [\n          `${documentType}.share.shareByEmail.success`,\n          {\n            email\n          }\n        ]\n      } else if (cozyUrl) {\n        return [\n          `${documentType}.share.shareByEmail.success`,\n          {\n            email: cozyUrl\n          }\n        ]\n      } else {\n        return [\n          `${documentType}.share.shareByEmail.genericSuccess`,\n          {\n            count: 1\n          }\n        ]\n      }\n    } else {\n      return [\n        `${documentType}.share.shareByEmail.genericSuccess`,\n        {\n          count: countNewRecipients(recipientsBefore, recipients)\n        }\n      ]\n    }\n  }\n\n  share = () => {\n    const { document, sharingDesc, onShare, createContact } = this.props\n    const { recipients, sharingType } = this.state\n    if (recipients.length === 0) {\n      return\n    }\n\n    // we can't use currentRecipients prop in getSuccessMessage because it may use\n    // the updated prop to count the new recipients\n    const recipientsBefore = this.props.currentRecipients\n\n    this.setState(state => ({ ...state, loading: true }))\n    Promise.all(\n      recipients.map(\n        recipient =>\n          recipient.id\n            ? recipient\n            : createContact({\n                email: [{ address: recipient.email, primary: true }]\n              }).then(resp => resp.data)\n      )\n    )\n      .then(recipients =>\n        onShare(document, recipients, sharingType, sharingDesc)\n      )\n      .then(() => {\n        Alerter.success(...this.getSuccessMessage(recipientsBefore))\n        this.reset()\n      })\n      .catch(err => {\n        Alerter.error('Error.generic')\n        this.reset()\n        throw err\n      })\n  }\n\n  render() {\n    const { t } = this.context\n    const { contacts, documentType, groups } = this.props\n    const { recipients } = this.state\n\n    return (\n      <div className={styles['coz-form-group']}>\n        <div className={styles['coz-form']}>\n          <ShareRecipientsInput\n            label={t(`${documentType}.share.shareByEmail.email`)}\n            placeholder={\n              recipients.length === 0\n                ? t(`${documentType}.share.shareByEmail.emailPlaceholder`)\n                : ''\n            }\n            onFocus={this.onInputFocus}\n            onPick={recipient => this.onRecipientPick(recipient)}\n            onRemove={recipient => this.onRecipientRemove(recipient)}\n            contacts={contacts}\n            groups={groups}\n            recipients={recipients}\n          />\n        </div>\n        <div className={styles['share-type-control']}>\n          <ShareTypeSelect\n            options={this.sharingTypes}\n            onChange={this.onChange}\n          />\n          <ShareSubmit\n            label={t(`${documentType}.share.shareByEmail.send`)}\n            onSubmit={this.share}\n            loading={this.state.loading}\n            disabled={recipients.length === 0}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nShareByEmail.propTypes = {\n  currentRecipients: PropTypes.arrayOf(PropTypes.object),\n  contacts: contactsResponseType.isRequired,\n  groups: groupsResponseType.isRequired,\n  document: PropTypes.object.isRequired,\n  documentType: PropTypes.string.isRequired,\n  sharingDesc: PropTypes.string.isRequired,\n  onShare: PropTypes.func.isRequired,\n  createContact: PropTypes.func.isRequired\n}\n\nexport default ShareByEmail\n","import styles from '../styles/confirms.styl'\nimport classNames from 'classnames'\n\nimport React from 'react'\nimport Modal from 'cozy-ui/react/Modal'\n\nconst QuitConfirm = ({ t, confirm, abort }) => {\n  const confirmationTexts = ['forbidden'].map(type => (\n    <p\n      key={`key_quit_${type}`}\n      className={classNames(styles['fil-confirm-text'], styles[`icon-${type}`])}\n    >\n      {t(`quitconfirmation.${type}`)}\n    </p>\n  ))\n\n  return (\n    <Modal\n      title={t('quitconfirmation.title')}\n      description={confirmationTexts}\n      secondaryType=\"secondary\"\n      secondaryText={t('quitconfirmation.cancel')}\n      secondaryAction={abort}\n      primaryType=\"danger\"\n      primaryText={t('quitconfirmation.quit')}\n      primaryAction={confirm}\n    />\n  )\n}\n\nexport default QuitConfirm\n","import React, { Component } from 'react'\nimport { Menu, MenuItem, Icon, withBreakpoints } from 'cozy-ui/react'\nimport { MoreButton } from 'components/Button'\nimport { ShareButton } from 'sharing'\n\nimport styles from 'photos/styles/toolbar.styl'\n\nimport CheckboxIcon from 'photos/assets/icons/icon-checkbox.svg'\n\nclass AlbumToolbar extends Component {\n  render() {\n    const {\n      t,\n      router,\n      album,\n      sharedWithMe,\n      // sharedByMe,\n      readOnly,\n      disabled = false,\n      downloadAlbum,\n      deleteAlbum,\n      // leaveAlbum,\n      selectItems,\n      onRename,\n      breakpoints: { isMobile },\n      shareAlbum\n    } = this.props\n    return (\n      <div\n        data-test-id=\"pho-toolbar-album\"\n        className={styles['pho-toolbar']}\n        role=\"toolbar\"\n      >\n        {!isMobile && (\n          <ShareButton\n            disabled={disabled}\n            label={t('Albums.share.cta')}\n            onClick={() => shareAlbum(album)}\n          />\n        )}\n        <Menu\n          data-test-id=\"more-button\"\n          disabled={disabled}\n          className={styles['pho-toolbar-menu']}\n          component={<MoreButton />}\n          position=\"right\"\n        >\n          {!sharedWithMe && (\n            <MenuItem\n              className={'u-hide--desk'}\n              icon={<Icon icon=\"share\" />}\n              onSelect={() => shareAlbum(album)}\n            >\n              {t('Albums.share.cta')}\n            </MenuItem>\n          )}\n          <MenuItem\n            data-test-id=\"menu-download-album\"\n            onSelect={downloadAlbum}\n            icon={<Icon icon=\"download\" />}\n          >\n            {t('Toolbar.menu.download_album')}\n          </MenuItem>\n          <MenuItem\n            data-test-id=\"menu-rename-album\"\n            icon={<Icon icon=\"rename\" />}\n            onSelect={onRename}\n          >\n            {t('Toolbar.menu.rename_album')}\n          </MenuItem>\n          {!readOnly && (\n            <MenuItem\n              data-test-id=\"menu-add-photos-to-album\"\n              icon={<Icon icon=\"album-add\" />}\n              onSelect={() => router.push(`${router.location.pathname}/edit`)}\n            >\n              {t('Toolbar.menu.add_photos')}\n            </MenuItem>\n          )}\n          <hr className={'u-hide--desk'} />\n          <MenuItem\n            className={'u-hide--desk'}\n            icon={<Icon icon={CheckboxIcon} />}\n            onSelect={selectItems}\n          >\n            {t('Toolbar.menu.select_items')}\n          </MenuItem>\n          <hr />\n          {!sharedWithMe && (\n            <MenuItem\n              data-test-id=\"menu-delete-album\"\n              className={styles['pho-action-delete']}\n              icon={<Icon icon=\"trash\" />}\n              onSelect={deleteAlbum}\n            >\n              {t('Toolbar.menu.album_delete')}\n            </MenuItem>\n          )}\n        </Menu>\n      </div>\n    )\n  }\n}\n\nexport default withBreakpoints()(AlbumToolbar)\n","const ColorHash = () => {\n  const schemes = {\n    base: [\n      '304FFE',\n      '2979FF',\n      '00B0FF',\n      '00DCE9',\n      '00D5B8',\n      '00C853',\n      'E70505',\n      'FF5700',\n      'FF7900',\n      'FFA300',\n      'B3C51D',\n      '64DD17',\n      'FF2828',\n      'F819AA',\n      'AA00FF',\n      '6200EA',\n      '7190AB',\n      '51658D'\n    ]\n  }\n\n  const hashCode = str => {\n    var h, i, len, max\n\n    h = 0\n    max = Math.pow(2, 32)\n\n    for (i = 0, len = str.length; i < len; i++) {\n      h = (h * 31 + str.charCodeAt(i)) % max\n    }\n\n    return h\n  }\n\n  const getColor = (str, name) => {\n    var scheme, hash\n\n    scheme = schemes[name] || schemes.base\n    hash = hashCode(str)\n\n    return '#' + scheme[hash % scheme.length]\n  }\n\n  return {\n    getHash: hashCode,\n    getColor: getColor\n  }\n}\n\nexport default ColorHash\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pho-content-title\":\"pho-content-title--3Yt9z\",\"error\":\"error--2qbV5\",\"pho-content-header\":\"pho-content-header--1M4IS\",\"--hide-bar\":\"_--hide-bar--lrytb\",\"pho-content-album-previous\":\"pho-content-album-previous--3BqBh\",\"spin\":\"spin--1ZeSG\",\"shake\":\"shake--3WZrZ\"};","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-trash-big_48355d429631705f7ab5001494a0529c\",\n  \"use\": \"icon-trash-big_48355d429631705f7ab5001494a0529c-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"icon-trash-big_48355d429631705f7ab5001494a0529c\\\">\\n  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" transform=\\\"translate(2)\\\">\\n    <path fill=\\\"#D1D5DB\\\" d=\\\"M2,8 L26,8 L26,28.009947 C26,30.2135924 24.2157067,32 22.009947,32 L5.99005301,32 C3.78640758,32 2,30.2157067 2,28.009947 L2,8 Z\\\" />\\n    <path fill=\\\"#A3ACB8\\\" d=\\\"M7,2 L1.99124431,2 C0.899897516,2 0,2.8954305 0,4 L0,6 L28,6 L28,4 C28,2.88772964 27.1084896,2 26.0087557,2 L21,2 L20.4438648,0.887729645 C20.1990795,0.398159027 19.5511774,0 18.9975267,0 L9.00247329,0 C8.45576096,0 7.80127495,0.3974501 7.55613518,0.887729645 L7,2 Z\\\" />\\n  </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","export const CozyHomeLinkIcon = 'cloud'\n\nexport default CozyHomeLinkIcon\n","module.exports = {\"name\":\"Drive\",\"name_prefix\":\"Cozy\",\"slug\":\"drive\",\"version\":\"1.18.16\",\"type\":\"webapp\",\"licence\":\"AGPL-3.0\",\"icon\":\"public/app-icon.svg\",\"categories\":[\"cozy\"],\"source\":\"https://github.com/cozy/cozy-drive\",\"editor\":\"Cozy\",\"developer\":{\"name\":\"Cozy Cloud\",\"url\":\"https://cozy.io\"},\"locales\":{\"en\":{\"short_description\":\"Cozy Drive helps you to save, sync and secure your files on your Cozy.\",\"long_description\":\"With Cozy Drive, you can easily:\\n- Store your important files and keep them secure in your Cozy\\n- Access to all your documents online & offline, from your desktop, and on your smartphone or tablet\\n- Share links to files ans folders with who you like;\\n- Automatically retrieve bills, payrolls, tax notices and other data from your main online services (internet, energy, retail, mobile, energy, travel...)\\n- Upload files to your Cozy from your Android\",\"screenshots\":[\"screenshots/en/screenshot01.png\",\"screenshots/en/screenshot02.png\",\"screenshots/en/screenshot03.png\",\"screenshots/en/screenshot04.png\"]},\"fr\":{\"short_description\":\"Cozy Drive est l’application de sauvegarde, de synchronisation et de sécurisation de tous vos fichiers sur Cozy.\",\"long_description\":\"Avec Cozy Drive vous pourrez :\\n- Sauvegarder et synchroniser gratuitement tous vos documents importants (carte d’identité, photos de vacances, avis d’imposition, fiches de salaires…);\\n- Accéder à vos documents n’importe quand, n’importe ou même en mode avion depuis votre bureau, votre smartphone ou tablette;\\n- Partager vos fichiers et dossiers par lien avec qui vous le souhaitez;\\n- Récupérer automatiquement vos documents administratifs de vos principaux fournisseurs de service (opérateur mobile, fournisseur d’énergie, assureur, internet, santé…);\\n- Rester synchronisé·e lors de vos voyages et déplacements professionnels avec nos applications mobiles.\",\"screenshots\":[\"screenshots/fr/screenshot01.png\",\"screenshots/fr/screenshot02.png\",\"screenshots/fr/screenshot03.png\",\"screenshots/fr/screenshot04.png\"]}},\"screenshots\":[\"screenshots/fr/screenshot01.png\",\"screenshots/fr/screenshot02.png\",\"screenshots/fr/screenshot03.png\",\"screenshots/fr/screenshot04.png\"],\"langs\":[\"en\",\"fr\"],\"platforms\":[{\"type\":\"ios\",\"url\":\"https://itunes.apple.com/us/app/cozy-drive/id1224102389?mt=8\"},{\"type\":\"android\",\"url\":\"https://play.google.com/store/apps/details?id=io.cozy.drive.mobile\"}],\"routes\":{\"/\":{\"folder\":\"/\",\"index\":\"index.html\",\"public\":false},\"/intents\":{\"folder\":\"/intents\",\"index\":\"index.html\",\"public\":false},\"/public\":{\"folder\":\"/public\",\"index\":\"index.html\",\"public\":true},\"/preview\":{\"folder\":\"/public\",\"index\":\"index.html\",\"public\":true}},\"intents\":[{\"action\":\"OPEN\",\"type\":[\"io.cozy.files\"],\"href\":\"/intents\"},{\"action\":\"PICK\",\"type\":[\"io.cozy.files\"],\"href\":\"/intents\"},{\"action\":\"GET_URL\",\"type\":[\"io.cozy.files\"],\"href\":\"/intents\"},{\"action\":\"OPEN\",\"type\":[\"io.cozy.suggestions\"],\"href\":\"/intents\"}],\"permissions\":{\"files\":{\"description\":\"Required to access the files\",\"type\":\"io.cozy.files\",\"verbs\":[\"ALL\"]},\"apps\":{\"description\":\"Required by the cozy-bar to display the icons of the apps\",\"type\":\"io.cozy.apps\",\"verbs\":[\"GET\"]},\"albums\":{\"description\":\"Required to manage photos albums\",\"type\":\"io.cozy.photos.albums\",\"verbs\":[\"PUT\"]},\"contacts\":{\"type\":\"io.cozy.contacts\",\"verbs\":[\"GET\",\"POST\"]},\"groups\":{\"type\":\"io.cozy.contacts.groups\",\"verbs\":[\"GET\"]},\"settings\":{\"description\":\"Required by the cozy-bar to display Claudy and know which applications are coming soon\",\"type\":\"io.cozy.settings\",\"verbs\":[\"GET\"]},\"oauth\":{\"description\":\"Required to display the cozy-desktop banner\",\"type\":\"io.cozy.oauth.clients\",\"verbs\":[\"GET\"]},\"reporting\":{\"description\":\"Allow to report unexpected errors to the support team\",\"type\":\"cc.cozycloud.sentry\",\"verbs\":[\"POST\"]},\"mail\":{\"description\":\"Send feedback emails to the support team\",\"type\":\"io.cozy.jobs\",\"verbs\":[\"POST\"],\"selector\":\"worker\",\"values\":[\"sendmail\"]}}}","import { combineReducers } from 'redux'\n\nimport modalReducer from './ModalManager'\n\nexport default combineReducers({ modal: modalReducer })\n\nexport { ModalManager, showModal } from './ModalManager'\n\nexport { default as getQueryParameter } from './QueryParameter'\nexport { default as BarContextProvider } from './BarContextProvider'\n","import React from 'react'\nimport classNames from 'classnames'\n\nimport { translate } from 'cozy-ui/react/I18n'\nimport { Spinner } from 'cozy-ui/react'\nimport palette from 'cozy-ui/react/palette'\n\nimport styles from '../styles/loading.styl'\n\nexport const Loading = ({\n  size = 'xxlarge',\n  loadingType,\n  noMargin = false,\n  middle = true\n}) => {\n  return (\n    <div data-test-id=\"loading\" className={classNames(styles['pho-loading'])}>\n      <Spinner\n        size={size}\n        loadingType={loadingType}\n        color={palette.dodgerBlue}\n        noMargin={noMargin}\n        middle={middle}\n      />\n    </div>\n  )\n}\n\nexport default translate()(Loading)\n","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-main-app_5a0af3714e77328d0c04b0d83712f645\",\n  \"use\": \"icon-main-app_5a0af3714e77328d0c04b0d83712f645-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"icon-main-app_5a0af3714e77328d0c04b0d83712f645\\\">\\n  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" transform=\\\"translate(0 3)\\\">\\n    <rect width=\\\"32\\\" height=\\\"26\\\" fill=\\\"#8EE39B\\\" rx=\\\"2\\\" />\\n    <path fill=\\\"#1EC737\\\" d=\\\"M0,20 L6.29028051,13.7097195 C6.68224776,13.3177522 7.31387329,13.3138733 7.70591205,13.7059121 L11,17 L19.2937851,8.7062149 C19.6838168,8.31618318 20.320971,8.32097101 20.7058543,8.70585426 L32,20 L32,24.0020869 C32,25.1055038 31.1107383,26 29.9982567,26 L2.00174332,26 C0.89621101,26 0,25.1017394 0,24.0020869 L0,20 Z\\\" />\\n    <circle cx=\\\"8\\\" cy=\\\"7\\\" r=\\\"3\\\" fill=\\\"#FFFFFF\\\" />\\n    <path stroke=\\\"#8EE39B\\\" d=\\\"M11,16 L5.5,21.5 L11,16 Z\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\n  </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import styles from '../../../styles/confirms.styl'\nimport classNames from 'classnames'\nimport React from 'react'\nimport Modal from 'cozy-ui/react/Modal'\n\nconst DeleteConfirm = ({ t, count, confirm, abort, related }) => {\n  let types = ['trash', 'restore', 'shared']\n  if (related === true) {\n    types.push('related')\n  }\n  const deleteConfirmationTexts = types.map(type => (\n    <p\n      className={classNames(styles['fil-confirm-text'], styles[`icon-${type}`])}\n      key={`key_delet_${type}`}\n    >\n      {t(`timeline.DeleteConfirm.${type}`, count)}\n    </p>\n  ))\n\n  return (\n    <Modal\n      title={t('timeline.DeleteConfirm.title', count)}\n      description={deleteConfirmationTexts}\n      secondaryType=\"secondary\"\n      secondaryText={t('timeline.DeleteConfirm.cancel')}\n      secondaryAction={abort}\n      primaryType=\"danger\"\n      primaryText={t('timeline.DeleteConfirm.delete')}\n      primaryAction={confirm}\n    />\n  )\n}\n\nexport default DeleteConfirm\n","import upload from '../ducks/upload'\nimport uiReducer from 'react-cozy-helpers'\n\nexport default {\n  upload,\n  ui: uiReducer\n}\n","import React, { Component } from 'react'\nimport {\n  ActionMenu,\n  Menu,\n  MenuButton,\n  MenuItem,\n  withBreakpoints\n} from 'cozy-ui/react/'\nimport { UserAvatar } from '../../sharing/components/Recipient'\nimport styles from 'drive/styles/actionmenu.styl'\n\nclass MenuAwareMobile extends Component {\n  state = {\n    active: false\n  }\n\n  toggle = () => {\n    this.setState({ active: !this.state.active })\n  }\n  render() {\n    const {\n      breakpoints: { isMobile },\n      children,\n      text,\n      buttonClassName,\n      name\n    } = this.props\n    if (isMobile) {\n      return (\n        <div>\n          <MenuButton\n            onClick={this.toggle}\n            text={text}\n            buttonClassName={buttonClassName}\n          />\n          {this.state.active && (\n            <ActionMenu onClose={() => this.toggle()}>\n              <MenuItem className={styles['fil-mobileactionmenu']}>\n                <UserAvatar name={name} size={'small'} />\n              </MenuItem>\n              {children}\n            </ActionMenu>\n          )}\n        </div>\n      )\n    }\n    return <Menu {...this.props} />\n  }\n}\n\nexport default withBreakpoints()(MenuAwareMobile)\n","const arrToObj = (obj = {}, [key, val = true]) => {\n  obj[key] = val\n  return obj\n}\n\nconst getQueryParameter = () =>\n  window.location.search\n    .substring(1)\n    .split('&')\n    .map(varval => varval.split('='))\n    .reduce(arrToObj, {})\n\nexport default getQueryParameter\n","import React, { Component } from 'react'\nimport { withRouter } from 'react-router'\nimport { Overlay, Viewer } from 'cozy-ui/transpiled/react'\n\nconst getParentPath = router => {\n  const url = router.location.pathname\n  return url.substring(0, url.lastIndexOf('/'))\n}\n\nclass PhotosViewer extends Component {\n  render() {\n    const { photos, params, router } = this.props\n    const currentIndex = photos.findIndex(p => p.id === params.photoId)\n    return (\n      <Overlay>\n        <Viewer\n          files={photos}\n          currentIndex={currentIndex}\n          onChangeRequest={nextPhoto =>\n            router.push({\n              pathname: `${getParentPath(router)}/${nextPhoto.id}`,\n              query: router.location.query\n            })\n          }\n          onCloseRequest={() =>\n            router.push({\n              pathname: getParentPath(router),\n              query: router.location.query\n            })\n          }\n        />\n      </Overlay>\n    )\n  }\n}\n\nexport default withRouter(PhotosViewer)\n","/* global cozy  */\nimport styles from '../styles/topbar.styl'\n\nimport React, { Component } from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { withBreakpoints } from 'cozy-ui/react'\nimport { withRouter } from 'react-router'\nimport PropTypes from 'prop-types'\nimport flow from 'lodash/flow'\n\nconst { BarCenter, BarRight, BarLeft } = cozy.bar\n\nconst KEYCODE_ENTER = 13\nconst KEYCODE_ESC = 27\n\nclass EditableAlbumName extends Component {\n  constructor(props) {\n    super(props)\n    this.ignoreBlurEvent = false // we'll ignore blur events if they are triggered by pressing enter or escape, to prevent `onEdit` from firing twice\n    this.inputElement = null\n  }\n\n  componentDidMount() {\n    if (this.inputElement !== null) {\n      this.inputElement.focus()\n      this.inputElement.select()\n    }\n  }\n\n  handleBlur = e => {\n    if (!this.ignoreBlurEvent && this.props.onEdit)\n      this.props.onEdit(\n        e.target.value.trim() !== '' ? e.target.value : this.props.albumName\n      )\n  }\n\n  handleKeyDown = e => {\n    if (e.keyCode === KEYCODE_ENTER && this.props.onEdit) {\n      this.ignoreBlurEvent = true\n      this.props.onEdit(e.target.value)\n    } else if (e.keyCode === KEYCODE_ESC && this.props.onEdit) {\n      this.ignoreBlurEvent = true\n      this.props.onEdit(this.props.albumName)\n    }\n  }\n\n  render() {\n    const { albumName } = this.props\n    return (\n      <input\n        type=\"text\"\n        defaultValue={albumName}\n        onKeyDown={this.handleKeyDown}\n        onBlur={this.handleBlur}\n        ref={elem => {\n          this.inputElement = elem\n        }}\n      />\n    )\n  }\n}\n\nEditableAlbumName.propTypes = {\n  albumName: PropTypes.string,\n  onEdit: PropTypes.func.isRequired\n}\n\nconst TopbarTitle = ({ children }) => (\n  <h2 data-test-id=\"pho-content-title\" className={styles['pho-content-title']}>\n    {children}\n  </h2>\n)\n\nconst BackToAlbumsButton = ({ onClick }) => (\n  <div\n    role=\"button\"\n    data-test-id=\"pho-content-album-previous\"\n    className={styles['pho-content-album-previous']}\n    onClick={onClick}\n  />\n)\n\nBackToAlbumsButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n}\n\nclass Topbar extends Component {\n  componentDidMount() {\n    const url = this.props.router.location.pathname\n    this.parentUrl = url.substring(0, url.lastIndexOf('/'))\n  }\n\n  renderTitle() {\n    const { t, viewName, albumName = '', onEdit, editing = false } = this.props\n    const isAlbumContent = viewName === 'albumContent'\n\n    if (!isAlbumContent) return t(`Nav.${viewName}`)\n    else if (editing)\n      return <EditableAlbumName albumName={albumName} onEdit={onEdit} />\n    else return albumName\n  }\n\n  render() {\n    const {\n      children,\n      viewName,\n      breakpoints: { isMobile },\n      router\n    } = this.props\n    const isAlbumContent = viewName === 'albumContent'\n    const title = <TopbarTitle>{this.renderTitle()}</TopbarTitle>\n    const responsiveTitle = isMobile ? <BarCenter>{title}</BarCenter> : title\n\n    const responsiveMenu = isMobile ? <BarRight>{children}</BarRight> : children\n\n    const backButton = (\n      <BackToAlbumsButton onClick={() => router.push(this.parentUrl)} />\n    )\n    const responsiveBackButton = isMobile ? (\n      <BarLeft>{backButton}</BarLeft>\n    ) : (\n      backButton\n    )\n\n    return (\n      <div className={styles['pho-content-header']}>\n        {isAlbumContent && responsiveBackButton}\n        {responsiveTitle}\n        {responsiveMenu}\n      </div>\n    )\n  }\n}\n\nTopbar.propTypes = {\n  viewName: PropTypes.string.isRequired,\n  albumName: PropTypes.string,\n  t: PropTypes.func.isRequired,\n  editing: PropTypes.bool,\n  onEdit: PropTypes.func,\n  breakpoints: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  children: PropTypes.node\n}\n\nTopbar.defaultProps = {\n  editing: false,\n  onEdit: () => {}\n}\n\nexport default flow(\n  withRouter,\n  withBreakpoints(),\n  translate()\n)(Topbar)\n","/* global localStorage */\n\nimport styles from './pushClient.styl'\n\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport React, { Component } from 'react'\nimport {\n  track,\n  isLinux,\n  isAndroid,\n  isIOS,\n  isClientAlreadyInstalled,\n  DESKTOP_BANNER\n} from '.'\nimport { Button, ButtonLink, Icon } from 'cozy-ui/react'\n\nimport Config from 'drive/config/config.json'\nimport localforage from 'localforage'\n\nclass BannerClient extends Component {\n  state = {\n    mustShow: false\n  }\n  constructor(props) {\n    super(props)\n    this.willUnmount = false\n  }\n\n  async componentDidMount() {\n    this.willUnmount = false\n    const seen = (await localforage.getItem(DESKTOP_BANNER)) || false\n    if (!seen) {\n      const mustSee = !(await isClientAlreadyInstalled())\n      if (mustSee && !this.willUnmount) {\n        this.setState({ mustShow: true })\n      }\n    }\n  }\n  componentWillUnmount() {\n    this.willUnmount = true\n  }\n\n  markAsSeen(element) {\n    localforage.setItem(DESKTOP_BANNER, true)\n    this.setState({ mustShow: false })\n    track(element)\n  }\n\n  render() {\n    if (Config.promoteDesktop.isActivated !== true || !this.state.mustShow)\n      return null\n    const { t } = this.props\n\n    const mobileLink = isIOS()\n      ? 'Nav.link-client-ios'\n      : isAndroid()\n        ? 'Nav.link-client-android'\n        : 'Nav.link-client'\n    const desktopLink = isLinux()\n      ? 'Nav.link-client'\n      : 'Nav.link-client-desktop'\n\n    return (\n      <div className={styles['coz-banner-client']}>\n        <ButtonLink\n          href={t(mobileLink)}\n          target=\"_blank\"\n          className={styles['coz-btn-clientMobile']}\n          onClick={() => {\n            this.markAsSeen('banner')\n          }}\n          label={t('Nav.btn-client-mobile')}\n        />\n        <div className={styles['coz-banner-text']}>\n          <figure>\n            <Icon icon=\"cozy\" width=\"44\" height=\"44\" />\n          </figure>\n          <span>{t('Nav.banner-txt-client')}</span>\n          <ButtonLink\n            href={t(desktopLink)}\n            target=\"_blank\"\n            theme=\"alpha\"\n            onClick={() => {\n              this.markAsSeen('banner')\n            }}\n            label={t('Nav.banner-btn-client')}\n          />\n        </div>\n        <Button\n          theme=\"close\"\n          extension=\"narrow\"\n          className={styles['close-banner']}\n          onClick={() => {\n            this.markAsSeen('close')\n          }}\n          icon={<Icon icon=\"cross\" width=\"24\" height=\"24\" />}\n          iconOnly\n          label={t('SelectionBar.close')}\n        />\n      </div>\n    )\n  }\n}\n\nexport default translate()(BannerClient)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container--3-RCo\",\"suggestionsContainer\":\"suggestionsContainer--3lRrx\",\"suggestionsContainerOpen\":\"suggestionsContainerOpen--3Y523\",\"input\":\"input--2DlOl\",\"suggestionsList\":\"suggestionsList--35tTI\",\"suggestion\":\"suggestion--iMlMu\",\"suggestionHighlighted\":\"suggestionHighlighted--3v0My\",\"recipientsContainer\":\"recipientsContainer--1GWdl\",\"recipientChip\":\"recipientChip--1HV-h\",\"removeRecipient\":\"removeRecipient--2dtVM\"};","import React, { Component } from 'react'\nimport Autosuggest from 'react-autosuggest'\n\nimport { Icon, Spinner } from 'cozy-ui/react'\nimport palette from 'cozy-ui/react/palette'\n\nimport styles from 'sharing/components/autosuggest.styl'\nimport BoldCross from 'sharing/assets/icons/icon-cross-bold.svg'\n\nimport { Contact } from 'models'\nimport {\n  cozyUrlMatch,\n  emailMatch,\n  groupNameMatch\n} from 'sharing/suggestionMatchers'\nimport ContactSuggestion from 'sharing/components/ContactSuggestion'\n\nexport default class ShareAutocomplete extends Component {\n  state = {\n    inputValue: '',\n    suggestions: []\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.props.contactsAndGroups.length !== prevProps.contactsAndGroups.length\n    ) {\n      this.onSuggestionsFetchRequested({\n        value: this.state.inputValue\n      })\n    }\n  }\n\n  computeSuggestions(value) {\n    const inputValue = value.trim().toLowerCase()\n    return inputValue.length === 0\n      ? []\n      : this.props.contactsAndGroups.filter(\n          contactOrGroup =>\n            groupNameMatch(inputValue, contactOrGroup) ||\n            emailMatch(inputValue, contactOrGroup) ||\n            cozyUrlMatch(inputValue, contactOrGroup)\n        )\n  }\n\n  onSuggestionsFetchRequested = ({ value }) => {\n    this.setState(state => ({\n      ...state,\n      suggestions: this.computeSuggestions(value)\n    }))\n  }\n\n  onSuggestionsClearRequested = () => {\n    this.setState(state => ({ ...state, suggestions: [] }))\n  }\n\n  onChange = (event, { newValue, method }) => {\n    if (typeof newValue !== 'object') {\n      this.setState(state => ({ ...state, inputValue: newValue }))\n    } else if (method === 'click' || method === 'enter') {\n      // A suggestion has been picked\n      this.onPick(newValue)\n    }\n  }\n\n  onKeyPress = event => {\n    // The user wants to add an unknown email\n    if (\n      ((event.key === 'Enter' || event.keyCode === 13) &&\n        this.state.inputValue !== '') ||\n      ((event.key === 'Space' || event.keyCode === 32) &&\n        /^.+@.+/.test(this.state.inputValue))\n    ) {\n      this.onPick({ email: this.state.inputValue })\n    }\n  }\n\n  onFocus = () => {\n    this.props.onFocus()\n  }\n\n  onBlur = (event, { highlightedSuggestion }) => {\n    if (highlightedSuggestion) {\n      this.props.onPick(highlightedSuggestion)\n      this.setState(state => ({ ...state, inputValue: '' }))\n    } else if (\n      this.state.inputValue !== '' &&\n      this.state.inputValue.match(/\\S+@\\S+/)\n    ) {\n      this.props.onPick({ email: this.state.inputValue })\n      this.setState(state => ({ ...state, inputValue: '' }))\n    }\n  }\n\n  onPick = value => {\n    this.props.onPick(value)\n    this.setState(state => ({ ...state, inputValue: '' }))\n    setTimeout(() => this.input.focus(), 1) // don't ask...\n  }\n\n  onRemove = value => {\n    this.props.onRemove(value)\n    setTimeout(() => this.input.focus(), 1)\n  }\n\n  renderInput(inputProps) {\n    const { loading, recipients } = this.props\n    return (\n      <div className={styles['recipientsContainer']}>\n        {recipients.map((recipient, idx) => {\n          const value = Contact.getDisplayName(recipient)\n          return (\n            <div\n              className={styles['recipientChip']}\n              key={`key_recipient_${idx}`}\n            >\n              <span>{value}</span>\n              <button\n                className={styles['removeRecipient']}\n                onClick={() => this.onRemove(recipient)}\n              >\n                <Icon icon={BoldCross} width=\"16\" height=\"16\" />\n              </button>\n            </div>\n          )\n        })}\n        <input {...inputProps} onKeyPress={this.onKeyPress} />\n        {loading && (\n          <Spinner\n            color={palette.dodgerBlue}\n            className=\"u-flex u-flex-items-center\"\n          />\n        )}\n      </div>\n    )\n  }\n\n  render() {\n    const { inputValue, suggestions } = this.state\n    const { contactsAndGroups, placeholder } = this.props\n    return (\n      <Autosuggest\n        ref={self => {\n          this.input = self ? self.input : null\n        }}\n        theme={styles}\n        suggestions={suggestions.slice(0, 20)}\n        getSuggestionValue={contact => contact}\n        onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n        onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n        renderSuggestion={contactOrGroup => (\n          <ContactSuggestion\n            contacts={contactsAndGroups.filter(\n              item => item._type === Contact.doctype\n            )}\n            contactOrGroup={contactOrGroup}\n          />\n        )}\n        renderInputComponent={props => this.renderInput(props)}\n        highlightFirstSuggestion\n        inputProps={{\n          onFocus: this.onFocus,\n          onChange: this.onChange,\n          onBlur: this.onBlur,\n          value: inputValue,\n          type: 'email',\n          placeholder\n        }}\n      />\n    )\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { ButtonLink } from 'cozy-ui/react'\nimport styles from 'components/Button/index.styl'\nimport getHomeLinkHref from 'components/Button/getHomeLinkHref'\nimport CozyHomeLinkIcon from 'components/Button/CozyHomeLinkIcon'\nconst CozyHomeLink = ({ from, embedInCozyBar = false, t, size, className }) => (\n  <ButtonLink\n    label={t('Share.create-cozy')}\n    icon={CozyHomeLinkIcon}\n    className={embedInCozyBar ? styles['bar-homelink'] : className}\n    href={getHomeLinkHref(from)}\n    size={size}\n  />\n)\n\nCozyHomeLink.propTypes = {\n  from: PropTypes.string,\n  embedInCozyBar: PropTypes.bool,\n  t: PropTypes.func.isRequired,\n  size: PropTypes.oneOf(['tiny', 'small', 'large', 'normal'])\n}\n\nCozyHomeLink.defaultProps = {\n  from: '',\n  size: 'normal'\n}\n\nexport default CozyHomeLink\n","import React from 'react'\nimport cx from 'classnames'\nimport { RecipientWithoutStatus, RecipientPlusX } from './Recipient'\n\nimport styles from './recipient.styl'\n\nconst MAX_DISPLAYED_RECIPIENTS = 2\n\nconst WhoHasAccessLight = ({ recipients, className }) => (\n  <div className={cx(styles['recipients-list-light'], className)}>\n    {recipients.slice(0, MAX_DISPLAYED_RECIPIENTS).map((recipient, index) => (\n      <RecipientWithoutStatus {...recipient} key={`key_recipient__${index}`} />\n    ))}\n    {recipients.length > MAX_DISPLAYED_RECIPIENTS && (\n      <RecipientPlusX\n        extraRecipients={recipients.slice(MAX_DISPLAYED_RECIPIENTS)}\n      />\n    )}\n  </div>\n)\n\nexport default WhoHasAccessLight\n","import React, { Component } from 'react'\nimport classNames from 'classnames'\nimport { connect } from 'react-redux'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { Icon, Spinner } from 'cozy-ui/transpiled/react'\nimport palette from 'cozy-ui/stylus/settings/palette.json'\nimport { CozyFile } from 'models'\nimport styles from './styles.styl'\nimport {\n  getUploadQueue,\n  getProcessed,\n  getSuccessful,\n  purgeUploadQueue\n} from '.'\n\nconst Pending = translate()(props => (\n  <span className={styles['item-pending']}>\n    {props.t('UploadQueue.item.pending')}\n  </span>\n))\n\nconst Item = translate()(({ file, status }) => {\n  const { filename, extension } = CozyFile.splitFilename(file)\n  let statusIcon\n  switch (status) {\n    case 'loading':\n      statusIcon = (\n        <Spinner className=\"u-ml-half\" color={palette['dodgerBlue']} />\n      )\n      break\n    case 'cancel':\n      statusIcon = (\n        <Icon className=\"u-ml-half\" icon=\"cross\" color={palette['monza']} />\n      )\n      break\n    case 'failed':\n    case 'conflict':\n    case 'network':\n      statusIcon = (\n        <Icon className=\"u-ml-half\" icon=\"warning\" color={palette['monza']} />\n      )\n      break\n    case 'loaded':\n      statusIcon = (\n        <Icon className=\"u-ml-half\" icon=\"check\" color={palette['emerald']} />\n      )\n      break\n    case 'pending':\n    default:\n      statusIcon = <Pending />\n      break\n  }\n  return (\n    <div\n      className={classNames(styles['upload-queue-item'], {\n        [styles['upload-queue-item--done']]: status === 'loaded',\n        [styles['upload-queue-item--error']]:\n          status === 'failed' || status === 'conflict'\n      })}\n    >\n      <div\n        className={classNames(\n          styles['item-cell'],\n          styles['item-file'],\n          styles['item-image']\n        )}\n      >\n        <div>\n          {filename}\n          {extension && <span className={styles['item-ext']}>{extension}</span>}\n        </div>\n      </div>\n      <div className={styles['item-status']}>{statusIcon}</div>\n    </div>\n  )\n})\n\nconst InProgressHeader = translate()(({ t, total, done }) => (\n  <div className={styles['upload-queue-header-inner']}>\n    <span className=\"coz-desktop\">\n      {t('UploadQueue.header', { smart_count: total })}\n    </span>\n    <span className={'u-hide--desk'}>\n      {t('UploadQueue.header_mobile', { done, total })}\n    </span>\n  </div>\n))\n\nconst FinishedHeader = translate()(({ t, total, successful, onClose }) => (\n  <div\n    data-test-id=\"upload-queue-success\"\n    className={styles['upload-queue-header-inner']}\n  >\n    <span>{t('UploadQueue.header_done', { done: successful, total })}</span>\n    <button className={classNames(styles['btn-close'])} onClick={onClose}>\n      {t('UploadQueue.close')}\n    </button>\n  </div>\n))\n\nclass UploadQueue extends Component {\n  state = {\n    collapsed: false\n  }\n\n  toggleCollapsed = () => {\n    this.setState(state => ({ collapsed: !state.collapsed }))\n  }\n\n  render() {\n    const { queue, doneCount, successCount, purgeQueue } = this.props\n    const { collapsed } = this.state\n    return (\n      <div\n        data-test-id=\"upload-queue\"\n        className={classNames(styles['upload-queue'], {\n          [styles['upload-queue--visible']]: queue.length !== 0,\n          [styles['upload-queue--collapsed']]: collapsed\n        })}\n      >\n        <h4\n          className={styles['upload-queue-header']}\n          onDoubleClick={this.toggleCollapsed}\n        >\n          {doneCount < queue.length ? (\n            <InProgressHeader total={queue.length} done={doneCount} />\n          ) : (\n            <FinishedHeader\n              total={queue.length}\n              successful={successCount}\n              onClose={purgeQueue}\n            />\n          )}\n        </h4>\n        <progress\n          className={styles['upload-queue-progress']}\n          value={doneCount}\n          max={queue.length}\n        />\n        <div className={styles['upload-queue-content']}>\n          <div className={styles['upload-queue-list']}>\n            {queue.map((item, index) => (\n              <Item\n                file={item.file}\n                status={item.status}\n                key={`file_${index}`}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  queue: getUploadQueue(state),\n  doneCount: getProcessed(state).length,\n  successCount: getSuccessful(state).length\n})\nconst mapDispatchToProps = dispatch => ({\n  purgeQueue: () => dispatch(purgeUploadQueue())\n})\nexport default translate()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(UploadQueue)\n)\n","import styles from '../../../styles/createAlbumForm.styl'\n\nimport React, { Component } from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { Button } from 'cozy-ui/react'\n\nimport classNames from 'classnames'\n\nexport class CreateAlbumForm extends Component {\n  constructor() {\n    super()\n    this.state = {\n      name: '',\n      isSubmitDisabled: true,\n      isBusy: false,\n      hasError: false\n    }\n  }\n\n  reset() {\n    this.setState({\n      name: '',\n      isSubmitDisabled: true,\n      isBusy: false,\n      hasError: false\n    })\n  }\n\n  onSubmit(event, callback) {\n    event.preventDefault()\n    this.setState({ isBusy: true })\n    return callback(this.state.name).then(\n      () => this.reset(),\n      () =>\n        this.setState({\n          hasError: true,\n          isBusy: false\n        })\n    )\n  }\n\n  onNameChange(event) {\n    const name = event.target.value\n    this.setState({\n      name: name,\n      isSubmitDisabled: !name.trim().length,\n      hasError: false\n    })\n  }\n\n  render() {\n    const { t, onSubmitNewAlbum } = this.props\n    return (\n      <form\n        className={styles['pho-create-album-form']}\n        onSubmit={event => this.onSubmit(event, onSubmitNewAlbum)}\n      >\n        <label className={styles['coz-create-album-label']}>\n          {t('Albums.create.inline_form.create_label')}\n        </label>\n        <div className={styles['coz-inline-form']}>\n          <input\n            className={classNames(\n              styles['coz-input-text'],\n              this.state.hasError && styles['error']\n            )}\n            type=\"text\"\n            name=\"album-name\"\n            onInput={event => this.onNameChange(event)}\n            disabled={this.state.isBusy}\n            placeholder={t('Albums.create.inline_form.placeholder')}\n            value={this.state.name}\n          />\n          <Button\n            className={styles['create-button']}\n            disabled={this.state.isSubmitDisabled || this.state.isBusy}\n            aria-busy={this.state.isBusy}\n            label={t('Albums.create.inline_form.create_button')}\n          />\n        </div>\n      </form>\n    )\n  }\n}\n\nexport default translate()(CreateAlbumForm)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"share-modal-content\":\"share-modal-content--1SlxN\",\"coz-form\":\"coz-form--2jtJC\",\"coz-form-group\":\"coz-form-group--1bFva\",\"coz-form-desc\":\"coz-form-desc--JrEED\",\"coz-form-label\":\"coz-form-label--3Zm6p\",\"coz-form-label--error\":\"coz-form-label--error--2KzmX\",\"coz-form-errors\":\"coz-form-errors--1nNWc\",\"coz-form-controls\":\"coz-form-controls--1RJGg\",\"coz-form-controls--full\":\"coz-form-controls--full--2-y4G\",\"coz-form-controls--dispatch\":\"coz-form-controls--dispatch--2TjNA\",\"error\":\"error--3q85L\",\"permission-required-popin\":\"permission-required-popin--3ZT7U\",\"divider\":\"divider--3ACWO\",\"share-bylink-header\":\"share-bylink-header--2919D\",\"share-bylink-header-dot\":\"share-bylink-header-dot--1TAFX\",\"share-bylink-header-creating\":\"share-bylink-header-creating--2F2Df\",\"share-bylink-header-copybtn\":\"share-bylink-header-copybtn--397lg\",\"share-bylink-desc\":\"share-bylink-desc--2lsfE\",\"share-byemail-onlybylink\":\"share-byemail-onlybylink--3A-9J\",\"share-moral-override-bottom\":\"share-moral-override-bottom--1I3dU\",\"share-modal-secondary\":\"share-modal-secondary--3Y04a\",\"share-modal-margins\":\"share-modal-margins--yhQBn\",\"share-modal-separator\":\"share-modal-separator--JJuRH\",\"share-type-control\":\"share-type-control--3IS3y\",\"select-wrapper\":\"select-wrapper--3vfxZ\",\"select-option\":\"select-option--O5o86\",\"select-option-label\":\"select-option-label--314tl\",\"select-option-desc\":\"select-option-desc--1JNRs\",\"input-dual\":\"input-dual--1iSDa\",\"btn-copy\":\"btn-copy--1_EQX\",\"permission-required-popin-close\":\"permission-required-popin-close--wbc77\",\"permission-required-popin-accept\":\"permission-required-popin-accept--3gyRJ\",\"share-details-created\":\"share-details-created--3qeE6\",\"share-details-perm\":\"share-details-perm--1bWoi\",\"share-details-perm-desc\":\"share-details-perm-desc--2uJr3\",\"spin\":\"spin--260Kl\",\"shake\":\"shake--2b0j3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pho-section\":\"pho-section--aOGQ8\",\"pho-photo-wrapper\":\"pho-photo-wrapper--34Af_\",\"pho-section-header\":\"pho-section-header--3xCwP\",\"pho-photo\":\"pho-photo--1RccV\",\"pho-photo-item\":\"pho-photo-item--1uvPt\",\"pho-photo-select\":\"pho-photo-select--2_YlY\",\"pho-photo--selected\":\"pho-photo--selected--3CHFZ\",\"pho-section--has-selection\":\"pho-section--has-selection--2A-rj\",\"pho-list-morebutton\":\"pho-list-morebutton--1HHd8\",\"spin\":\"spin--3HNuy\",\"shake\":\"shake--p49Dg\"};","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport cx from 'classnames'\nimport Modal, { ModalContent } from 'cozy-ui/react/Modal'\n\nimport styles from 'sharing/share.styl'\n\nimport { contactsResponseType, groupsResponseType } from 'sharing/propTypes'\nimport { default as DumbShareByLink } from 'sharing/components/ShareByLink'\nimport { default as DumbShareByEmail } from 'sharing/components/ShareByEmail'\nimport WhoHasAccess from 'sharing/components/WhoHasAccess'\n\nrequire('url-polyfill')\n\nexport default class ShareModal extends Component {\n  static contextTypes = {\n    t: PropTypes.func.isRequired\n  }\n  render() {\n    const { t } = this.context\n    const {\n      document,\n      isOwner,\n      sharingDesc,\n      contacts,\n      groups,\n      createContact,\n      link,\n      recipients,\n      documentType = 'Document',\n      needsContactsPermission,\n      hasSharedParent,\n      hasSharedChild,\n      onClose,\n      onShare,\n      onRevoke,\n      onShareByLink,\n      onRevokeLink\n    } = this.props\n    return (\n      <Modal\n        title={t(`${documentType}.share.title`)}\n        dismissAction={onClose}\n        into=\"body\"\n        size=\"small\"\n        spacing=\"small\"\n        mobileFullscreen\n      >\n        {(hasSharedParent || hasSharedChild) && (\n          <div className={styles['share-byemail-onlybylink']}>\n            {t(`${documentType}.share.shareByEmail.onlyByLink`, {\n              type: t(\n                `${documentType}.share.shareByEmail.type.${\n                  document.type === 'directory' ? 'folder' : 'file'\n                }`\n              )\n            })}{' '}\n            <strong>\n              {t(\n                `${documentType}.share.shareByEmail.${\n                  hasSharedParent ? 'hasSharedParent' : 'hasSharedChild'\n                }`\n              )}\n            </strong>\n          </div>\n        )}\n        <ModalContent\n          className={cx(\n            styles['share-modal-content'],\n            styles['share-moral-override-bottom']\n          )}\n        >\n          {documentType !== 'Albums' &&\n            !hasSharedParent &&\n            !hasSharedChild && (\n              <DumbShareByEmail\n                currentRecipients={recipients}\n                document={document}\n                documentType={documentType}\n                sharingDesc={sharingDesc}\n                contacts={contacts}\n                groups={groups}\n                createContact={createContact}\n                onShare={onShare}\n                needsContactsPermission={needsContactsPermission}\n              />\n            )}\n          <div className={styles['share-modal-separator']} />\n          <div className={styles['share-modal-secondary']}>\n            <div className={cx(styles['share-modal-margins'], 'u-pb-1')}>\n              <DumbShareByLink\n                document={document}\n                documentType={documentType}\n                checked={link !== null}\n                link={link}\n                onEnable={onShareByLink}\n                onDisable={onRevokeLink}\n              />\n              {documentType !== 'Albums' && (\n                <WhoHasAccess\n                  className={'u-mt-1'}\n                  isOwner={isOwner}\n                  recipients={recipients}\n                  document={document}\n                  documentType={documentType}\n                  onRevoke={onRevoke}\n                />\n              )}\n            </div>\n          </div>\n        </ModalContent>\n      </Modal>\n    )\n  }\n}\n\nShareModal.propTypes = {\n  document: PropTypes.object.isRequired,\n  isOwner: PropTypes.bool,\n  sharingDesc: PropTypes.string,\n  contacts: contactsResponseType.isRequired,\n  groups: groupsResponseType.isRequired,\n  createContact: PropTypes.func.isRequired,\n  recipients: PropTypes.array.isRequired,\n  link: PropTypes.string,\n  documentType: PropTypes.string,\n  needsContactsPermission: PropTypes.bool,\n  hasSharedParent: PropTypes.bool,\n  hasSharedChild: PropTypes.bool,\n  onClose: PropTypes.func.isRequired,\n  onShare: PropTypes.func.isRequired,\n  onRevoke: PropTypes.func.isRequired,\n  onShareByLink: PropTypes.func.isRequired,\n  onRevokeLink: PropTypes.func.isRequired\n}\n","const getHomeLinkHref = from =>\n  `https://manager.cozycloud.cc/cozy/create${\n    from ? `?pk_campaign=${encodeURIComponent(from)}` : '?'\n  }&pk_kwd=cozy`\n\nexport default getHomeLinkHref\n","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-image-broken_a4fd70a7dc9c96a1d21491390660382c\",\n  \"use\": \"icon-image-broken_a4fd70a7dc9c96a1d21491390660382c-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"icon-image-broken_a4fd70a7dc9c96a1d21491390660382c\\\">\\n  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" transform=\\\"translate(0 2)\\\">\\n    <rect width=\\\"32\\\" height=\\\"28\\\" fill=\\\"#FDD5D5\\\" rx=\\\"2\\\" />\\n    <path fill=\\\"#F52D2D\\\" d=\\\"M24,20 L13,15 L19.2902805,8.70971949 C19.6822478,8.31775224 20.3203148,8.32031476 20.7062149,8.7062149 L29,17 L24,20 Z\\\" />\\n    <path fill=\\\"#F52D2D\\\" d=\\\"M0,22 L6.29028051,15.7097195 C6.68224776,15.3177522 7.31387329,15.3138733 7.70591205,15.7059121 L11,19 L15.0233154,14.9766846 L24,19 L27.2486572,17.2486572 L32,22 L32,26.0020869 C32,27.1055038 31.1107383,28 29.9982567,28 L2.00174332,28 C0.89621101,28 0,27.1017394 0,26.0020869 L0,22 Z\\\" />\\n    <circle cx=\\\"8\\\" cy=\\\"7\\\" r=\\\"3\\\" fill=\\\"#FFFFFF\\\" />\\n    <path stroke=\\\"#FDD5D5\\\" d=\\\"M11,18.3000031 L5.5,23.8000031 L11,18.3000031 Z\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\n    <polyline stroke=\\\"#FFFFFF\\\" stroke-width=\\\"2\\\" points=\\\"0 17 8 13 24 20 32 16\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\n  </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","// extracted by mini-css-extract-plugin\nmodule.exports = {\"upload-queue\":\"upload-queue--2RXFj\",\"upload-queue--visible\":\"upload-queue--visible--frmGj\",\"upload-queue-header\":\"upload-queue-header--Vz871\",\"upload-queue-header-inner\":\"upload-queue-header-inner--1AQpy\",\"btn-close\":\"btn-close--32K_q\",\"upload-queue-progress\":\"upload-queue-progress--2O2Rw\",\"upload-queue-content\":\"upload-queue-content--UNBUz\",\"upload-queue--collapsed\":\"upload-queue--collapsed--nIVVP\",\"upload-queue-list\":\"upload-queue-list--2dzTR\",\"upload-queue-item--error\":\"upload-queue-item--error--3UNkr\",\"upload-queue-item--done\":\"upload-queue-item--done--23Ps1\",\"upload-queue-item\":\"upload-queue-item--2oTRx\",\"item-cell\":\"item-cell--1mZJx\",\"item-file\":\"item-file--24emt\",\"item-ext\":\"item-ext--3vgYK\",\"item-image\":\"item-image--wp0ZG\",\"item-status\":\"item-status--2Azg6\",\"item-pending\":\"item-pending--wp4pw\",\"spin\":\"spin--3291m\",\"shake\":\"shake--eSk8B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pho-create-album-form\":\"pho-create-album-form--xgUhP\",\"error\":\"error--2VcpR\",\"coz-create-album-label\":\"coz-create-album-label--2zpY4\",\"coz-inline-form\":\"coz-inline-form--3COco\",\"coz-input-text\":\"coz-input-text--ZuuYG\",\"create-button\":\"create-button--1cJgR\",\"spin\":\"spin--1T4Vk\",\"shake\":\"shake--3cnvd\"};","import styles from '../styles/confirms.styl'\nimport classNames from 'classnames'\n\nimport React from 'react'\nimport Modal from 'cozy-ui/react/Modal'\n\nconst DestroyConfirm = ({ t, confirm, abort }) => {\n  const confirmationTexts = ['forbidden', 'eye', 'link'].map(type => (\n    <p\n      className={classNames(styles['fil-confirm-text'], styles[`icon-${type}`])}\n      key={type}\n    >\n      {t(`destroyconfirmation.${type}`)}\n    </p>\n  ))\n\n  return (\n    <Modal\n      title={t('destroyconfirmation.title')}\n      description={confirmationTexts}\n      secondaryType=\"secondary\"\n      secondaryText={t('destroyconfirmation.cancel')}\n      secondaryAction={abort}\n      primaryType=\"danger\"\n      primaryText={t('destroyconfirmation.delete')}\n      primaryAction={confirm}\n    />\n  )\n}\n\nexport default DestroyConfirm\n","import cx from 'classnames'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { Icon, FileInput } from 'cozy-ui/react'\n\nimport button from '../styles/toolbar.styl'\n\nconst UploadButton = ({ label, inMenu, disabled, onUpload, className }) => (\n  <FileInput\n    accept=\"image/*\"\n    className={cx(className, { [`${button['c-btn']}`]: !inMenu })}\n    data-test-id=\"upload-btn\"\n    disabled={disabled}\n    multiple\n    onChange={onUpload}\n    value={[]} // always erase the value to be able to re-upload the same file\n  >\n    <span>\n      {!inMenu && <Icon icon=\"upload\" />}\n      <span>{label}</span>\n    </span>\n  </FileInput>\n)\n\nUploadButton.propTypes = {\n  label: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  inMenu: PropTypes.bool,\n  onUpload: PropTypes.func.isRequired,\n  className: PropTypes.string.isRequired\n}\n\nUploadButton.defaultProps = {\n  disabled: false,\n  inMenu: false\n}\n\nexport default UploadButton\n","var map = {\n\t\"./_lib/build_formatting_tokens_reg_exp/index.js\": \"kOWh\",\n\t\"./ar/build_distance_in_words_locale/index.js\": \"XxX6\",\n\t\"./ar/build_format_locale/index.js\": \"alis\",\n\t\"./ar/index.js\": \"EDRf\",\n\t\"./be/build_distance_in_words_locale/index.js\": \"LQ09\",\n\t\"./be/build_format_locale/index.js\": \"kj7F\",\n\t\"./be/index.js\": \"YEhR\",\n\t\"./bg/build_distance_in_words_locale/index.js\": \"7K3h\",\n\t\"./bg/build_format_locale/index.js\": \"RrdL\",\n\t\"./bg/index.js\": \"isx8\",\n\t\"./ca/build_distance_in_words_locale/index.js\": \"wqqj\",\n\t\"./ca/build_format_locale/index.js\": \"qcV0\",\n\t\"./ca/index.js\": \"Vwa+\",\n\t\"./cs/build_distance_in_words_locale/index.js\": \"ZKDM\",\n\t\"./cs/build_format_locale/index.js\": \"ipyF\",\n\t\"./cs/index.js\": \"dvhP\",\n\t\"./da/build_distance_in_words_locale/index.js\": \"2Mgc\",\n\t\"./da/build_format_locale/index.js\": \"Gned\",\n\t\"./da/index.js\": \"7ur/\",\n\t\"./de/build_distance_in_words_locale/index.js\": \"5IWf\",\n\t\"./de/build_format_locale/index.js\": \"THCn\",\n\t\"./de/index.js\": \"bgw5\",\n\t\"./el/build_distance_in_words_locale/index.js\": \"o/GB\",\n\t\"./el/build_format_locale/index.js\": \"8T9h\",\n\t\"./el/index.js\": \"dH0v\",\n\t\"./en/build_distance_in_words_locale/index.js\": \"LZbM\",\n\t\"./en/build_format_locale/index.js\": \"6DAA\",\n\t\"./en/index.js\": \"Us+F\",\n\t\"./eo/build_distance_in_words_locale/index.js\": \"qrnn\",\n\t\"./eo/build_format_locale/index.js\": \"Bl15\",\n\t\"./eo/index.js\": \"UB7v\",\n\t\"./es/build_distance_in_words_locale/index.js\": \"GEfZ\",\n\t\"./es/build_format_locale/index.js\": \"O+zC\",\n\t\"./es/index.js\": \"/S0t\",\n\t\"./fi/build_distance_in_words_locale/index.js\": \"VHtQ\",\n\t\"./fi/build_format_locale/index.js\": \"Oydx\",\n\t\"./fi/index.js\": \"ndVD\",\n\t\"./fil/build_distance_in_words_locale/index.js\": \"uq4p\",\n\t\"./fil/build_format_locale/index.js\": \"d7hw\",\n\t\"./fil/index.js\": \"pNfm\",\n\t\"./fr/build_distance_in_words_locale/index.js\": \"IzMR\",\n\t\"./fr/build_format_locale/index.js\": \"I3Zg\",\n\t\"./fr/index.js\": \"LKA2\",\n\t\"./hr/build_distance_in_words_locale/index.js\": \"DPvn\",\n\t\"./hr/build_format_locale/index.js\": \"puw3\",\n\t\"./hr/index.js\": \"L9Jq\",\n\t\"./hu/build_distance_in_words_locale/index.js\": \"w2RQ\",\n\t\"./hu/build_format_locale/index.js\": \"/0iD\",\n\t\"./hu/index.js\": \"Nm+E\",\n\t\"./id/build_distance_in_words_locale/index.js\": \"JbvB\",\n\t\"./id/build_format_locale/index.js\": \"0wlw\",\n\t\"./id/index.js\": \"A6C3\",\n\t\"./is/build_distance_in_words_locale/index.js\": \"qzMC\",\n\t\"./is/build_format_locale/index.js\": \"S3yD\",\n\t\"./is/index.js\": \"N4bE\",\n\t\"./it/build_distance_in_words_locale/index.js\": \"MDEp\",\n\t\"./it/build_format_locale/index.js\": \"aUJd\",\n\t\"./it/index.js\": \"hmb4\",\n\t\"./ja/build_distance_in_words_locale/index.js\": \"nNvt\",\n\t\"./ja/build_format_locale/index.js\": \"buui\",\n\t\"./ja/index.js\": \"uAXs\",\n\t\"./ko/build_distance_in_words_locale/index.js\": \"oEw+\",\n\t\"./ko/build_format_locale/index.js\": \"9SQf\",\n\t\"./ko/index.js\": \"iW8+\",\n\t\"./mk/build_distance_in_words_locale/index.js\": \"nmwZ\",\n\t\"./mk/build_format_locale/index.js\": \"htxJ\",\n\t\"./mk/index.js\": \"GzBU\",\n\t\"./nb/build_distance_in_words_locale/index.js\": \"SL1f\",\n\t\"./nb/build_format_locale/index.js\": \"CJ5F\",\n\t\"./nb/index.js\": \"73vv\",\n\t\"./nl/build_distance_in_words_locale/index.js\": \"Uyu0\",\n\t\"./nl/build_format_locale/index.js\": \"doCD\",\n\t\"./nl/index.js\": \"hCQt\",\n\t\"./pl/build_distance_in_words_locale/index.js\": \"FUBD\",\n\t\"./pl/build_format_locale/index.js\": \"nOYf\",\n\t\"./pl/index.js\": \"B6yL\",\n\t\"./pt/build_distance_in_words_locale/index.js\": \"aTPA\",\n\t\"./pt/build_format_locale/index.js\": \"TTT0\",\n\t\"./pt/index.js\": \"gdks\",\n\t\"./ro/build_distance_in_words_locale/index.js\": \"gI+A\",\n\t\"./ro/build_format_locale/index.js\": \"njjO\",\n\t\"./ro/index.js\": \"r2yp\",\n\t\"./ru/build_distance_in_words_locale/index.js\": \"KmPx\",\n\t\"./ru/build_format_locale/index.js\": \"UUBw\",\n\t\"./ru/index.js\": \"nz/o\",\n\t\"./sk/build_distance_in_words_locale/index.js\": \"q2Bs\",\n\t\"./sk/build_format_locale/index.js\": \"9sxn\",\n\t\"./sk/index.js\": \"Wqan\",\n\t\"./sl/build_distance_in_words_locale/index.js\": \"mlv2\",\n\t\"./sl/build_format_locale/index.js\": \"vHkZ\",\n\t\"./sl/index.js\": \"KYSo\",\n\t\"./sr/build_distance_in_words_locale/index.js\": \"LlkS\",\n\t\"./sr/build_format_locale/index.js\": \"RhjJ\",\n\t\"./sr/index.js\": \"7mU3\",\n\t\"./sv/build_distance_in_words_locale/index.js\": \"UNBN\",\n\t\"./sv/build_format_locale/index.js\": \"zTNB\",\n\t\"./sv/index.js\": \"hxgj\",\n\t\"./th/build_distance_in_words_locale/index.js\": \"XAGa\",\n\t\"./th/build_format_locale/index.js\": \"We2s\",\n\t\"./th/index.js\": \"Pk+z\",\n\t\"./tr/build_distance_in_words_locale/index.js\": \"aFZF\",\n\t\"./tr/build_format_locale/index.js\": \"jh7A\",\n\t\"./tr/index.js\": \"3ZWG\",\n\t\"./zh_cn/build_distance_in_words_locale/index.js\": \"KdB7\",\n\t\"./zh_cn/build_format_locale/index.js\": \"l4EP\",\n\t\"./zh_cn/index.js\": \"8tMq\",\n\t\"./zh_tw/build_distance_in_words_locale/index.js\": \"vyyr\",\n\t\"./zh_tw/build_format_locale/index.js\": \"uYH7\",\n\t\"./zh_tw/index.js\": \"QPlQ\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"nw0P\";","/* global cozy __DEVELOPMENT__ */\nimport 'cozy-ui/transpiled/react/stylesheet.css'\nimport 'photos/styles/main'\n\nimport React from 'react'\nimport { render } from 'react-dom'\nimport { compose, createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { createLogger } from 'redux-logger'\nimport { Router, hashHistory } from 'react-router'\nimport CozyClient, { CozyProvider } from 'cozy-client'\nimport { I18n } from 'cozy-ui/react/I18n'\n\nimport appReducers from 'photos/reducers'\nimport AppRoute from 'photos/components/AppRoute'\nimport {\n  shouldEnableTracking,\n  getTracker,\n  createTrackerMiddleware\n} from 'cozy-ui/react/helpers/tracker'\n\nimport { configureReporter, setCozyUrl } from 'drive/lib/reporter'\nimport appMetadata from 'photos/appMetadata'\nimport doctypes from './doctypes'\nconst loggerMiddleware = createLogger()\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const root = document.querySelector('[role=application]')\n  const data = root.dataset\n  const lang = document.documentElement.getAttribute('lang') || 'en'\n  const protocol = window.location ? window.location.protocol : 'https:'\n  const cozyUrl = `${protocol}//${data.cozyDomain}`\n  const client = new CozyClient({\n    uri: cozyUrl,\n    token: data.cozyToken,\n    appMetadata,\n    schema: doctypes\n  })\n\n  // We still need to init cozy-client-js for the Uploader\n  cozy.client.init({\n    cozyURL: cozyUrl,\n    token: data.cozyToken\n  })\n\n  cozy.bar.init({\n    appName: data.cozyAppName,\n    appEditor: data.cozyAppEditor,\n    cozyClient: client,\n    iconPath: data.cozyIconPath,\n    lang: data.cozyLocale,\n    replaceTitleOnMobile: true\n  })\n  configureReporter()\n  setCozyUrl(cozyUrl)\n  let history = hashHistory\n  let middlewares = [thunkMiddleware, loggerMiddleware]\n\n  if (shouldEnableTracking() && getTracker()) {\n    let trackerInstance = getTracker()\n    history = trackerInstance.connectToHistory(hashHistory)\n    trackerInstance.track(hashHistory.getCurrentLocation()) // when using a hash history, the initial visit is not tracked by piwik react router\n    middlewares.push(createTrackerMiddleware())\n  }\n\n  // Enable Redux dev tools\n  const composeEnhancers =\n    (__DEVELOPMENT__ && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose\n\n  const store = createStore(\n    combineReducers({ ...appReducers, cozy: client.reducer() }),\n    composeEnhancers(applyMiddleware.apply(this, middlewares))\n  )\n\n  render(\n    <I18n lang={lang} dictRequire={lang => require(`photos/locales/${lang}`)}>\n      <CozyProvider store={store} client={client}>\n        <Router history={history} routes={AppRoute} />\n      </CozyProvider>\n    </I18n>,\n    root\n  )\n})\n","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-trash-red_c64051db4812a1c5d58fc48b31781cbc\",\n  \"use\": \"icon-trash-red_c64051db4812a1c5d58fc48b31781cbc-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 16 16\\\" id=\\\"icon-trash-red_c64051db4812a1c5d58fc48b31781cbc\\\">\\n  <g fill=\\\"#F52D2D\\\" fill-rule=\\\"evenodd\\\" transform=\\\"translate(-96 -32)\\\">\\n    <path d=\\\"M100.5,33 L98.0068455,33 C97.4499488,33 97,33.4477153 97,34 L97,35 L111,35 L111,34 C111,33.4438648 110.54922,33 109.993155,33 L107.5,33 L107,32 L101,32 L100.5,33 Z M98,36 L110,36 L110,45.9914698 C110,47.1007504 109.09805,48 107.99147,48 L100.00853,48 C98.8992496,48 98,47.0980496 98,45.9914698 L98,36 Z\\\" />\\n    <path d=\\\"M100.5,33 L98.0068455,33 C97.4499488,33 97,33.4477153 97,34 L97,35 L111,35 L111,34 C111,33.4438648 110.54922,33 109.993155,33 L107.5,33 L107,32 L101,32 L100.5,33 Z M98,36 L110,36 L110,45.9914698 C110,47.1007504 109.09805,48 107.99147,48 L100.00853,48 C98.8992496,48 98,47.0980496 98,45.9914698 L98,36 Z\\\" />\\n  </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import React from 'react'\nimport classNames from 'classnames'\nimport { Icon } from 'cozy-ui/react'\nimport styles from './badge.styl'\nimport palette from 'cozy-ui/react/palette'\n\nconst SharedBadge = ({ byMe, className, small, xsmall }) => (\n  <div\n    className={classNames(\n      styles['shared-badge'],\n      className,\n      { [styles['--small']]: small },\n      { [styles['--xsmall']]: xsmall },\n      styles[byMe ? '--by-me' : '--with-me']\n    )}\n  >\n    <Icon\n      icon=\"share\"\n      color={palette.white}\n      className={styles['shared-badge-icon']}\n    />\n  </div>\n)\n\nexport default SharedBadge\n","import React, { Component } from 'react'\nimport SelectionBar from 'cozy-ui/react/SelectionBar'\n\nconst SelectionContext = React.createContext([])\n\n// constants\nconst SELECT_ITEM = 'SELECT_ITEM'\nconst UNSELECT_ITEM = 'UNSELECT_ITEM'\nconst ADD_TO_SELECTION = 'ADD_TO_SELECTION'\nconst REMOVE_FROM_SELECTION = 'REMOVE_FROM_SELECTION'\nconst TOGGLE_SELECTION_BAR = 'TOGGLE_SELECTION_BAR'\nconst SHOW_SELECTION_BAR = 'SHOW_SELECTION_BAR'\nconst HIDE_SELECTION_BAR = 'HIDE_SELECTION_BAR'\n\n// actions\nconst showSelectionBar = () => ({ type: SHOW_SELECTION_BAR })\nconst hideSelectionBar = () => ({ type: HIDE_SELECTION_BAR })\n// const toggleSelectionBar = () => ({ type: TOGGLE_SELECTION_BAR })\nconst toggleItemSelection = (item, selected) => ({\n  type: selected ? UNSELECT_ITEM : SELECT_ITEM,\n  item\n})\nconst addToSelection = items => ({ type: ADD_TO_SELECTION, items })\nconst removeFromSelection = items => ({\n  type: REMOVE_FROM_SELECTION,\n  items\n})\n\n// reducers\nconst selected = (state = [], action) => {\n  if (action.meta && action.meta.cancelSelection) {\n    return []\n  }\n  switch (action.type) {\n    case SELECT_ITEM:\n      return [...state, action.item]\n    case UNSELECT_ITEM:\n      return state.filter(i => i._id !== action.item.id)\n    case ADD_TO_SELECTION:\n      // eslint-disable-next-line no-case-declarations\n      const selectedIds = state.map(i => i._id)\n      // eslint-disable-next-line no-case-declarations\n      const newItems = action.items.filter(\n        i => selectedIds.indexOf(i._id) === -1\n      )\n      return [...state, ...newItems]\n    case REMOVE_FROM_SELECTION:\n      // eslint-disable-next-line no-case-declarations\n      const itemIds = action.items.map(i => i._id)\n      return state.filter(i => itemIds.indexOf(i._id) === -1)\n    case HIDE_SELECTION_BAR:\n      return []\n    default:\n      return state\n  }\n}\n\nconst isSelectionBarOpened = (state = false, action) => {\n  if (action.meta && action.meta.cancelSelection) {\n    return false\n  }\n  switch (action.type) {\n    case TOGGLE_SELECTION_BAR:\n      return !state\n    case SHOW_SELECTION_BAR:\n      return true\n    case HIDE_SELECTION_BAR:\n      return false\n    default:\n      return state\n  }\n}\n\nexport default class Selection extends Component {\n  state = {\n    selected: selected(undefined, {}),\n    opened: isSelectionBarOpened(undefined, {})\n  }\n\n  toggle = (id, selected) => this.dispatch(toggleItemSelection(id, selected))\n  select = ids => this.dispatch(addToSelection(ids))\n  unselect = ids => this.dispatch(removeFromSelection(ids))\n  clear = () => this.dispatch(hideSelectionBar())\n  show = () => this.dispatch(showSelectionBar())\n\n  dispatch(action) {\n    this.setState(state => ({\n      ...state,\n      selected: selected(state.selected, action),\n      opened: isSelectionBarOpened(state.opened, action)\n    }))\n  }\n\n  render() {\n    const { children, actions = {} } = this.props\n    const { selected, opened } = this.state\n\n    const active = selected.length !== 0 || opened\n\n    const selectionActions = {\n      toggle: this.toggle,\n      select: this.select,\n      unselect: this.unselect,\n      clear: this.clear,\n      show: this.show\n    }\n\n    const realActions =\n      typeof actions === 'function' ? actions(selectionActions) : actions\n\n    let checkedActions = {}\n    Object.keys(realActions).map(k => {\n      checkedActions[k] =\n        typeof realActions[k] === 'function'\n          ? { action: realActions[k] }\n          : realActions[k]\n    })\n\n    const hasActions = Object.keys(checkedActions).length > 0\n\n    return (\n      <SelectionContext.Provider value={selected}>\n        <div>\n          {active &&\n            hasActions && (\n              <SelectionBar\n                selected={selected}\n                hideSelectionBar={this.clear}\n                actions={checkedActions}\n              />\n            )}\n          {children(selected, active, selectionActions)}\n        </div>\n      </SelectionContext.Provider>\n    )\n  }\n}\n\nexport const Consumer = SelectionContext.Consumer\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { withRouter } from 'react-router'\n\nimport { showModal } from 'react-cozy-helpers'\nimport { translate } from 'cozy-ui/react/I18n'\nimport Alerter from 'cozy-ui/react/Alerter'\nimport { ShareModal } from 'sharing'\nimport flow from 'lodash/flow'\n\nimport styles from '../../../styles/layout.styl'\n\nimport AlbumToolbar from './AlbumToolbar'\nimport { AddToAlbumModal } from '..'\n\nimport PhotoBoard from 'photos/components/PhotoBoard'\nimport Topbar from 'photos/components/Topbar'\n\nimport DestroyConfirm from 'photos/components/DestroyConfirm'\nimport QuitConfirm from 'photos/components/QuitConfirm'\nimport confirm from 'photos/lib/confirm'\nimport Selection from '../../selection'\nclass AlbumPhotos extends Component {\n  state = {\n    editing: false,\n    showAddAlbumModal: false\n  }\n  static contextTypes = {\n    client: PropTypes.object.isRequired\n  }\n  showAddAlbumModal = () => {\n    this.setState(state => ({ ...state, showAddAlbumModal: true }))\n  }\n  hideAddAlbumModal = () => {\n    this.setState(state => ({ ...state, showAddAlbumModal: false }))\n  }\n  editAlbumName = () => {\n    this.setState(state => ({ ...state, editing: true }))\n  }\n\n  renameAlbum = name => {\n    if (name.trim() === '') {\n      Alerter.error('Error.album_rename_abort')\n      return\n    } else if (name === this.props.album.name) {\n      this.setState({ editing: false })\n      return\n    }\n\n    let updatedAlbum = { ...this.props.album, name: name }\n    this.props\n      .updateAlbum(updatedAlbum)\n      .then(() => {\n        this.setState({ editing: false })\n      })\n      .catch(() => {\n        Alerter.error('Error.generic')\n      })\n  }\n  //!TODO Hack. We should not use 99999 as limit.\n  downloadAlbum = async () => {\n    const { album } = this.props\n    const allPhotos = await this.context.client\n      .getStackClient()\n      .collection('io.cozy.files')\n      .findReferencedBy(\n        {\n          _type: 'io.cozy.photos.albums',\n          _id: album.id\n        },\n        { limit: 99999 }\n      )\n    this.context.client\n      .collection('io.cozy.files')\n      .downloadArchive(allPhotos.data.map(({ _id }) => _id), album.name)\n  }\n\n  downloadPhotos = photos => {\n    this.context.client\n      .collection('io.cozy.files')\n      .downloadArchive(photos.map(({ _id }) => _id), 'selected')\n  }\n\n  deleteAlbum = () => {\n    const { t, router, album, deleteAlbum } = this.props\n    return confirm(<DestroyConfirm t={t} albumName={album.name} />, () =>\n      deleteAlbum(album)\n        .then(() => {\n          router.replace('albums')\n          Alerter.success('Albums.remove_album.success', { name: album.name })\n        })\n        .catch(() => Alerter.error('Albums.remove_album.error.generic'))\n    )\n  }\n\n  leaveAlbum = () => {\n    const { t, router, album, deleteAlbum, leaveAlbum } = this.props\n    return confirm(<QuitConfirm t={t} albumName={album.name} />, () =>\n      leaveAlbum(album)\n        .then(() => deleteAlbum(album))\n        .then(() => {\n          router.replace('albums')\n          Alerter.success('Albums.quit_album.success', { name: album.name })\n        })\n        .catch(() => Alerter.error('Albums.quit_album.error.generic'))\n    )\n  }\n\n  render() {\n    if (!this.props.album || !this.props.photos) {\n      return null\n    }\n\n    const {\n      t,\n      router,\n      album,\n      shareAlbum,\n      photos,\n      hasMore,\n      fetchMore\n    } = this.props\n    const { editing } = this.state\n    const shared = {}\n\n    return (\n      <Selection\n        actions={selection => ({\n          'album-add': this.showAddAlbumModal,\n          download: this.downloadPhotos,\n          'album-remove': selected =>\n            this.props.removePhotos(album, selected, selection.clear)\n        })}\n      >\n        {(selected, active, selection) => (\n          <div\n            data-test-id=\"album-pho-content-wrapper\"\n            className={styles['pho-content-wrapper']}\n          >\n            {album.name &&\n              album.photos.data && (\n                <Topbar\n                  viewName=\"albumContent\"\n                  albumName={album.name}\n                  editing={editing}\n                  onEdit={this.renameAlbum}\n                >\n                  <AlbumToolbar\n                    t={t}\n                    router={router}\n                    album={album}\n                    sharedWithMe={shared.withMe}\n                    sharedByMe={shared.byMe}\n                    readOnly={shared.readOnly}\n                    onRename={this.editAlbumName}\n                    downloadAlbum={this.downloadAlbum}\n                    deleteAlbum={this.deleteAlbum}\n                    leaveAlbum={this.leaveAlbum}\n                    shareAlbum={shareAlbum}\n                  />\n                </Topbar>\n              )}\n            {this.state.showAddAlbumModal && (\n              <AddToAlbumModal\n                onDismiss={this.hideAddAlbumModal}\n                onSuccess={selection.clear}\n                photos={selected}\n              />\n            )}\n            {photos && (\n              <PhotoBoard\n                lists={[{ photos }]}\n                selected={selected}\n                photosContext=\"timeline\"\n                showSelection={active}\n                onPhotoToggle={selection.toggle}\n                onPhotosSelect={selection.select}\n                onPhotosUnselect={selection.unselect}\n                fetchStatus={photos.fetchStatus}\n                hasMore={hasMore}\n                fetchMore={fetchMore}\n              />\n            )}\n            {this.renderViewer(this.props.children)}\n          </div>\n        )}\n      </Selection>\n    )\n  }\n\n  renderViewer(children) {\n    if (!children) return null\n    return React.Children.map(children, child =>\n      React.cloneElement(child, {\n        photos: this.props.photos\n      })\n    )\n  }\n\n  componentWillUnmount() {\n    if (this.props.selection !== undefined) {\n      this.props.selection.clear()\n    }\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  shareAlbum: album =>\n    dispatch(\n      showModal(<ShareModal document={album} sharingDesc={album.name} />)\n    )\n})\n\nAlbumPhotos.propTypes = {\n  hasMore: PropTypes.bool.isRequired,\n  fetchMore: PropTypes.func.isRequired,\n  album: PropTypes.object.isRequired,\n  shareAlbum: PropTypes.func,\n  photos: PropTypes.array.isRequired,\n  t: PropTypes.func.isRequired,\n  router: PropTypes.object.isRequired\n}\n\nexport default flow(\n  connect(\n    null,\n    mapDispatchToProps\n  ),\n  withRouter,\n  translate()\n)(AlbumPhotos)\n","import React from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { Button } from 'cozy-ui/react'\n\nimport styles from './index.styl'\n\nconst MoreButton = ({ t, disabled, onClick }) => (\n  <Button\n    data-test-id=\"more-button\"\n    className={styles['dri-btn--more']}\n    theme=\"secondary\"\n    disabled={disabled}\n    onClick={onClick}\n    extension=\"narrow\"\n    icon=\"dots\"\n    iconOnly\n    label={t('Toolbar.more')}\n  />\n)\n\nexport default translate()(MoreButton)\n","/* global __SENTRY_URL__, __DEVELOPMENT__ */\nimport Raven from 'raven-js'\nimport appMetadata from 'drive/appMetadata'\nimport logger from 'lib/logger'\n\nexport const ANALYTICS_URL =\n  typeof __SENTRY_URL__ === 'undefined' ? '' : __SENTRY_URL__\n\n// normalize files path on mobile, see https://github.com/getsentry/sentry-cordova/blob/17e8b3395e8ce391ecf28658d0487b97487bb509/src/js/SentryCordova.ts#L213\nconst normalizeUrl = (url, pathStripRe) =>\n  url.replace(/^file:\\/\\//, 'app://').replace(pathStripRe, '')\n\nexport const normalizeData = data => {\n  const PATH_STRIP_RE = /^.*\\/[^.]+(\\.app|CodePush|.*(?=\\/))/\n\n  if (data.culprit) {\n    data.culprit = normalizeUrl(data.culprit, PATH_STRIP_RE)\n  }\n  const stacktrace =\n    data.stacktrace ||\n    (data.exception &&\n      data.exception.values &&\n      data.exception.values[0] &&\n      data.exception.values[0].stacktrace)\n\n  if (stacktrace) {\n    stacktrace.frames = stacktrace.frames.map(\n      frame =>\n        frame.filename !== '[native code]'\n          ? { ...frame, filename: normalizeUrl(frame.filename, PATH_STRIP_RE) }\n          : frame\n    )\n  }\n  return data\n}\n\nexport const getReporterConfiguration = () => ({\n  shouldSendCallback: true,\n  environment: __DEVELOPMENT__ ? 'development' : 'production',\n  release: appMetadata.version,\n  allowSecretKey: true,\n  dataCallback: normalizeData\n})\n\nexport const configureReporter = () => {\n  Raven.config(ANALYTICS_URL, getReporterConfiguration()).install()\n}\n\nexport const logException = (err, extraContext = null, fingerprint = null) => {\n  return new Promise(resolve => {\n    Raven.captureException(err, { extra: extraContext, fingerprint })\n    logger.warn('Raven is recording exception')\n    logger.error(err)\n    resolve()\n  })\n}\n\nexport const setCozyUrl = instance => {\n  Raven.setTagsContext({ instance })\n}\n\nconst logMessage = (message, serverUrl, level = 'info') => {\n  return new Promise(resolve => {\n    Raven.setUserContext = {\n      url: serverUrl\n    }\n    Raven.captureMessage(`[${serverUrl}] ${message}`, {\n      level\n    })\n    resolve()\n  })\n}\n\nexport const logInfo = (message, serverUrl) =>\n  logMessage(message, serverUrl, 'info')\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport get from 'lodash/get'\nimport { Avatar } from 'cozy-ui/react'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport styles from 'sharing/components/recipient.styl'\n\nimport { Contact, Group } from 'models'\nimport Identity from 'sharing/components/Identity'\n\nexport const ContactSuggestion = ({ contactOrGroup, contacts, t }) => {\n  let avatarText, name, details\n  if (contactOrGroup._type === Group.doctype) {\n    name = contactOrGroup.name\n    const membersCount = contacts\n      .reduce((total, contact) => {\n        if (\n          get(contact, 'relationships.groups.data', [])\n            .map(group => group._id)\n            .includes(contactOrGroup._id)\n        ) {\n          return total + 1\n        }\n\n        return total\n      }, 0)\n      .toString()\n    details = t('Share.members.count', {\n      smart_count: membersCount\n    })\n    avatarText = 'G'\n  } else {\n    name = Contact.getDisplayName(contactOrGroup)\n    avatarText = Contact.getInitials(contactOrGroup)\n    details = Contact.getPrimaryCozy(contactOrGroup)\n  }\n\n  return (\n    <div className={styles['recipient']}>\n      <Avatar text={avatarText} size=\"small\" />\n      <Identity name={name} details={details} />\n    </div>\n  )\n}\n\nContactSuggestion.propTypes = {\n  contactOrGroup: PropTypes.oneOfType([Contact.propType, Group.propType])\n    .isRequired,\n  contacts: PropTypes.arrayOf(Contact.propType),\n  t: PropTypes.func.isRequired\n}\n\nexport default translate()(ContactSuggestion)\n","import React, { Component } from 'react'\nimport { withRouter } from 'react-router'\nimport { Button } from 'cozy-ui/react'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport { TimelineBoard } from '../../timeline'\nimport Selection from '../../selection'\n\nimport styles from '../../../styles/newAlbum.styl'\n\nclass PhotosPicker extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      name: props.t('Albums.create.panel_form.placeholder')\n    }\n  }\n\n  onNameChange = e => {\n    this.setState({ name: e.target.value })\n  }\n\n  onCancel = () => {\n    this.props.router.goBack()\n  }\n\n  onCreate = selected => {\n    const { name } = this.state\n    this.props\n      .createAlbum(name, selected)\n      .then(album => this.props.router.push(`/albums/${album.id}`))\n      .catch(() => {\n        this.input.focus()\n        this.input.select()\n      })\n  }\n\n  onUpdate = selected => {\n    const { album } = this.props\n    this.props\n      .addPhotos(album, selected)\n      .then(() => this.props.router.push(`/albums/${album.id}`))\n  }\n\n  componentDidMount() {\n    if (!this.props.album) {\n      this.input.focus()\n      this.input.select()\n    }\n  }\n\n  render() {\n    const { t, album } = this.props\n    const { name } = this.state\n    const isNew = !album\n    return (\n      <Selection>\n        {(selected, active, selection) => (\n          <div className={styles['pho-panel']}>\n            <div className={styles['pho-panel-form']}>\n              <header className={styles['pho-panel-header']}>\n                <div className={styles['pho-panel-wrap']}>\n                  {isNew && (\n                    <div>\n                      <label className={styles['coz-form-label']}>\n                        {t('Albums.create.panel_form.label')}\n                      </label>\n                      <input\n                        data-test-id=\"input-album-name\"\n                        type=\"text\"\n                        ref={input => {\n                          this.input = input\n                        }}\n                        value={name}\n                        onChange={this.onNameChange}\n                      />\n                    </div>\n                  )}\n                  {!isNew && (\n                    <h3 data-test-id=\"pho-picker-album-name\">{album.name}</h3>\n                  )}\n                </div>\n              </header>\n              <div className={styles['pho-panel-content']}>\n                <div\n                  data-test-id=\"picker-panel\"\n                  className={styles['pho-panel-wrap']}\n                >\n                  <TimelineBoard\n                    selected={selected}\n                    showSelection\n                    selection={selection}\n                  />\n                </div>\n              </div>\n              <footer className={styles['pho-panel-footer']}>\n                <div className={styles['pho-panel-wrap']}>\n                  <div className={styles['pho-panel-controls']}>\n                    <Button\n                      theme=\"secondary\"\n                      onClick={this.onCancel}\n                      label={t('Albums.create.panel_form.cancel')}\n                    />\n                    <Button\n                      data-test-id=\"validate-album\"\n                      onClick={() =>\n                        isNew\n                          ? this.onCreate(selected)\n                          : this.onUpdate(selected)\n                      }\n                      label={t(\n                        isNew\n                          ? 'Albums.create.panel_form.submit'\n                          : 'Albums.create.panel_form.update'\n                      )}\n                    />\n                  </div>\n                </div>\n              </footer>\n            </div>\n          </div>\n        )}\n      </Selection>\n    )\n  }\n}\n\nexport default translate()(withRouter(PhotosPicker))\n","import styles from '../styles/photoList.styl'\n\nimport React from 'react'\nimport classNames from 'classnames'\nimport { Link, withRouter } from 'react-router'\n\nimport { ImageLoader } from 'components/Image'\n\nconst getStyleFromBox = box => {\n  let style = {}\n  if (box) {\n    if (box.width) {\n      style.width = `${box.width}px`\n    }\n    if (box.height) {\n      style.height = `${box.height}px`\n    }\n    if (box.top) {\n      style.top = `${box.top}px`\n    }\n    if (box.left) {\n      style.left = `${box.left}px`\n    }\n  }\n  return style\n}\n\nconst Photo = props => {\n  const { photo, box, selected = false, onToggle, router } = props\n  const style = getStyleFromBox(box)\n  return (\n    <div\n      style={style}\n      data-test-item={photo.name}\n      className={classNames(styles['pho-photo'], {\n        [styles['pho-photo--selected']]: selected\n      })}\n    >\n      <div>\n        <span\n          className={styles['pho-photo-select']}\n          data-input=\"checkbox\"\n          onClick={e => {\n            e.stopPropagation()\n            onToggle(photo, selected)\n          }}\n        >\n          <input type=\"checkbox\" checked={selected} onChange={() => {}} />\n          <label />\n        </span>\n        <Link\n          to={{\n            pathname: `${router.location.pathname}/${photo.id}`,\n            query: router.location.query\n          }}\n        >\n          <ImageLoader\n            file={photo}\n            size=\"small\"\n            render={src => (\n              <img\n                data-test-id=\"pho-photo-item\"\n                src={src}\n                className={styles['pho-photo-item']}\n                style={style}\n              />\n            )}\n          />\n        </Link>\n      </div>\n    </div>\n  )\n}\n\nexport default withRouter(Photo)\n","import React from 'react'\nconst SharingContext = React.createContext()\n\nexport default SharingContext\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"u-visuallyhidden\":\"u-visuallyhidden--1L4hk\",\"dri-btn--more\":\"dri-btn--more--MNdqs\",\"bar-homelink\":\"bar-homelink--2j0WN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"c-btn\":\"c-btn--1VDiR\",\"c-btn--regular\":\"c-btn--regular--1AoRN\",\"c-btn--danger\":\"c-btn--danger--2NNcc\",\"c-btn--secondary\":\"c-btn--secondary--3znY5\",\"c-btn--danger-outline\":\"c-btn--danger-outline--mVde8\",\"pho-toolbar\":\"pho-toolbar--28WqL\",\"pho-action-delete\":\"pho-action-delete--3RnOf\",\"pho-action-upload\":\"pho-action-upload--1QgoA\",\"spin\":\"spin--GHUiz\",\"shake\":\"shake--3TZHV\"};","import React from 'react'\nimport get from 'lodash/get'\nimport Modal from 'cozy-ui/react/Modal'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { withClient } from 'cozy-client'\nimport withInstance from './withInstance'\nimport { isMobileApp } from 'cozy-device-helper'\n\nconst buildPremiumLink = (uuid, managerUrl) =>\n  `${managerUrl}/cozy/instances/${uuid}/premium`\n\nconst QuotaAlert = ({ t, onClose, client }) => {\n  let uuid, managerUrl\n  /**\n   * We do the request only on the web since Apple\n   * and Google have a retriscted policy for the\n   * inApp purchase...\n   */\n  if (!isMobileApp()) {\n    const instanceInfo = withInstance(client)\n    uuid = get(instanceInfo, 'instance.data.attributes.uuid')\n    managerUrl = get(instanceInfo, 'context.data.attributes.manager_url')\n  }\n\n  return (\n    <Modal\n      title={t('quotaalert.title')}\n      description={t('quotaalert.desc')}\n      secondaryText={t('quotaalert.confirm')}\n      secondaryAction={onClose}\n      primaryText={uuid && managerUrl ? t('quotaalert.increase') : undefined}\n      primaryAction={() =>\n        uuid && managerUrl\n          ? window.open(buildPremiumLink(uuid, managerUrl), 'self')\n          : onClose\n      }\n      dismissAction={onClose}\n    />\n  )\n}\n\nexport default translate()(withClient(QuotaAlert))\n","import React from 'react'\nimport { withRouter } from 'react-router'\nimport classNames from 'classnames'\nimport { ButtonLink, Menu, MenuItem, Icon } from 'cozy-ui/react'\n\nimport { MoreButton } from 'components/Button'\n\nimport styles from 'photos/styles/toolbar.styl'\n\nconst AlbumsToolbar = ({ t, router }) => (\n  <div\n    data-test-id=\"pho-toolbar-albums\"\n    className={styles['pho-toolbar']}\n    role=\"toolbar\"\n  >\n    <div className={'u-hide--mob'}>\n      <ButtonLink\n        data-test-id=\"album-add\"\n        theme=\"secondary\"\n        href=\"#/albums/new\"\n        icon=\"album-add\"\n        label={t('Toolbar.album_new')}\n      />\n    </div>\n    <Menu\n      className={classNames(styles['pho-toolbar-menu'], 'u-hide--desk')}\n      component={<MoreButton />}\n      position=\"right\"\n    >\n      <MenuItem\n        onSelect={() => router.push('/albums/new')}\n        icon={<Icon icon=\"album-add\" />}\n      >\n        {t('Toolbar.album_new')}\n      </MenuItem>\n    </Menu>\n  </div>\n)\n\nexport default withRouter(AlbumsToolbar)\n","module.exports = {\"name\":\"Photos\",\"name_prefix\":\"Cozy\",\"slug\":\"photos\",\"version\":\"1.18.16\",\"type\":\"webapp\",\"licence\":\"AGPL-3.0\",\"icon\":\"public/app-icon.svg\",\"categories\":[\"cozy\"],\"source\":\"https://github.com/cozy/cozy-drive\",\"editor\":\"Cozy\",\"developer\":{\"name\":\"Cozy Cloud\",\"url\":\"https://cozy.io\"},\"langs\":[\"en\",\"fr\"],\"locales\":{\"fr\":{\"short_description\":\"Cozy Photos est l’application de visualisation et gestion de vos photos sur Cozy.\",\"long_description\":\"Avec Cozy Photos vous pourrez :\\n- Visualiser toutes les photos présentes dans votre Cozy, classées par date;\\n- Organisez vos photos en albums;\\n- Partager vos albums avec qui vous le souhaitez.\",\"screenshots\":[\"screenshots/fr/screenshot01.jpg\",\"screenshots/fr/screenshot02.jpg\",\"screenshots/fr/screenshot03.jpg\"]},\"en\":{\"short_description\":\"Cozy Photos allows you to view and manage your photos on your Cozy\",\"long_description\":\"With Cozy Photos, you can:\\n- Get a timeline of all your memories\\n- Organize your photos through albums\\n- Share albums with just a link\",\"screenshots\":[\"screenshots/en/screenshot01.jpg\",\"screenshots/en/screenshot02.jpg\",\"screenshots/en/screenshot03.jpg\"]}},\"screenshots\":[\"screenshots/fr/screenshot01.jpg\",\"screenshots/fr/screenshot02.jpg\",\"screenshots/fr/screenshot03.jpg\"],\"routes\":{\"/\":{\"folder\":\"/\",\"index\":\"index.html\",\"public\":false},\"/public\":{\"folder\":\"/public\",\"index\":\"index.html\",\"public\":true}},\"services\":{\"onPhotoUpload\":{\"type\":\"node\",\"file\":\"services/onPhotoUpload/photos.js\",\"trigger\":\"@event io.cozy.files:CREATED:image:class\",\"debounce\":\"5m\"}},\"permissions\":{\"files\":{\"description\":\"Required for photo access\",\"type\":\"io.cozy.files\",\"verbs\":[\"GET\",\"POST\",\"PUT\",\"PATCH\"]},\"apps\":{\"description\":\"Required by the cozy-bar to display the icons of the apps\",\"type\":\"io.cozy.apps\",\"verbs\":[\"GET\",\"PUT\"]},\"albums\":{\"description\":\"Required to manage photos albums\",\"type\":\"io.cozy.photos.albums\",\"verbs\":[\"GET\",\"POST\",\"PUT\",\"DELETE\"]},\"photos_settings\":{\"description\":\"Required to manage photos albums settings\",\"type\":\"io.cozy.photos.settings\",\"verbs\":[\"GET\",\"POST\",\"PUT\"]},\"contacts\":{\"description\":\"Required to to share photos with your contacts\",\"type\":\"io.cozy.contacts\",\"verbs\":[\"GET\",\"POST\"]},\"settings\":{\"description\":\"Required by the cozy-bar to display Claudy and know which applications are coming soon\",\"type\":\"io.cozy.settings\",\"verbs\":[\"GET\"]},\"oauth\":{\"description\":\"Required to display the cozy-desktop banner\",\"type\":\"io.cozy.oauth.clients\",\"verbs\":[\"GET\"]},\"reporting\":{\"description\":\"Allow to report unexpected errors to the support team\",\"type\":\"cc.cozycloud.sentry\",\"verbs\":[\"POST\"]},\"triggers\":{\"description\":\"Required to re-execute the clustering\",\"type\":\"io.cozy.triggers\",\"verbs\":[\"POST\"],\"selector\":\"worker\",\"values\":[\"service\"]}}}","import manifest from 'drive/targets/manifest.webapp'\n\nconst appMetadata = {\n  slug: manifest.name,\n  version: manifest.version\n}\n\nexport default appMetadata\n","import React from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { SharingTooltip, TooltipRecipientList } from './Tooltip'\nimport cx from 'classnames'\nimport Icon from 'cozy-ui/react/Icon'\n\nimport { Contact } from 'models'\nimport styles from './status.styl'\nimport linkIcon from '../assets/icons/icon-link.svg'\n\nconst SharedStatus = ({ className, docId, recipients, link, t }) => (\n  <span className={cx(className, styles['shared-status'])}>\n    {recipients.length > 1 && (\n      <a\n        data-tip\n        data-for={`members${docId}`}\n        className={styles['shared-status-label']}\n      >\n        {t('Share.members.count', { smart_count: recipients.length })}\n      </a>\n    )}\n    {recipients.length > 1 && (\n      <SharingTooltip id={`members${docId}`}>\n        <TooltipRecipientList\n          recipientNames={recipients.map(recipient =>\n            Contact.getDisplayName(recipient)\n          )}\n        />\n      </SharingTooltip>\n    )}\n    {link && <Icon icon={linkIcon} />}\n  </span>\n)\n\nexport default translate()(SharedStatus)\n","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon-type-folder_f49493c812ab389aaac1e61434f7995f\",\n  \"use\": \"icon-type-folder_f49493c812ab389aaac1e61434f7995f-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"icon-type-folder_f49493c812ab389aaac1e61434f7995f\\\">\\n  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" transform=\\\"translate(0 2)\\\">\\n    <rect width=\\\"32\\\" height=\\\"26\\\" y=\\\"2\\\" fill=\\\"#B2D3FF\\\" rx=\\\"2\\\" />\\n    <path fill=\\\"#197BFF\\\" d=\\\"M0,0.990777969 C0,0.443586406 0.449948758,0 1.00684547,0 L12.9931545,0 C13.5492199,0 14.3125,0.3125 14.7107565,0.71075654 L15.2892435,1.28924346 C15.6817835,1.68178346 16.4446309,2 17.0008717,2 L30.0059397,2 C31.1072288,2 32,2.89470506 32,4 L32,4 L17.0008717,4 C16.4481055,4 15.6875,4.3125 15.2892435,4.71075654 L14.7107565,5.28924346 C14.3182165,5.68178346 13.5500512,6 12.9931545,6 L1.00684547,6 C0.450780073,6 0,5.54902482 0,5.00922203 L0,0.990777969 Z\\\" />\\n  </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import manifest from 'photos/targets/manifest.webapp'\n\nconst appMetadata = {\n  slug: manifest.name,\n  version: manifest.version\n}\n\nexport default appMetadata\n","import { Contact, Group } from 'models'\nimport extraDoctypes from 'drive/lib/extraDoctypes'\n\nexport const DOCTYPE_FILES = 'io.cozy.files'\nexport const DOCTYPE_ALBUMS = 'io.cozy.photos.albums'\nexport const DOCTYPE_PHOTOS_SETTINGS = 'io.cozy.photos.settings'\nexport const DOCTYPE_APPS = 'io.cozy.apps'\nexport const DOCTYPE_CONTACTS_VERSION = 2\n\nexport const schema = {\n  files: { doctype: DOCTYPE_FILES },\n  contacts: {\n    doctype: Contact.doctype,\n    doctypeVersion: DOCTYPE_CONTACTS_VERSION\n  },\n  groups: { doctype: Group.doctype },\n  ...extraDoctypes\n}\n","import styles from './pushClient.styl'\n\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport React, { Component } from 'react'\nimport localforage from 'localforage'\nimport { track, isLinux, isClientAlreadyInstalled, DESKTOP_BANNER } from '.'\nimport Config from 'drive/config/config.json'\n\nimport { Icon } from 'cozy-ui/react'\nimport DeviceIcon from 'cozy-ui/assets/icons/illus/device-laptop.svg'\n\nclass ButtonClient extends Component {\n  state = {\n    mustShow: false\n  }\n\n  async componentWillMount() {\n    if (Config.promoteDesktop.isActivated !== true) return\n    const seen = (await localforage.getItem(DESKTOP_BANNER)) || false\n    // we want to show the button if the banner has been marked as seen *and*\n    // the client hasn't been already installed\n    if (seen) {\n      const mustSee = !(await isClientAlreadyInstalled())\n      if (mustSee) {\n        this.setState(state => ({ ...state, mustShow: true }))\n      }\n    }\n  }\n\n  render() {\n    if (Config.promoteDesktop.isActivated !== true || !this.state.mustShow)\n      return null\n    const { t } = this.props\n    return (\n      <a\n        href={t(isLinux() ? 'Nav.link-client' : 'Nav.link-client-desktop')}\n        //eslint-disable-next-line react/jsx-no-target-blank\n        target=\"_blank\"\n        className={styles['coz-btn-client']}\n        onClick={() => {\n          track('button')\n        }}\n      >\n        <figure>\n          <Icon width=\"32\" height=\"32\" icon={DeviceIcon} />\n        </figure>\n        <span>{t('Nav.btn-client')}</span>\n      </a>\n    )\n  }\n}\n\nexport default translate()(ButtonClient)\n","import React from 'react'\nimport classNames from 'classnames'\nimport { Button } from 'cozy-ui/react'\n\nimport styles from './button.styl'\n\nexport const ShareButton = ({ label, onClick, className, ...props }) => (\n  <Button\n    data-test-id=\"share-button\"\n    theme=\"secondary\"\n    className={className}\n    onClick={() => onClick()}\n    icon=\"share\"\n    label={label}\n    {...props}\n  />\n)\n\nexport const SharedByMeButton = ({ label, onClick, className, ...props }) => (\n  <Button\n    data-test-id=\"share-by-me-button\"\n    className={classNames(styles['coz-btn-shared'], className)}\n    onClick={() => onClick()}\n    icon=\"share\"\n    label={label}\n    {...props}\n  />\n)\n\nexport const SharedWithMeButton = ({ label, onClick, className, ...props }) => (\n  <Button\n    className={classNames(styles['coz-btn-sharedWithMe'], className)}\n    onClick={() => onClick()}\n    icon=\"share\"\n    label={label}\n    {...props}\n  />\n)\n\nexport default ShareButton\n"],"sourceRoot":""}